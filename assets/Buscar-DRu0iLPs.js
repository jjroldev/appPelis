import{r as o,c as S,j as e,d as B,e as q,u as F,a as I,b as p,g as k,L as w}from"./index-ZhOadw6B.js";import{B as x,A as j,g as A,a as C,f as L}from"./fetchData-D8ToqI1N.js";import{C as T}from"./CardItem-Ct6m1Y4G.js";/* empty css             */import{u as W}from"./useWindowWidth-BAPt7hjq.js";import K from"./BarMenu-BD1lJ4Ee.js";const M=o.memo(({placeholder:d})=>{const{searchTerm:s,setSearchTerm:n}=S(),a=o.useRef(null);return o.useEffect(()=>{a.current&&a.current.focus()},[]),e.jsx("form",{id:"busqueda",onSubmit:t=>t.preventDefault(),children:e.jsxs("div",{className:"contenedorLupa",children:[e.jsx("input",{ref:a,id:"busqueda-input",type:"text",className:"lupaMovile",placeholder:d,value:s,onChange:t=>n(t.target.value)}),e.jsx("i",{className:"fa-solid fa-magnifying-glass lupaIcono"}),e.jsx("button",{type:"submit",style:{display:"none"}})]})})});function J(){const d=B(),{searchTerm:s}=S(),{language:n}=q(),{currentPerfil:a,currentUser:t}=F(),{setOpenMenu:f}=I(),u=W();o.useEffect(()=>{window.scrollTo({top:0,behavior:"instant"})},[]),o.useEffect(()=>{s===""&&u>=900&&d(-1)},[s,u,d]),o.useEffect(()=>{f(!1)},[f]),p(`favorites-${t==null?void 0:t.id}-${a==null?void 0:a.id}`,()=>k(t==null?void 0:t.id,a==null?void 0:a.id),{enabled:!!(t!=null&&t.id)&&!!(a!=null&&a.id)});const b=o.useMemo(()=>s?`${x}/search/movie?api_key=${j}&language=${n}&query=${s}`:A(n).topRatedMovies,[s,n]),y=o.useMemo(()=>s?`${x}/search/tv?api_key=${j}&language=${n}&query=${s}`:C(n).topRatedSeries,[s,n]),{data:i,isLoading:$}=p([s,"search-movies"],()=>L(b)),{data:r,isLoading:E}=p([s,"search-series"],()=>L(y)),N=$||E,g=o.useMemo(()=>{var l,v;const h=((l=i==null?void 0:i.results)==null?void 0:l.filter(c=>c.backdrop_path&&c.poster_path))||[],m=((v=r==null?void 0:r.results)==null?void 0:v.filter(c=>c.backdrop_path&&c.poster_path))||[];return[...h,...m].sort(()=>Math.random()-.5)},[i==null?void 0:i.results,r==null?void 0:r.results]),R=h=>h.map((m,l)=>e.jsx(T,{item:m},l)),_=()=>g.length>0?e.jsx("div",{className:"contenedorItemsBuscar",children:R(g)}):e.jsx("div",{className:"contenedorItemsNoE",children:e.jsxs("p",{children:["La búsqueda de ",s," no arrojó coincidencias."]})});return e.jsxs("div",{className:"contenedor",children:[e.jsx(K,{}),e.jsx("div",{className:"contenedorBuscar",children:N?e.jsxs(e.Fragment,{children:[u<900&&e.jsx(M,{placeholder:"Search movies, series, tv series..."}),e.jsx(w,{})]}):e.jsxs(e.Fragment,{children:[u<900&&e.jsx(M,{placeholder:"Search movies, series, tv series..."}),_()]})})]})}export{J as default};
