import{$ as g,u as j,a as p,r,j as e,f as h,e as R,b as y,S as U}from"./index-qPRpgYuD.js";import{r as S,C,B as F}from"./ResponsiveCarrousel-jWcA7YkV.js";import{f as x,g as w}from"./fetchData-CYFUk2L8.js";import{u as L}from"./useQuery-BFWmqAXx.js";import{C as b}from"./CardMovie-6Mqiwghb.js";import"./NavBar-BQB9r-hO.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./ModalVideo-B6oJtFzg.js";const t=g.memo(({URL:c,title:s,isLarge:i=!1})=>{const{currentPerfil:a,currentUser:o}=j(),{data:n}=L(["movies",c],()=>x(c),{staleTime:1e3*60*5}),f=p(),l=r.useMemo(()=>{var d;return((d=n==null?void 0:n.results)==null?void 0:d.filter(M=>M.backdrop_path))||[]},[n]),u=async d=>{await h(o==null?void 0:o.id,a==null?void 0:a.id,d),await f.invalidateQueries(`favorites-${o==null?void 0:o.id}-${a==null?void 0:a.id}`)},m=r.useMemo(()=>S(i),[i]),v=r.useCallback(d=>d.map(M=>e.jsx(b,{movie:M,isLarge:i,onAddFavorite:u},M.id)),[i]);return e.jsx("div",{className:"carousel",children:l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"tituloCarousel",children:s}),e.jsx(C,{swipeable:!1,draggable:!1,showDots:!1,responsive:m,ssr:!0,infinite:!0,autoPlay:!1,className:"carousel-react",children:v(l)})]})})});function k(){const{language:c}=R(),s=r.useMemo(()=>w(c),[c]),{data:i,isLoading:a}=L(["moviesHome",c],()=>x(s.actionMovies),{staleTime:1e3*60*5}),[o,n]=r.useState(null),{setSearchTerm:f}=y(),l=r.useMemo(()=>{var u;return(u=i==null?void 0:i.results)==null?void 0:u.filter(m=>m.backdrop_path)},[i==null?void 0:i.results]);return r.useEffect(()=>{if(!a&&l.length>0){const u=sessionStorage.getItem("featuredMovie");if(u)n(JSON.parse(u));else{const m=Math.floor(Math.random()*l.length),v=l[m];n(v),sessionStorage.setItem("featuredMovie",JSON.stringify(v))}}},[l]),r.useEffect(()=>{window.scroll({top:0,left:0,behavior:"instant"}),f("")},[]),a?e.jsx(U,{}):e.jsxs("div",{className:"contenedorHome",children:[e.jsx(F,{movie:o,logoBuscar:!0}),e.jsxs("div",{className:"contenedorPeliculas",children:[e.jsx(t,{URL:s.popularMovies,title:"Popular Movies"}),e.jsx(t,{URL:s.topRatedMovies,title:"Best Voted",isLarge:!0}),e.jsx(t,{URL:s.actionMovies,title:"Action"}),e.jsx(t,{URL:s.adventureMovies,title:"Adventure",isLarge:!0}),e.jsx(t,{URL:s.animationMovies,title:"Animation",isLarge:!0}),e.jsx(t,{URL:s.comedyMovies,title:"Comedy",isLarge:!0}),e.jsx(t,{URL:s.crimeMovies,title:"Crime",isLarge:!0}),e.jsx(t,{URL:s.documentaryMovies,title:"Documentary",isLarge:!0}),e.jsx(t,{URL:s.dramaMovies,title:"Drama",isLarge:!0}),e.jsx(t,{URL:s.familyMovies,title:"Family",isLarge:!0}),e.jsx(t,{URL:s.fantasyMovies,title:"Fantasy",isLarge:!0}),e.jsx(t,{URL:s.historyMovies,title:"History"}),e.jsx(t,{URL:s.horrorMovies,title:"Horror"}),e.jsx(t,{URL:s.musicMovies,title:"Music",isLarge:!0}),e.jsx(t,{URL:s.mysteryMovies,title:"Mystery",isLarge:!0}),e.jsx(t,{URL:s.romanceMovies,title:"Romance",isLarge:!0}),e.jsx(t,{URL:s.scienceFictionMovies,title:"Science Fiction",isLarge:!0}),e.jsx(t,{URL:s.thrillerMovies,title:"Thriller",isLarge:!0})]})]})}export{k as default};
