import{r as a,j as r}from"./index-3-FYI5xs.js";import{C as w}from"./InfoMovie-D1duxtfo.js";import{C as E,b as N}from"./ResponsiveCarrousel-PsHTsVE9.js";import{b as g,c as _}from"./endPoints-C1_dc0zZ.js";import{u as b}from"./useQuery-DfQrh8vV.js";import{f as D}from"./fetchData-DCFA1qTy.js";import"./NavBar-CsUOqOmV.js";import"./useMergedRefs-dVFgPL-t.js";function S({movie:s}){const{data:t}=b(`providers-${s==null?void 0:s.id}`,()=>D(g(s==null?void 0:s.id).providers)),[i,u]=a.useState([]),f=(e=[])=>e.map(n=>r.jsx("li",{children:r.jsx("span",{children:n.name})},n.id)),[p,o]=a.useState(window.innerWidth);a.useEffect(()=>{const e=()=>o(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),a.useEffect(()=>{if(t!=null&&t.results){const e=[],n=new Set;for(const j in t.results){const d=t.results[j];["flatrate","buy","rent"].forEach(c=>{d[c]&&d[c].forEach(l=>{n.has(l.provider_name)||(n.add(l.provider_name),e.push(l))})})}u(e)}},[t]);const x=e=>e?r.jsx(E,{swipeable:!0,draggable:!0,showDots:!1,responsive:N,ssr:!0,infinite:!0,keyBoardControl:!0,className:"carouselProviders",children:e.map(n=>r.jsx("img",{className:"provedorLogo",src:_+n.logo_path,alt:n.provider_name},n.provider_id))}):null,h=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"movieDetailsBanner flex flex-col",children:[(s==null?void 0:s.overview)&&r.jsx("p",{className:"overview",children:s==null?void 0:s.overview.slice(0,(s==null?void 0:s.overview.indexOf("."))+1)}),r.jsxs("div",{className:"bannerDetails flex flex-row",children:[r.jsxs("span",{children:["TMDB ",s==null?void 0:s.vote_average.toFixed(1)]}),r.jsx("span",{children:s==null?void 0:s.release_date.split("-")[0]}),r.jsx("span",{children:s!=null&&s.runtime?`${Math.floor((s==null?void 0:s.runtime)/60)}h ${(s==null?void 0:s.runtime)%60}min`:"Runtime no disponible"})]}),r.jsx("div",{children:r.jsx("ul",{className:"generosBanner flex flex-row",children:f(s==null?void 0:s.genres)})})]}),p>=900&&r.jsxs("div",{className:"provedores-container posters-continer-banner",children:[r.jsx("div",{className:"postersInfo",children:r.jsx(w,{movie:s,isPoster:!0})}),x(i)]})]});return r.jsx(h,{})}export{S as default};
