import{r as s}from"./index-B4vi_3T7.js";import{o as g}from"./Banner-GKjEUXgX.js";const S="MoviesDB",o="movies",w=async()=>g(S,1,{upgrade(e){e.objectStoreNames.contains(o)||e.createObjectStore(o,{keyPath:"key"})}}),$=(e,r,a)=>{const[m,c]=s.useState([]),[h,n]=s.useState(!0),[p,v]=s.useState(null),M=async()=>{try{n(!0);const t=await w(),i=`${e}_${a}`,f=await t.get(o,i);if(f)c(f.data);else{const y=Array.from({length:r},(l,E)=>fetch(`${e}&page=${E+1}`).then(d=>d.json())),u=(await Promise.all(y)).flatMap(l=>l.results);await t.put(o,{key:i,data:u}),c(u)}}catch(t){console.error("Error fetching movies:",t),v(t.message)}finally{n(!1)}};return s.useEffect(()=>{M()},[e,r,a]),{movies:m,isLoading:h,error:p}};export{$ as u};
