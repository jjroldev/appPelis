import{n as b,r as h,d as E,e as _,b as u,j as s,l as I}from"./index-DFZsAaYs.js";import{f as v,z as L,o as y,C as R}from"./fetchData-C228jrhF.js";import{u as k}from"./useWindowWidth-ORStIE4w.js";import{f as x,c as f}from"./CardItem-Ce_q-quR.js";function U({episode:e,serie_backdrop:r}){var c,m;const{seriesId:i}=b(),[l,g]=h.useState(null),n=k(),p=E(),{language:j}=_(),{data:a,isLoading:w}=u(`images-${i}`,()=>v(y(i)),{enabled:!!i&&e.still_path==null,staleTime:1e3*60*30,cacheTime:1e3*60*30});h.useEffect(()=>{var d;(d=a==null?void 0:a.backdrops)!=null&&d.length&&l===null&&g(Math.floor(Math.random()*a.backdrops.length))},[a,l]);const{data:t}=u(`videos-${e.id}`,()=>v(R(i,e.season_number,e.episode_number,j)));if(w)return null;const o=e.still_path?e.still_path:(c=a==null?void 0:a.backdrops)!=null&&c.length&&l!==null?(m=a==null?void 0:a.backdrops[l])==null?void 0:m.file_path:r,N=()=>{f(t)?p(`/watch/${f(t)}`):I.error("No existe un trailer para este episodio")};return s.jsxs("div",{className:"flex flex-col containerEpisode",onClick:N,children:[s.jsxs("div",{className:"container-episode",children:[s.jsxs("div",{className:"wrapper-img-episode relative",children:[o&&s.jsx("img",{src:L+o||r,alt:e.name}),s.jsx("div",{className:"containerPlayMobile absolute",children:s.jsx("i",{className:"fa-solid fa-play play-icon absolute"})})]}),s.jsxs("div",{className:"info-episode",children:[s.jsxs("h4",{children:[e.episode_number,".  ",e.name]}),s.jsxs("div",{className:"flex flex-row detailsDate",children:[new Date(e.air_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),n>990&&s.jsx("p",{children:x(e.runtime)})]}),n<=990&&s.jsx("p",{children:x(e.runtime)}),n>990&&e.overview&&s.jsx("p",{children:e.overview.length>=(n>600?300:150)?e.overview.slice(0,(n>600?300:150)+1)+"...":e.overview})]}),s.jsx("div",{className:"containerDownload",children:s.jsx("span",{className:"material-symbols-outlined",children:"download"})})]}),n<=990&&e.overview&&s.jsx("div",{className:"overViewEpisodeC",children:s.jsx("p",{className:"overViewEpisode",children:e.overview.length>=(n>600?300:150)?e.overview.slice(0,(n>600?300:150)+1)+"...":e.overview})})]})}export{U as default};
