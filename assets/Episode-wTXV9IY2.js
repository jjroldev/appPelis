const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ModalVideo-4yzDX7HC.js","assets/index-hPdv0EIg.js","assets/index-C_6mexaa.css","assets/index-qMqgQUAp.js","assets/DefaultPropsProvider-D1EKLJtT.js","assets/useForkRef-i0AVCCbP.js","assets/Transition-DgR21AXn.js","assets/objectWithoutPropertiesLoose-Dsqj8S3w.js","assets/TransitionGroupContext-D85aQ_Ym.js"])))=>i.map(i=>d[i]);
import{o as b,r as l,c as v,j as s,_ as I}from"./index-hPdv0EIg.js";import{u as k,q as C,i as N,r as R}from"./BarMenu-CngcR2e-.js";import{f as x}from"./fetchData-DCFA1qTy.js";import{a as L,f as p}from"./Banner-Bvb_tNOm.js";import"./useFavorites-DpYCcbhi.js";const y=l.lazy(()=>I(()=>import("./ModalVideo-4yzDX7HC.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])));function T({episode:e,serie_backdrop:o}){var u,f;const{seriesId:i}=b(),[r,g]=l.useState(null),n=k(),[c,m]=l.useState(!1),d=l.useCallback(()=>m(!0),[]),j=l.useCallback(()=>m(!1),[]),_=l.useRef(null),{data:a,isLoading:w}=v(`images-${i}`,()=>x(N(i)),{enabled:!!i&&e.still_path==null,staleTime:1e3*60*30,cacheTime:1e3*60*30});l.useEffect(()=>{var t;(t=a==null?void 0:a.backdrops)!=null&&t.length&&r===null&&g(Math.floor(Math.random()*a.backdrops.length))},[a,r]);const{data:E}=v(`videos-${e.id}`,()=>x(R(i,e.season_number,e.episode_number)));if(w)return null;const h=e.still_path?e.still_path:(u=a==null?void 0:a.backdrops)!=null&&u.length&&r!==null?(f=a==null?void 0:a.backdrops[r])==null?void 0:f.file_path:o;return s.jsxs("div",{className:"flex flex-col containerEpisode",onClick:d,children:[c&&s.jsx(l.Suspense,{fallback:s.jsx(s.Fragment,{}),children:s.jsx("div",{ref:_,onClick:t=>{t.stopPropagation()},children:s.jsx(y,{videoKey:L(E),open:c,onClose:j})})}),s.jsxs("div",{className:"container-episode",children:[s.jsx("div",{className:"wrapper-img-episode",children:h&&s.jsx("img",{src:C+h||o,alt:e.name})}),s.jsxs("div",{className:"info-episode",children:[s.jsxs("h4",{children:[e.episode_number,".  ",e.name]}),s.jsxs("div",{className:"flex flex-row detailsDate",children:[new Date(e.air_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),n>990&&s.jsx("p",{children:p(e.runtime)})]}),n<=990&&s.jsx("p",{children:p(e.runtime)}),n>990&&e.overview&&s.jsx("p",{children:e.overview.length>=(n>600?300:150)?e.overview.slice(0,(n>600?300:150)+1)+"...":e.overview})]}),n>580&&s.jsx("div",{className:"containerPlay",children:s.jsx("i",{className:"fa-solid fa-play",onClick:d})})]}),n<=990&&e.overview&&s.jsx("div",{className:"overViewEpisodeC",children:s.jsx("p",{className:"overViewEpisode",children:e.overview.length>=(n>600?300:150)?e.overview.slice(0,(n>600?300:150)+1)+"...":e.overview})})]})}export{T as default};
