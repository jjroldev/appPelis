import{R as y,u as w,a as U,r as i,j as e,h as S,f as F,b as C,c as b,S as E}from"./index-CKgC-fQJ.js";import{u as g}from"./useQuery-V_xR0IjW.js";import{r as N,C as T,B as A}from"./ResponsiveCarrousel-KBCrjkOJ.js";import{C as D}from"./CardMovie-BB8JaJMa.js";import{f as h}from"./fetchData-DCFA1qTy.js";import{g as H}from"./endPoints-D6Ym8Q8U.js";import"./NavBar-B3SP4niS.js";const t=y.memo(({URL:d,title:s,isLarge:o=!1})=>{const{currentPerfil:a,currentUser:l}=w(),f=U(),{data:m,isLoading:M}=g(["movies",d],()=>h(d),{staleTime:1e3*60*5,refetchOnWindowFocus:!1}),[u,c]=i.useState(window.innerWidth),[r,x]=i.useState(o);i.useEffect(()=>{const n=()=>c(window.innerWidth);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),i.useEffect(()=>{x(u>1e3?o:!1)},[u]);const L=i.useMemo(()=>{var n;return((n=m==null?void 0:m.results)==null?void 0:n.filter(v=>v.backdrop_path))||[]},[m]),j=async n=>{await S(l==null?void 0:l.id,a==null?void 0:a.id,n),await f.invalidateQueries(`favorites-${l==null?void 0:l.id}-${a==null?void 0:a.id}`,{refetchInactive:!1})},p=i.useMemo(()=>N(r),[r]),R=i.useCallback(n=>n.map(v=>e.jsx(D,{movie:v,isLarge:r,onAddFavorite:j},v.id)),[r]);return e.jsx("div",{className:"carousel",children:L.length>0&&!M&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"tituloCarousel",children:s}),e.jsx(T,{swipeable:!0,draggable:!0,showDots:!1,responsive:p,minimumTouchDrag:50,ssr:!1,infinite:!0,autoPlay:!1,partialVisible:!0,className:`carousel-react ${u<600?"carousel-cell":""}`,children:R(L)})]})})});function $(){const{language:d}=F(),s=i.useMemo(()=>H(d),[d]),{data:o,isLoading:a}=g(["moviesHome",d],()=>h(s.actionMovies),{staleTime:1e3*60*5}),{setSearchTerm:l}=C(),{setOpenMenu:f}=b(),[m,M]=i.useState(null),u=i.useMemo(()=>{var c;return((c=o==null?void 0:o.results)==null?void 0:c.filter(r=>r.backdrop_path))||[]},[o==null?void 0:o.results]);return i.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),f(!1),l("")},[]),i.useEffect(()=>{if(!a&&u.length>0){const c=sessionStorage.getItem("featuredMovie"),r=c?JSON.parse(c):u[Math.floor(Math.random()*u.length)];M(r),sessionStorage.setItem("featuredMovie",JSON.stringify(r))}},[u,a]),a?e.jsx(E,{}):e.jsxs("div",{className:"contenedorHome",children:[e.jsx(A,{movie:m,logoBuscar:!0}),e.jsxs("div",{className:"contenedorPeliculas",children:[e.jsx(t,{URL:s.popularMovies,title:"Popular Movies"}),e.jsx(t,{URL:s.topRatedMovies,title:"Best Voted",isLarge:!0}),e.jsx(t,{URL:s.actionMovies,title:"Action"}),e.jsx(t,{URL:s.adventureMovies,title:"Adventure",isLarge:!0}),e.jsx(t,{URL:s.animationMovies,title:"Animation",isLarge:!0}),e.jsx(t,{URL:s.comedyMovies,title:"Comedy",isLarge:!0}),e.jsx(t,{URL:s.crimeMovies,title:"Crime",isLarge:!0}),e.jsx(t,{URL:s.documentaryMovies,title:"Documentary",isLarge:!0}),e.jsx(t,{URL:s.dramaMovies,title:"Drama",isLarge:!0}),e.jsx(t,{URL:s.familyMovies,title:"Family",isLarge:!0}),e.jsx(t,{URL:s.fantasyMovies,title:"Fantasy",isLarge:!0}),e.jsx(t,{URL:s.historyMovies,title:"History"}),e.jsx(t,{URL:s.horrorMovies,title:"Horror"}),e.jsx(t,{URL:s.musicMovies,title:"Music",isLarge:!0}),e.jsx(t,{URL:s.mysteryMovies,title:"Mystery",isLarge:!0}),e.jsx(t,{URL:s.romanceMovies,title:"Romance",isLarge:!0}),e.jsx(t,{URL:s.scienceFictionMovies,title:"Science Fiction",isLarge:!0}),e.jsx(t,{URL:s.thrillerMovies,title:"Thriller",isLarge:!0})]})]})}export{$ as default};
