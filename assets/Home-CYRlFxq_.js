import{R as y,u as w,r as i,a as U,j as e,h as S,f as F,b as C,c as E,S as b}from"./index-Dbv0Nxsg.js";import{r as N,C as A,B as T}from"./ResponsiveCarrousel-Cllg_69A.js";import{g as D}from"./endPoints-D6Ym8Q8U.js";import{f as h}from"./fetchData-DCFA1qTy.js";import{u as x}from"./useQuery-Bh4W8dDL.js";import{C as H}from"./CardMovie-VYIa1dtr.js";import"./NavBar-Cen6X4bT.js";const t=y.memo(({URL:c,title:s,isLarge:o=!1})=>{const{currentPerfil:r,currentUser:l}=w(),{data:u,isLoading:L}=x(["movies",c],()=>h(c),{staleTime:1e3*60*5,refetchOnWindowFocus:!1}),[d,m]=i.useState(window.innerWidth),[a,v]=i.useState(o),f=U(),g=i.useMemo(()=>{var n;return((n=u==null?void 0:u.results)==null?void 0:n.filter(M=>M.backdrop_path))||[]},[u]),j=async n=>{await S(l==null?void 0:l.id,r==null?void 0:r.id,n),await f.invalidateQueries(`favorites-${l==null?void 0:l.id}-${r==null?void 0:r.id}`,{refetchInactive:!1})},p=i.useMemo(()=>N(a),[a]),R=i.useCallback(n=>n.map(M=>e.jsx(H,{movie:M,isLarge:a,onAddFavorite:j},M.id)),[a]);return i.useEffect(()=>{const n=()=>m(window.innerWidth);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),i.useEffect(()=>{d<=1e3?v(!1):v(o)},[d]),e.jsx("div",{className:"carousel",children:g.length>0&&!L&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"tituloCarousel",children:s}),e.jsx(A,{swipeable:!0,draggable:!0,showDots:!1,responsive:p,minimumTouchDrag:50,ssr:!0,infinite:!0,autoPlay:!1,centerMode:!(d<600),className:`carousel-react ${d<600?"carousel-cell":""}`,children:R(g)})]})})});function $(){const{language:c}=F(),s=i.useMemo(()=>D(c),[c]),{data:o,isLoading:r}=x(["moviesHome",c],()=>h(s.actionMovies),{staleTime:1e3*60*5}),[l,u]=i.useState(null),{setSearchTerm:L}=C(),{setOpenMenu:d}=E(),m=i.useMemo(()=>{var a;return(a=o==null?void 0:o.results)==null?void 0:a.filter(v=>v.backdrop_path)},[o==null?void 0:o.results]);return i.useEffect(()=>{if(!r&&m.length>0){const a=sessionStorage.getItem("featuredMovie");if(a)u(JSON.parse(a));else{const v=Math.floor(Math.random()*m.length),f=m[v];u(f),sessionStorage.setItem("featuredMovie",JSON.stringify(f))}}},[m]),i.useEffect(()=>{window.scroll({top:0,left:0,behavior:"instant"}),d(!1),L("")},[]),r?e.jsx(b,{}):e.jsxs("div",{className:"contenedorHome",children:[e.jsx(T,{movie:l,logoBuscar:!0}),e.jsxs("div",{className:"contenedorPeliculas",children:[e.jsx(t,{URL:s.popularMovies,title:"Popular Movies"}),e.jsx(t,{URL:s.topRatedMovies,title:"Best Voted",isLarge:!0}),e.jsx(t,{URL:s.actionMovies,title:"Action"}),e.jsx(t,{URL:s.adventureMovies,title:"Adventure",isLarge:!0}),e.jsx(t,{URL:s.animationMovies,title:"Animation",isLarge:!0}),e.jsx(t,{URL:s.comedyMovies,title:"Comedy",isLarge:!0}),e.jsx(t,{URL:s.crimeMovies,title:"Crime",isLarge:!0}),e.jsx(t,{URL:s.documentaryMovies,title:"Documentary",isLarge:!0}),e.jsx(t,{URL:s.dramaMovies,title:"Drama",isLarge:!0}),e.jsx(t,{URL:s.familyMovies,title:"Family",isLarge:!0}),e.jsx(t,{URL:s.fantasyMovies,title:"Fantasy",isLarge:!0}),e.jsx(t,{URL:s.historyMovies,title:"History"}),e.jsx(t,{URL:s.horrorMovies,title:"Horror"}),e.jsx(t,{URL:s.musicMovies,title:"Music",isLarge:!0}),e.jsx(t,{URL:s.mysteryMovies,title:"Mystery",isLarge:!0}),e.jsx(t,{URL:s.romanceMovies,title:"Romance",isLarge:!0}),e.jsx(t,{URL:s.scienceFictionMovies,title:"Science Fiction",isLarge:!0}),e.jsx(t,{URL:s.thrillerMovies,title:"Thriller",isLarge:!0})]})]})}export{$ as default};
