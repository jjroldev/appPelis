import{b as h,c as x,d as g,r as n,j as e}from"./index-DaSmVpyY.js";import{a as j,A as v}from"./endPoints-f2vaGF2r.js";import{C as N}from"./CardMovie-HHbqLFio.js";import{N as c}from"./NavBar-D1knXIDU.js";import{u as E}from"./useQuery-CHWo9Okz.js";import{f as B}from"./fetchData-DCFA1qTy.js";function y(){const{searchTerm:s}=h(),i=x(),{language:u}=g();n.useEffect(()=>{window.scroll({top:0,left:0,behavior:"instant"})},[]),n.useEffect(()=>{s===""&&i("/home",{state:{fromBuscar:!0}})},[s]);const d=`${j}/search/movie?api_key=${v}&language=${u}&query=${s}`,{data:r,isLoading:l}=E([s,URL],()=>B(d),{refetchOnWindowFocus:!1}),o=n.useMemo(()=>{var a;return(a=r==null?void 0:r.results)==null?void 0:a.filter(t=>t.backdrop_path&&t.poster_path)},[r==null?void 0:r.results]);if(l)return e.jsxs(e.Fragment,{children:[e.jsx(c,{logoBuscar:!0,menu:!0,perfil:!0,condicionExpanded:!0}),e.jsx("div",{className:"cargando",children:e.jsx("div",{className:"spinner"})})]});const f=a=>a.map((t,p)=>e.jsx(N,{movie:t},p)),m=()=>{if(o.length>0)return e.jsx("div",{className:"contenedorPeliculasBuscar",children:f(o)});if(s&&r.length==0)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"contenedorPeliculasNoE",children:e.jsxs("p",{children:["La busqueda de ",s," no arrroj√≥ coincidencias."]})})})};return e.jsxs("div",{className:"contenedor",children:[e.jsx(c,{perfil:!0,menu:!0,logoBuscar:!0,condicionExpanded:!0}),e.jsx("div",{className:"contenedorBuscar",children:m()})]})}export{y as default};
