import{k as s}from"./index-DaSmVpyY.js";import{B as a}from"./endPoints-f2vaGF2r.js";const d=async()=>{try{const e=await fetch(`${a}/users`,{method:"GET"}),o=await e.json();return e.ok||console.error("error al obtener los usuarios"),o}catch(e){console.log(e)}},c=(e,o)=>e==null?void 0:e.some(r=>r.email===o),p=async(e,o,r,t,l)=>{try{if(c(o,e.email))return console.log("El usuario ya existe."),r("/"),!1;{const n=await fetch(`${a}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)return console.error("Error al enviar usuario"),!1;const i=await n.json();return t(i),l(i),r("/manageProfiles"),!0}}catch(n){return console.error("Error en guardarUsuario:",n),!1}},h=async e=>{try{return await(await fetch(`${a}/users/${e}/profiles`,{method:"GET"})).json()}catch{}},y=async(e,o)=>{try{const r=await fetch(`${a}/users/${e}/profiles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o})});if(!r.ok)throw new Error("Error al crear el perfil");return await r.json()}catch(r){return console.error("Error en createProfile:",r),null}},E=async(e,o)=>{try{if(!(await fetch(`${a}/users/${e}/profiles/${o}`,{method:"DELETE"})).ok)throw new Error("Error al eliminar el perfil");return!0}catch(r){return console.error("Error en deleteProfile:",r),!1}},w=async(e,o,r)=>{try{if((await fetch(`${a}/users/${e}/profiles/${o}/add_favorite`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movie:r})})).ok)s.success(`${r==null?void 0:r.title} agregada a mi lista`);else return s.error(`Error al intentar agregar ${r==null?void 0:r.title}`),!1;return!0}catch(t){return console.error("Error en addFavoriteToProfile:",t),!1}},$=async(e,o,r)=>{try{if(!(await fetch(`${a}/users/${e}/profiles/${o}/remove_favorite`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({movie:r})})).ok)throw s.error(`Error al eliminar ${r==null?void 0:r.title} de favoritos`),new Error("Error al eliminar la película de favoritos");return s.success(`Película ${r==null?void 0:r.title} eliminada de favoritos`),!0}catch{return s.error("Error en removeFavoriteFromProfile"),!1}},g=(e,o,r)=>r.find(t=>t.email===e&&t.password===o)||null;export{w as a,d as b,y as c,E as d,p as e,h as g,$ as r,g as v};
