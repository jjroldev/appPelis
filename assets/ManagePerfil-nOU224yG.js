import{u as x,d as P,b as u,r as h,e as p,c as j,i as g,j as s,S as N,k as v,l as o}from"./index-BnPToACK.js";function E(){const{currentUser:e,setCurrentPerfil:r}=x(),a=P(),{setOpenMenu:c}=u();h.useEffect(()=>{c(!1)},[]);const d=p(),{data:l=[],isLoading:t}=j(`perfiles-${e==null?void 0:e.id}`,()=>g(e==null?void 0:e.id),{enabled:!!(e!=null&&e.id)}),f=async(i,n)=>{n.stopPropagation(),await v(e==null?void 0:e.id,i)?(o.success("Perfil eliminado exitosamente"),d.invalidateQueries(`perfiles-${e==null?void 0:e.id}`)):o.error("Error al eliminar el perfil")},m=i=>{r(i),a("/home")};return t?s.jsx(N,{}):(!t&&l.length===0&&a("/createProfile"),s.jsx("div",{className:"containerPerfiles",children:l.length!=0&&s.jsxs("div",{className:"PerfilesExistentesContainer",children:[s.jsx("h2",{className:"tituloPerfiles",children:"Select Perfil"}),s.jsx("div",{className:"perfiles",children:l.map(i=>s.jsxs("div",{className:"contenedorPerfil",children:[s.jsx("img",{className:"perfil-img",src:`/appPelis/${i.imagen}`,alt:"",onClick:()=>m(i)}),s.jsx("h4",{className:"nombrePerfil",children:i.name}),s.jsx("i",{className:"fa-solid fa-x iconoX",onClick:n=>f(i.id,n)})]},i.id))}),s.jsx("div",{className:"container-button-crearProfile",children:s.jsx("button",{className:"buttonPerfiles",onClick:()=>a("/createProfile"),children:"Crear perfil"})})]})}))}export{E as default};
