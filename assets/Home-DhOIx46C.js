import{R as h,r as i,j as e,e as p,a as j,b as R,S as U}from"./index-B4y0dzn2.js";import{u as L}from"./useQuery-CqqENF2_.js";import{r as y,C as S,B as F}from"./ResponsiveCarrousel-DCbl-mtt.js";import{C as w}from"./CardMovie-CwwG24zU.js";import{f as g}from"./fetchData-DCFA1qTy.js";import{u as b}from"./NavBar-BX_xtu2N.js";import{u as C}from"./useFavorites-BxDf3qFT.js";import{g as N}from"./endPoints-D6Ym8Q8U.js";const t=h.memo(({URL:a,title:s,isLarge:r=!1})=>{const{handleAddFavorite:m}=C(),{data:n,isLoading:f}=L(["movies",a],()=>g(a),{staleTime:1e3*60*5,refetchOnWindowFocus:!1}),d=b(),[l,u]=i.useState(r);i.useEffect(()=>{u(d>1e3?r:!1)},[d]);const o=i.useMemo(()=>{var v;return((v=n==null?void 0:n.results)==null?void 0:v.filter(M=>M.backdrop_path))||[]},[n]),c=i.useMemo(()=>y(l),[l]),x=i.useCallback(v=>v.map(M=>e.jsx(w,{movie:M,isLarge:l,onAddFavorite:m},M.id)),[l]);return e.jsx("div",{className:"carousel",children:o.length>0&&!f&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"tituloCarousel",children:s}),e.jsx(S,{swipeable:!0,draggable:!0,showDots:!1,responsive:c,minimumTouchDrag:50,ssr:!1,infinite:!0,autoPlay:!1,partialVisible:!0,className:`carousel-react ${d<600?"carousel-cell":""}`,children:x(o)})]})})});function I(){const{language:a}=p(),s=i.useMemo(()=>N(a),[a]),{data:r,isLoading:m}=L(["moviesHome",a],()=>g(s.actionMovies),{staleTime:1e3*60*5}),{setSearchTerm:n}=j(),{setOpenMenu:f}=R(),[d,l]=i.useState(null),u=i.useMemo(()=>{var o;return((o=r==null?void 0:r.results)==null?void 0:o.filter(c=>c.backdrop_path))||[]},[r==null?void 0:r.results]);return i.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),f(!1),n("")},[]),i.useEffect(()=>{if(!m&&u.length>0){const o=sessionStorage.getItem("featuredMovie"),c=o?JSON.parse(o):u[Math.floor(Math.random()*u.length)];l(c),sessionStorage.setItem("featuredMovie",JSON.stringify(c))}},[u,m]),m?e.jsx(U,{}):e.jsxs("div",{className:"contenedorHome",children:[e.jsx(F,{movie:d,logoBuscar:!0}),e.jsxs("div",{className:"contenedorPeliculas",children:[e.jsx(t,{URL:s.popularMovies,title:"Popular Movies"}),e.jsx(t,{URL:s.topRatedMovies,title:"Best Voted",isLarge:!0}),e.jsx(t,{URL:s.actionMovies,title:"Action"}),e.jsx(t,{URL:s.adventureMovies,title:"Adventure",isLarge:!0}),e.jsx(t,{URL:s.animationMovies,title:"Animation",isLarge:!0}),e.jsx(t,{URL:s.comedyMovies,title:"Comedy",isLarge:!0}),e.jsx(t,{URL:s.crimeMovies,title:"Crime",isLarge:!0}),e.jsx(t,{URL:s.documentaryMovies,title:"Documentary",isLarge:!0}),e.jsx(t,{URL:s.dramaMovies,title:"Drama",isLarge:!0}),e.jsx(t,{URL:s.familyMovies,title:"Family",isLarge:!0}),e.jsx(t,{URL:s.fantasyMovies,title:"Fantasy",isLarge:!0}),e.jsx(t,{URL:s.historyMovies,title:"History"}),e.jsx(t,{URL:s.horrorMovies,title:"Horror"}),e.jsx(t,{URL:s.musicMovies,title:"Music",isLarge:!0}),e.jsx(t,{URL:s.mysteryMovies,title:"Mystery",isLarge:!0}),e.jsx(t,{URL:s.romanceMovies,title:"Romance",isLarge:!0}),e.jsx(t,{URL:s.scienceFictionMovies,title:"Science Fiction",isLarge:!0}),e.jsx(t,{URL:s.thrillerMovies,title:"Thriller",isLarge:!0})]})]})}export{I as default};
