import{r as s,u as d}from"./index-DbBlThBm.js";import{o as S}from"./Banner-CUnO-L8k.js";const w="MoviesDB",o="movies",B=async()=>S(w,1,{upgrade(e){e.objectStoreNames.contains(o)||e.createObjectStore(o,{keyPath:"key"})}}),j=(e,a)=>{const[g,r]=s.useState([]),[m,c]=s.useState(!0),[h,p]=s.useState(null),{language:n}=d(),v=async()=>{try{c(!0);const t=await B(),i=`${e}_${n}`,u=await t.get(o,i);if(u)r(u.data);else{const M=Array.from({length:a},(l,y)=>fetch(`${e}&page=${y+1}`).then(E=>E.json())),f=(await Promise.all(M)).flatMap(l=>l.results);await t.put(o,{key:i,data:f}),r(f)}}catch(t){console.error("Error fetching movies:",t),p(t.message)}finally{c(!1)}};return s.useEffect(()=>{v()},[e,a,n]),{movies:g,isLoading:m,error:h}};export{j as u};
