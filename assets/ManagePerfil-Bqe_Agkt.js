import{u as P,r as d,d as j,a as g,h as N,j as s,S as C,k as a,i as v,l as b}from"./index-BXawpmsk.js";import{u as k}from"./useQuery-dXbOBqBi.js";function Q(){const{currentUser:e,setCurrentPerfil:f}=P(),[m,l]=d.useState(!1),[r,t]=d.useState(""),u=j(),o=g(),{data:n=[],isLoading:c}=k(`perfiles-${e==null?void 0:e.id}`,()=>N(e==null?void 0:e.id),{staleTime:0,enabled:!!(e!=null&&e.id)}),x=async()=>{if(!r){a.error("Ingresa un nombre");return}if(n.length>=5){a.error("Solo puede tener como mÃ¡ximo 5 perfiles");return}await v(e==null?void 0:e.id,r)&&(a.success("Perfil creado exitosamente"),t(""),l(!1),o.invalidateQueries(`perfiles-${e==null?void 0:e.id}`))},p=async i=>{await b(e==null?void 0:e.id,i)?(a.success("Perfil eliminado exitosamente"),o.invalidateQueries(`perfiles-${e==null?void 0:e.id}`)):a.error("Error al eliminar el perfil")},h=i=>{f(i),u("/home")};return c?s.jsx(C,{}):s.jsx("div",{className:"containerPerfiles",children:m?s.jsxs("div",{className:"creacionPerfil",children:[s.jsx("img",{src:"/appPelis/avatar3.png",alt:""}),s.jsx("input",{type:"text",placeholder:"Nombre del perfil",required:!0,onChange:i=>t(i.target.value)}),s.jsx("button",{className:"buttonPerfilesCrear",onClick:x,children:"Crear"}),s.jsx("button",{className:"buttonListo",onClick:()=>l(!1),children:"Listo"})]}):!c&&(n.length===0?s.jsxs("div",{className:"flex flex-col contenedorManage",children:[s.jsx("h2",{className:"tituloPerfiles",children:"Crear un perfil"}),s.jsx("button",{className:"buttonPerfiles",onClick:()=>l(!0),children:"Crea un perfil"})]}):s.jsxs("div",{className:"PerfilesExistentesContainer",children:[s.jsx("h2",{className:"tituloPerfiles",children:"Selecciona un perfil"}),s.jsx("div",{className:"flex flex-row gap-14",children:n.map(i=>s.jsxs("div",{className:"contenedorPerfil",children:[s.jsx("img",{className:"perfil-img",src:"/appPelis/avatar3.png",alt:"",onClick:()=>h(i)}),s.jsx("h4",{children:i.name}),s.jsx("i",{className:"fa-solid fa-x iconoX",onClick:()=>p(i.id)})]},i.id))}),s.jsx("button",{className:"buttonPerfiles",onClick:()=>l(!0),children:"Crear perfil"})]}))})}export{Q as default};
