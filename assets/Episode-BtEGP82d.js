import{o as N,r as h,d as E,c as v,j as s,m as _}from"./index-cHxvsVQy.js";import{u as I,r as b,i as y,s as L}from"./BarMenu-DHwZNA8j.js";import{f as u}from"./fetchData-DCFA1qTy.js";import{f,a as x}from"./Banner-CWcUfTrD.js";import"./useFavorites-DpOK44Tb.js";function V({episode:e,serie_backdrop:l}){var c,m;const{seriesId:r}=N(),[n,g]=h.useState(null),i=I(),p=E(),{data:a,isLoading:j}=v(`images-${r}`,()=>u(y(r)),{enabled:!!r&&e.still_path==null,staleTime:1e3*60*30,cacheTime:1e3*60*30});h.useEffect(()=>{var d;(d=a==null?void 0:a.backdrops)!=null&&d.length&&n===null&&g(Math.floor(Math.random()*a.backdrops.length))},[a,n]);const{data:t}=v(`videos-${e.id}`,()=>u(L(r,e.season_number,e.episode_number)));if(j)return null;const o=e.still_path?e.still_path:(c=a==null?void 0:a.backdrops)!=null&&c.length&&n!==null?(m=a==null?void 0:a.backdrops[n])==null?void 0:m.file_path:l,w=()=>{x(t)?p(`/watch/${x(t)}`):_.error("No existe un trailer para este episodio")};return s.jsxs("div",{className:"flex flex-col containerEpisode",onClick:w,children:[s.jsxs("div",{className:"container-episode",children:[s.jsxs("div",{className:"wrapper-img-episode relative",children:[o&&s.jsx("img",{src:b+o||l,alt:e.name}),i<=580&&s.jsx("i",{className:"fa-solid fa-play play-icon absolute"})]}),s.jsxs("div",{className:"info-episode",children:[s.jsxs("h4",{children:[e.episode_number,".  ",e.name]}),s.jsxs("div",{className:"flex flex-row detailsDate",children:[new Date(e.air_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),i>990&&s.jsx("p",{children:f(e.runtime)})]}),i<=990&&s.jsx("p",{children:f(e.runtime)}),i>990&&e.overview&&s.jsx("p",{children:e.overview.length>=(i>600?300:150)?e.overview.slice(0,(i>600?300:150)+1)+"...":e.overview})]}),i>580&&s.jsx("div",{className:"containerPlay",children:s.jsx("i",{className:"fa-solid fa-play"})})]}),i<=990&&e.overview&&s.jsx("div",{className:"overViewEpisodeC",children:s.jsx("p",{className:"overViewEpisode",children:e.overview.length>=(i>600?300:150)?e.overview.slice(0,(i>600?300:150)+1)+"...":e.overview})})]})}export{V as default};
