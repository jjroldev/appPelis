import{$ as g,u as h,a as j,r as n,j as e,f as p,e as R,b as y,S as U}from"./index-DpTpVCke.js";import{r as S,C as F,B as C}from"./ResponsiveCarrousel-BHunq_ZQ.js";import{f as x,g as w}from"./fetchData-AUSfi4jN.js";import{u as L}from"./useQuery-Co3oNWgm.js";import{C as b}from"./CardMovie-ClaZgZZL.js";import"./NavBar-BLWZuKqg.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./ModalVideo-Df9kV0Uv.js";const t=g.memo(({URL:c,title:s,isLarge:i=!1})=>{const{currentPerfil:a,currentUser:o}=h(),{data:l}=L(["movies",c],()=>x(c),{staleTime:1e3*60*5,refetchOnWindowFocus:!1}),f=j(),u=n.useMemo(()=>{var d;return((d=l==null?void 0:l.results)==null?void 0:d.filter(M=>M.backdrop_path))||[]},[l]),r=async d=>{await p(o==null?void 0:o.id,a==null?void 0:a.id,d),await f.invalidateQueries(`favorites-${o==null?void 0:o.id}-${a==null?void 0:a.id}`,{refetchInactive:!1})},m=n.useMemo(()=>S(i),[i]),v=n.useCallback(d=>d.map(M=>e.jsx(b,{movie:M,isLarge:i,onAddFavorite:r},M.id)),[i,r]);return e.jsx("div",{className:"carousel",children:u.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"tituloCarousel",children:s}),e.jsx(F,{swipeable:!1,draggable:!1,showDots:!1,responsive:m,ssr:!0,infinite:!0,autoPlay:!1,className:"carousel-react",children:v(u)})]})})});function I(){const{language:c}=R(),s=n.useMemo(()=>w(c),[c]),{data:i,isLoading:a}=L(["moviesHome",c],()=>x(s.actionMovies),{staleTime:1e3*60*5}),[o,l]=n.useState(null),{setSearchTerm:f}=y(),u=n.useMemo(()=>{var r;return(r=i==null?void 0:i.results)==null?void 0:r.filter(m=>m.backdrop_path)},[i==null?void 0:i.results]);return n.useEffect(()=>{if(!a&&u.length>0){const r=sessionStorage.getItem("featuredMovie");if(r)l(JSON.parse(r));else{const m=Math.floor(Math.random()*u.length),v=u[m];l(v),sessionStorage.setItem("featuredMovie",JSON.stringify(v))}}},[u]),n.useEffect(()=>{window.scroll({top:0,left:0,behavior:"instant"}),f("")},[]),a?e.jsx(U,{}):e.jsxs("div",{className:"contenedorHome",children:[e.jsx(C,{movie:o,logoBuscar:!0}),e.jsxs("div",{className:"contenedorPeliculas",children:[e.jsx(t,{URL:s.popularMovies,title:"Popular Movies"}),e.jsx(t,{URL:s.topRatedMovies,title:"Best Voted",isLarge:!0}),e.jsx(t,{URL:s.actionMovies,title:"Action"}),e.jsx(t,{URL:s.adventureMovies,title:"Adventure",isLarge:!0}),e.jsx(t,{URL:s.animationMovies,title:"Animation",isLarge:!0}),e.jsx(t,{URL:s.comedyMovies,title:"Comedy",isLarge:!0}),e.jsx(t,{URL:s.crimeMovies,title:"Crime",isLarge:!0}),e.jsx(t,{URL:s.documentaryMovies,title:"Documentary",isLarge:!0}),e.jsx(t,{URL:s.dramaMovies,title:"Drama",isLarge:!0}),e.jsx(t,{URL:s.familyMovies,title:"Family",isLarge:!0}),e.jsx(t,{URL:s.fantasyMovies,title:"Fantasy",isLarge:!0}),e.jsx(t,{URL:s.historyMovies,title:"History"}),e.jsx(t,{URL:s.horrorMovies,title:"Horror"}),e.jsx(t,{URL:s.musicMovies,title:"Music",isLarge:!0}),e.jsx(t,{URL:s.mysteryMovies,title:"Mystery",isLarge:!0}),e.jsx(t,{URL:s.romanceMovies,title:"Romance",isLarge:!0}),e.jsx(t,{URL:s.scienceFictionMovies,title:"Science Fiction",isLarge:!0}),e.jsx(t,{URL:s.thrillerMovies,title:"Thriller",isLarge:!0})]})]})}export{I as default};
