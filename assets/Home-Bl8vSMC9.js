import{R,u as y,a as U,r as o,j as e,h as S,f as w,b as F,c as C,S as b}from"./index-DroBe1vi.js";import{u as g}from"./useQuery-Drc2beFz.js";import{r as N,C as T,B as A}from"./ResponsiveCarrousel-CuNdSAHp.js";import{C as D}from"./CardMovie-y9iYowZ1.js";import{f as h}from"./fetchData-DCFA1qTy.js";import{u as E}from"./NavBar-C3uVi7yO.js";import{g as H}from"./endPoints-D6Ym8Q8U.js";const t=R.memo(({URL:u,title:s,isLarge:r=!1})=>{const{currentPerfil:i,currentUser:n}=y(),f=U(),{data:c,isLoading:M}=g(["movies",u],()=>h(u),{staleTime:1e3*60*5,refetchOnWindowFocus:!1}),l=E(),[a,d]=o.useState(r);o.useEffect(()=>{d(l>1e3?r:!1)},[l]);const L=o.useMemo(()=>{var m;return((m=c==null?void 0:c.results)==null?void 0:m.filter(v=>v.backdrop_path))||[]},[c]),x=async m=>{await S(n==null?void 0:n.id,i==null?void 0:i.id,m),await f.invalidateQueries(`favorites-${n==null?void 0:n.id}-${i==null?void 0:i.id}`,{refetchInactive:!1})},j=o.useMemo(()=>N(a),[a]),p=o.useCallback(m=>m.map(v=>e.jsx(D,{movie:v,isLarge:a,onAddFavorite:x},v.id)),[a]);return e.jsx("div",{className:"carousel",children:L.length>0&&!M&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"tituloCarousel",children:s}),e.jsx(T,{swipeable:!0,draggable:!0,showDots:!1,responsive:j,minimumTouchDrag:50,ssr:!1,infinite:!0,autoPlay:!1,partialVisible:!0,className:`carousel-react ${l<600?"carousel-cell":""}`,children:p(L)})]})})});function J(){const{language:u}=w(),s=o.useMemo(()=>H(u),[u]),{data:r,isLoading:i}=g(["moviesHome",u],()=>h(s.actionMovies),{staleTime:1e3*60*5}),{setSearchTerm:n}=F(),{setOpenMenu:f}=C(),[c,M]=o.useState(null),l=o.useMemo(()=>{var a;return((a=r==null?void 0:r.results)==null?void 0:a.filter(d=>d.backdrop_path))||[]},[r==null?void 0:r.results]);return o.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),f(!1),n("")},[]),o.useEffect(()=>{if(!i&&l.length>0){const a=sessionStorage.getItem("featuredMovie"),d=a?JSON.parse(a):l[Math.floor(Math.random()*l.length)];M(d),sessionStorage.setItem("featuredMovie",JSON.stringify(d))}},[l,i]),i?e.jsx(b,{}):e.jsxs("div",{className:"contenedorHome",children:[e.jsx(A,{movie:c,logoBuscar:!0}),e.jsxs("div",{className:"contenedorPeliculas",children:[e.jsx(t,{URL:s.popularMovies,title:"Popular Movies"}),e.jsx(t,{URL:s.topRatedMovies,title:"Best Voted",isLarge:!0}),e.jsx(t,{URL:s.actionMovies,title:"Action"}),e.jsx(t,{URL:s.adventureMovies,title:"Adventure",isLarge:!0}),e.jsx(t,{URL:s.animationMovies,title:"Animation",isLarge:!0}),e.jsx(t,{URL:s.comedyMovies,title:"Comedy",isLarge:!0}),e.jsx(t,{URL:s.crimeMovies,title:"Crime",isLarge:!0}),e.jsx(t,{URL:s.documentaryMovies,title:"Documentary",isLarge:!0}),e.jsx(t,{URL:s.dramaMovies,title:"Drama",isLarge:!0}),e.jsx(t,{URL:s.familyMovies,title:"Family",isLarge:!0}),e.jsx(t,{URL:s.fantasyMovies,title:"Fantasy",isLarge:!0}),e.jsx(t,{URL:s.historyMovies,title:"History"}),e.jsx(t,{URL:s.horrorMovies,title:"Horror"}),e.jsx(t,{URL:s.musicMovies,title:"Music",isLarge:!0}),e.jsx(t,{URL:s.mysteryMovies,title:"Mystery",isLarge:!0}),e.jsx(t,{URL:s.romanceMovies,title:"Romance",isLarge:!0}),e.jsx(t,{URL:s.scienceFictionMovies,title:"Science Fiction",isLarge:!0}),e.jsx(t,{URL:s.thrillerMovies,title:"Thriller",isLarge:!0})]})]})}export{J as default};
