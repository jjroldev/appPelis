import{r as t,u as y}from"./index-FBMCfUL2.js";import{g as w}from"./Banner-BT6tOlwS.js";const S="MoviesDB",a="movies",B=(o,r)=>{const[m,c]=t.useState([]),[l,n]=t.useState(!0),[h,v]=t.useState(null),{language:i}=y(),M=async()=>{try{n(!0);const e=await w(S,a),f=`${o}_${i}`,g=await e.get(a,f);if(g)c(g.data);else{const p=Array.from({length:r},(s,E)=>fetch(`${o}&page=${E+1}`).then(d=>d.json())),u=(await Promise.all(p)).flatMap(s=>(s==null?void 0:s.results)||[]);await e.put(a,{key:f,data:u}),c(u)}}catch(e){console.error("Error fetching movies:",e),v(e.message)}finally{n(!1)}};return t.useEffect(()=>{M()},[o,r,i]),{movies:m,isLoading:l,error:h}};export{B as u};
