import{r as c,j as e,u as w,B as g,A as x}from"./index-CqiBNT2y.js";import{C as y}from"./CardMovie-Cf1FmZaG.js";import{B as M}from"./Banner-C8Rj731E.js";import{u as b}from"./useFetchMovies-BlWOjdAj.js";function B({placeholder:t,onSubmit:a}){const[n,o]=c.useState(""),l=r=>{r.preventDefault(),a(n)};return e.jsx("form",{id:"busqueda",className:"flex items-center w-full",onSubmit:l,children:e.jsxs("div",{className:"relative w-full item",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-white",children:e.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{id:"busqueda-input",type:"text",className:"bg-black border border-gray-300 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t,value:n,onChange:r=>o(r.target.value)}),e.jsx("button",{type:"submit",style:{display:"none"}})]})})}function C(){const{language:t}=w(),[a,n]=c.useState(()=>{const s=sessionStorage.getItem(`nameMovie-${t}`);if(s){const{value:f,timestamp:v}=JSON.parse(s);if(new Date().getTime()-v<6e5)return f}return""}),[o,l]=c.useState(()=>{const s=sessionStorage.getItem(`featuredMovie-buscar-${t}`);return s?JSON.parse(s):null}),r=`${g}/discover/movie?api_key=${x}&language=${t}`,S=`${g}/search/movie?api_key=${x}&language=${t}&query=${a}`||r,{movies:p}=b(S,4),{movies:h}=b(r,6),u=p.filter(s=>s.backdrop_path),d=h.filter(s=>s.backdrop_path),i=u[0]||d[0],j=s=>{n(s),sessionStorage.setItem(`nameMovie-${t}`,JSON.stringify({value:s,timestamp:new Date().getTime()}))};c.useEffect(()=>{i&&(l(i),sessionStorage.setItem(`featuredMovie-buscar-${t}`,JSON.stringify(i)))},[i,t]);const m=s=>s.map((f,v)=>e.jsx(y,{movie:f},v)),k=e.jsx("div",{className:"w-full h-full min-h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"spinner"})}),N=()=>p.length>0?e.jsx("div",{className:"contenedorPeliculasBuscar",children:m(u)}):a&&u.length===0?e.jsx("div",{className:"contenedorPeliculasBuscar",children:m(d)}):h.length>0?e.jsx("div",{className:"contenedorPeliculasBuscar",children:m(d)}):k;return e.jsxs("div",{className:"contenedor",children:[o&&e.jsx(M,{movie:o,logoBuscar:!0,isShort:!0,isBuscar:!0}),e.jsx("div",{className:"contenedorBuscar",children:e.jsx(B,{placeholder:t==="es"?"Buscar pel√≠culas":"Search Movies",onSubmit:j})}),N()]})}export{C as default};
