import{r as s,u as y}from"./index-DbnsQP8H.js";import{g as w}from"./Banner-DffVBrv1.js";const S="MoviesDB",o="movies",B=(t,a)=>{const[g,r]=s.useState([]),[m,c]=s.useState(!0),[h,v]=s.useState(null),{language:n}=y(),M=async()=>{try{c(!0);const e=await w(S,o),i=`${t}_${n}`,u=await e.get(o,i);if(u)r(u.data);else{const p=Array.from({length:a},(f,E)=>fetch(`${t}&page=${E+1}`).then(d=>d.json())),l=(await Promise.all(p)).flatMap(f=>f.results);await e.put(o,{key:i,data:l}),r(l)}}catch(e){console.error("Error fetching movies:",e),v(e.message)}finally{c(!1)}};return s.useEffect(()=>{M()},[t,a,n]),{movies:g,isLoading:m,error:h}};export{B as u};
