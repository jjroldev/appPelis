import{o as b,r as h,d as E,f as _,c as u,j as a,m as I}from"./index-BirZxsvG.js";import{q as y,i as L,r as R}from"./CardItem-Df-giQpU.js";import{f as v}from"./fetchData-DCFA1qTy.js";import{u as k}from"./BarMenu-CcSkDaqW.js";import{f,g as x}from"./Banner-CEIqR63s.js";import"./useFavorites-CGurkLlA.js";import"./createSimplePaletteValueFilter-DkgYpcKS.js";function T({episode:e,serie_backdrop:l}){var c,m;const{seriesId:r}=b(),[n,g]=h.useState(null),i=k(),p=E(),{language:j}=_(),{data:s,isLoading:w}=u(`images-${r}`,()=>v(L(r)),{enabled:!!r&&e.still_path==null,staleTime:1e3*60*30,cacheTime:1e3*60*30});h.useEffect(()=>{var d;(d=s==null?void 0:s.backdrops)!=null&&d.length&&n===null&&g(Math.floor(Math.random()*s.backdrops.length))},[s,n]);const{data:t}=u(`videos-${e.id}`,()=>v(R(r,e.season_number,e.episode_number,j)));if(w)return null;const o=e.still_path?e.still_path:(c=s==null?void 0:s.backdrops)!=null&&c.length&&n!==null?(m=s==null?void 0:s.backdrops[n])==null?void 0:m.file_path:l,N=()=>{x(t)?p(`/watch/${x(t)}`):I.error("No existe un trailer para este episodio")};return a.jsxs("div",{className:"flex flex-col containerEpisode",onClick:N,children:[a.jsxs("div",{className:"container-episode",children:[a.jsxs("div",{className:"wrapper-img-episode relative",children:[o&&a.jsx("img",{src:y+o||l,alt:e.name}),i<=580&&a.jsx("div",{className:"containerPlayMobile absolute",children:a.jsx("i",{className:"fa-solid fa-play play-icon absolute"})})]}),a.jsxs("div",{className:"info-episode",children:[a.jsxs("h4",{children:[e.episode_number,".  ",e.name]}),a.jsxs("div",{className:"flex flex-row detailsDate",children:[new Date(e.air_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),i>990&&a.jsx("p",{children:f(e.runtime)})]}),i<=990&&a.jsx("p",{children:f(e.runtime)}),i>990&&e.overview&&a.jsx("p",{children:e.overview.length>=(i>600?300:150)?e.overview.slice(0,(i>600?300:150)+1)+"...":e.overview})]}),i>580&&a.jsx("div",{className:"containerPlay",children:a.jsx("i",{className:"fa-solid fa-play"})})]}),i<=990&&e.overview&&a.jsx("div",{className:"overViewEpisodeC",children:a.jsx("p",{className:"overViewEpisode",children:e.overview.length>=(i>600?300:150)?e.overview.slice(0,(i>600?300:150)+1)+"...":e.overview})})]})}export{T as default};
