import{j as l,R as y,d as C,r as d,e as E,b as N}from"./index-D3m6FbmD.js";import{f as R,n as k,o as L,m as b,p as M,q as O,l as P}from"./fetchData-BzDLlhoa.js";const V=(s,e="US")=>{var n,o,t,c,i;return s&&"content_ratings"in s?(n=s.content_ratings.results.filter(r=>r.iso_3166_1===e||r.iso_3166_1==="ES"||r.iso_3166_1==="AR"||r.iso_3166_1==="MX").filter(r=>(r==null?void 0:r.rating)!="")[0])==null?void 0:n.rating:s&&"release_dates"in s?(i=(c=(t=((o=s==null?void 0:s.release_dates)==null?void 0:o.results.filter(r=>r.iso_3166_1===e))[0])==null?void 0:t.release_dates)==null?void 0:c.filter(r=>r.certification!="")[0])==null?void 0:i.certification:null};function S(s,e,n){var c,i,u,f,r,p,g,h;if(!s&&!e)return null;const o=((i=(c=s==null?void 0:s.images)==null?void 0:c.logos)==null?void 0:i.find(a=>a.iso_639_1===n))||((f=(u=s==null?void 0:s.images)==null?void 0:u.logos)==null?void 0:f.find(a=>a.iso_639_1==="en"));if(o)return o.file_path;const t=((r=e==null?void 0:e.logos)==null?void 0:r.find(a=>a.iso_639_1===n))||((p=e==null?void 0:e.logos)==null?void 0:p.find(a=>a.iso_639_1==="en"));return t?t.file_path:(g=e==null?void 0:e.logos)!=null&&g.length?(h=e.logos[0])==null?void 0:h.file_path:null}function x(s){return s&&"title"in s}function D(s){var e,n;return(n=(e=s==null?void 0:s.results)==null?void 0:e.filter(o=>(o==null?void 0:o.key)!=null)[0])==null?void 0:n.key}function I(s){var n,o,t;const e=((o=(n=s==null?void 0:s.videos)==null?void 0:n.results)==null?void 0:o.find(c=>c.name==="Official Trailer"))||((t=s==null?void 0:s.videos)==null?void 0:t.results[0]);return e==null?void 0:e.key}const T=s=>{if(!s)return null;if(s<60)return`${s} min`;const e=Math.floor(s/60),n=s%60;return n>0?`${e} h ${n} min`:`${e} h`},q=(s,e,n)=>s.map(o=>l.jsx(U,{item:o,isLarge:n>1e3?e:!1},o.id)),U=y.memo(({item:s,isLarge:e,doDelete:n=!1,onRemoveFavorite:o})=>{const t="title"in s?s.title:s.name,c=C(),i=d.useRef(null),{language:u}=E(),[f,r]=d.useState(!1),[p,g]=d.useState(!1),{data:h}=N(`logo-item-${x(s)?"movie":"serie"}-${s.id}`,()=>x(s)?R(k(s.id)):R(L(s.id)),{enabled:!!s.id&&e,staleTime:1e3*60*5}),a=S(s,h,u),$=d.useCallback(()=>{const _="title"in s?"movie":"serie";c(`/${_}/${s.id}`)},[c,s.id]),j=_=>{_.stopPropagation(),o&&o(s)};return d.useEffect(()=>{const _=new IntersectionObserver(([v])=>{v.isIntersecting&&r(!0)},{threshold:.05});return i.current&&_.observe(i.current),()=>{i.current&&_.unobserve(i.current)}},[]),l.jsx("div",{ref:i,className:`contenedor-poster ${e?"large":""}`,onClick:$,children:l.jsxs("div",{className:`cardContainerImage ${e?"backdrop":"poster"}`,children:[f&&l.jsxs(l.Fragment,{children:[l.jsx(b.img,{src:e?`${M}${s.backdrop_path}`:`${O}${s.poster_path}`,alt:t,onLoad:()=>g(!0),initial:{opacity:0},animate:p?{opacity:1}:{},transition:{duration:.2,ease:"easeOut"},className:"main-image"}),a&&e===!0&&l.jsx(b.img,{src:P+a,alt:t,onLoad:()=>g(!0),initial:{opacity:0},animate:p?{opacity:1}:{},transition:{duration:.1,ease:"easeOut"},className:"logoCardItem"})]}),l.jsx("div",{className:"details-cardItem",children:n&&l.jsx("div",{className:"play-button",children:l.jsx("button",{className:"corazon",onClick:j,children:l.jsx("span",{className:"material-symbols-outlined",children:"delete"})})})})]})})});export{U as C,V as a,I as b,D as c,T as f,S as g,x as i,q as r};
