import{r as a,j as e,B as x,A as b}from"./index-B5smirrv.js";import{C as y}from"./CardMovie-QFiHEl1M.js";import{B}from"./Banner-C-aJuwE8.js";import{u as j}from"./useFetchMovies-BwAkXd3Y.js";function g({placeholder:s,onSubmit:i}){const[n,r]=a.useState(""),l=o=>{o.preventDefault(),i(n)};return e.jsx("form",{id:"busqueda",className:"flex items-center w-full",onSubmit:l,children:e.jsxs("div",{className:"relative w-full item",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-white",children:e.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{id:"busqueda-input",type:"text",className:"bg-black border border-gray-300 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:s,value:n,onChange:o=>r(o.target.value)}),e.jsx("button",{type:"submit",style:{display:"none"}})]})})}function D({language:s}){const[i,n]=a.useState(()=>{const t=localStorage.getItem(`nameMovie-${s}`);if(t){const{value:v,timestamp:f}=JSON.parse(t);if(new Date().getTime()-f<6e5)return v}return""}),[r,l]=a.useState(()=>{const t=localStorage.getItem(`featuredMovie-buscar-${s}`);return t?JSON.parse(t):null}),o=`${x}/discover/movie?api_key=${b}&language=${s}`,S=`${x}/search/movie?api_key=${b}&language=${s}&query=${i}`||o,{movies:u}=j(S,4,s),{movies:d}=j(o,6,s),m=a.useMemo(()=>u.filter(t=>t.backdrop_path),[u]),h=a.useMemo(()=>d.filter(t=>t.backdrop_path),[d]),c=m[0]||h[0],N=t=>{n(t),localStorage.setItem(`nameMovie-${s}`,JSON.stringify({value:t,timestamp:new Date().getTime()}))};a.useEffect(()=>{c&&(l(c),localStorage.setItem(`featuredMovie-buscar-${s}`,JSON.stringify(c)))},[c,s]);const p=t=>t.map((v,f)=>e.jsx(y,{movie:v,language:s},f)),M=e.jsx("div",{className:"textoNoC",children:e.jsx("p",{className:"text-white",children:s==="es"?"No hay coincidencias, pero estas son las películas más populares:":"There are no matches, but these are the most popular movies:"})}),k=e.jsx("div",{className:"w-full h-full min-h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"spinner"})}),w=()=>u.length>0?e.jsx("div",{className:"contenedorPeliculasBuscar",children:p(m)}):i&&m.length===0?e.jsxs(e.Fragment,{children:[r&&r.backdrop_path&&M,e.jsx("div",{className:"contenedorPeliculasBuscar",children:p(h)})]}):d.length>0?e.jsx("div",{className:"contenedorPeliculasBuscar",children:p(h)}):k;return e.jsxs("div",{className:"contenedor",children:[r&&e.jsx(B,{movie:r,language:s,logoBuscar:!0,isShort:!0,isBuscar:!0}),e.jsx("div",{className:"contenedorBuscar",children:e.jsx(g,{placeholder:s==="es"?"Buscar películas":"Search Movies",onSubmit:N})}),w()]})}export{D as default};
