const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MiLista-BWwhmkQW.js","assets/CardItem-Bz1U4lJK.js","assets/CardItem-_deXlwQO.css","assets/NavBar-Dq2ZHkbY.js","assets/useQuery-QVmoz6KT.js","assets/NavBar-CSh9wQb6.css","assets/useFavorites-CTFOSoKv.js","assets/MiLista-BDhiT5s4.css","assets/Buscar-C3F0CrpS.js","assets/fetchData-DCFA1qTy.js","assets/Buscar-Bmlpvr5O.css","assets/Home-Bep9En1h.js","assets/useRef-DQP2RuKO.js","assets/useRef-1-RYTLVe.css","assets/useFeaturedMovie-FNngH0JU.js","assets/useFeaturedMovie-BgqnpJJg.css","assets/ManagePerfil-kpjYiZkQ.js","assets/ManagePerfil-DjXbA5aw.css","assets/InfoWindow-DAbj0eCn.js","assets/InfoWindow-SIegBBYh.css","assets/MoviesWindow-DciQgTuA.js","assets/SeriesWindow-B7vxvM9m.js"])))=>i.map(i=>d[i]);
function OT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function A_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Uf={exports:{}},$a={},jf={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function LT(){if(jg)return Ae;jg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function I(b){return b===null||typeof b!="object"?null:(b=T&&b[T]||b["@@iterator"],typeof b=="function"?b:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function V(b,W,de){this.props=b,this.context=W,this.refs=B,this.updater=de||P}V.prototype.isReactComponent={},V.prototype.setState=function(b,W){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,W,"setState")},V.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function H(){}H.prototype=V.prototype;function X(b,W,de){this.props=b,this.context=W,this.refs=B,this.updater=de||P}var G=X.prototype=new H;G.constructor=X,L(G,V.prototype),G.isPureReactComponent=!0;var ue=Array.isArray,we=Object.prototype.hasOwnProperty,pe={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function S(b,W,de){var Ce,Re={},Oe=null,Fe=null;if(W!=null)for(Ce in W.ref!==void 0&&(Fe=W.ref),W.key!==void 0&&(Oe=""+W.key),W)we.call(W,Ce)&&!D.hasOwnProperty(Ce)&&(Re[Ce]=W[Ce]);var Ue=arguments.length-2;if(Ue===1)Re.children=de;else if(1<Ue){for(var We=Array(Ue),Et=0;Et<Ue;Et++)We[Et]=arguments[Et+2];Re.children=We}if(b&&b.defaultProps)for(Ce in Ue=b.defaultProps,Ue)Re[Ce]===void 0&&(Re[Ce]=Ue[Ce]);return{$$typeof:n,type:b,key:Oe,ref:Fe,props:Re,_owner:pe.current}}function R(b,W){return{$$typeof:n,type:b.type,key:W,ref:b.ref,props:b.props,_owner:b._owner}}function x(b){return typeof b=="object"&&b!==null&&b.$$typeof===n}function O(b){var W={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(de){return W[de]})}var F=/\/+/g;function A(b,W){return typeof b=="object"&&b!==null&&b.key!=null?O(""+b.key):W.toString(36)}function je(b,W,de,Ce,Re){var Oe=typeof b;(Oe==="undefined"||Oe==="boolean")&&(b=null);var Fe=!1;if(b===null)Fe=!0;else switch(Oe){case"string":case"number":Fe=!0;break;case"object":switch(b.$$typeof){case n:case e:Fe=!0}}if(Fe)return Fe=b,Re=Re(Fe),b=Ce===""?"."+A(Fe,0):Ce,ue(Re)?(de="",b!=null&&(de=b.replace(F,"$&/")+"/"),je(Re,W,de,"",function(Et){return Et})):Re!=null&&(x(Re)&&(Re=R(Re,de+(!Re.key||Fe&&Fe.key===Re.key?"":(""+Re.key).replace(F,"$&/")+"/")+b)),W.push(Re)),1;if(Fe=0,Ce=Ce===""?".":Ce+":",ue(b))for(var Ue=0;Ue<b.length;Ue++){Oe=b[Ue];var We=Ce+A(Oe,Ue);Fe+=je(Oe,W,de,We,Re)}else if(We=I(b),typeof We=="function")for(b=We.call(b),Ue=0;!(Oe=b.next()).done;)Oe=Oe.value,We=Ce+A(Oe,Ue++),Fe+=je(Oe,W,de,We,Re);else if(Oe==="object")throw W=String(b),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Fe}function tt(b,W,de){if(b==null)return b;var Ce=[],Re=0;return je(b,Ce,"","",function(Oe){return W.call(de,Oe,Re++)}),Ce}function qe(b){if(b._status===-1){var W=b._result;W=W(),W.then(function(de){(b._status===0||b._status===-1)&&(b._status=1,b._result=de)},function(de){(b._status===0||b._status===-1)&&(b._status=2,b._result=de)}),b._status===-1&&(b._status=0,b._result=W)}if(b._status===1)return b._result.default;throw b._result}var Ne={current:null},te={transition:null},he={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:te,ReactCurrentOwner:pe};function re(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:tt,forEach:function(b,W,de){tt(b,function(){W.apply(this,arguments)},de)},count:function(b){var W=0;return tt(b,function(){W++}),W},toArray:function(b){return tt(b,function(W){return W})||[]},only:function(b){if(!x(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Ae.Component=V,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=X,Ae.StrictMode=i,Ae.Suspense=p,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,Ae.act=re,Ae.cloneElement=function(b,W,de){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var Ce=L({},b.props),Re=b.key,Oe=b.ref,Fe=b._owner;if(W!=null){if(W.ref!==void 0&&(Oe=W.ref,Fe=pe.current),W.key!==void 0&&(Re=""+W.key),b.type&&b.type.defaultProps)var Ue=b.type.defaultProps;for(We in W)we.call(W,We)&&!D.hasOwnProperty(We)&&(Ce[We]=W[We]===void 0&&Ue!==void 0?Ue[We]:W[We])}var We=arguments.length-2;if(We===1)Ce.children=de;else if(1<We){Ue=Array(We);for(var Et=0;Et<We;Et++)Ue[Et]=arguments[Et+2];Ce.children=Ue}return{$$typeof:n,type:b.type,key:Re,ref:Oe,props:Ce,_owner:Fe}},Ae.createContext=function(b){return b={$$typeof:c,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:a,_context:b},b.Consumer=b},Ae.createElement=S,Ae.createFactory=function(b){var W=S.bind(null,b);return W.type=b,W},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(b){return{$$typeof:f,render:b}},Ae.isValidElement=x,Ae.lazy=function(b){return{$$typeof:v,_payload:{_status:-1,_result:b},_init:qe}},Ae.memo=function(b,W){return{$$typeof:y,type:b,compare:W===void 0?null:W}},Ae.startTransition=function(b){var W=te.transition;te.transition={};try{b()}finally{te.transition=W}},Ae.unstable_act=re,Ae.useCallback=function(b,W){return Ne.current.useCallback(b,W)},Ae.useContext=function(b){return Ne.current.useContext(b)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(b){return Ne.current.useDeferredValue(b)},Ae.useEffect=function(b,W){return Ne.current.useEffect(b,W)},Ae.useId=function(){return Ne.current.useId()},Ae.useImperativeHandle=function(b,W,de){return Ne.current.useImperativeHandle(b,W,de)},Ae.useInsertionEffect=function(b,W){return Ne.current.useInsertionEffect(b,W)},Ae.useLayoutEffect=function(b,W){return Ne.current.useLayoutEffect(b,W)},Ae.useMemo=function(b,W){return Ne.current.useMemo(b,W)},Ae.useReducer=function(b,W,de){return Ne.current.useReducer(b,W,de)},Ae.useRef=function(b){return Ne.current.useRef(b)},Ae.useState=function(b){return Ne.current.useState(b)},Ae.useSyncExternalStore=function(b,W,de){return Ne.current.useSyncExternalStore(b,W,de)},Ae.useTransition=function(){return Ne.current.useTransition()},Ae.version="18.3.1",Ae}var zg;function Vd(){return zg||(zg=1,jf.exports=LT()),jf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function bT(){if($g)return $a;$g=1;var n=Vd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,y){var v,T={},I=null,P=null;y!==void 0&&(I=""+y),p.key!==void 0&&(I=""+p.key),p.ref!==void 0&&(P=p.ref);for(v in p)i.call(p,v)&&!a.hasOwnProperty(v)&&(T[v]=p[v]);if(f&&f.defaultProps)for(v in p=f.defaultProps,p)T[v]===void 0&&(T[v]=p[v]);return{$$typeof:e,type:f,key:I,ref:P,props:T,_owner:o.current}}return $a.Fragment=t,$a.jsx=c,$a.jsxs=c,$a}var Bg;function VT(){return Bg||(Bg=1,Uf.exports=bT()),Uf.exports}var Te=VT(),$l={},zf={exports:{}},nn={},$f={exports:{}},Bf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg;function MT(){return qg||(qg=1,function(n){function e(te,he){var re=te.length;te.push(he);e:for(;0<re;){var b=re-1>>>1,W=te[b];if(0<o(W,he))te[b]=he,te[re]=W,re=b;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var he=te[0],re=te.pop();if(re!==he){te[0]=re;e:for(var b=0,W=te.length,de=W>>>1;b<de;){var Ce=2*(b+1)-1,Re=te[Ce],Oe=Ce+1,Fe=te[Oe];if(0>o(Re,re))Oe<W&&0>o(Fe,Re)?(te[b]=Fe,te[Oe]=re,b=Oe):(te[b]=Re,te[Ce]=re,b=Ce);else if(Oe<W&&0>o(Fe,re))te[b]=Fe,te[Oe]=re,b=Oe;else break e}}return he}function o(te,he){var re=te.sortIndex-he.sortIndex;return re!==0?re:te.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],y=[],v=1,T=null,I=3,P=!1,L=!1,B=!1,V=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(te){for(var he=t(y);he!==null;){if(he.callback===null)i(y);else if(he.startTime<=te)i(y),he.sortIndex=he.expirationTime,e(p,he);else break;he=t(y)}}function ue(te){if(B=!1,G(te),!L)if(t(p)!==null)L=!0,qe(we);else{var he=t(y);he!==null&&Ne(ue,he.startTime-te)}}function we(te,he){L=!1,B&&(B=!1,H(S),S=-1),P=!0;var re=I;try{for(G(he),T=t(p);T!==null&&(!(T.expirationTime>he)||te&&!O());){var b=T.callback;if(typeof b=="function"){T.callback=null,I=T.priorityLevel;var W=b(T.expirationTime<=he);he=n.unstable_now(),typeof W=="function"?T.callback=W:T===t(p)&&i(p),G(he)}else i(p);T=t(p)}if(T!==null)var de=!0;else{var Ce=t(y);Ce!==null&&Ne(ue,Ce.startTime-he),de=!1}return de}finally{T=null,I=re,P=!1}}var pe=!1,D=null,S=-1,R=5,x=-1;function O(){return!(n.unstable_now()-x<R)}function F(){if(D!==null){var te=n.unstable_now();x=te;var he=!0;try{he=D(!0,te)}finally{he?A():(pe=!1,D=null)}}else pe=!1}var A;if(typeof X=="function")A=function(){X(F)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,tt=je.port2;je.port1.onmessage=F,A=function(){tt.postMessage(null)}}else A=function(){V(F,0)};function qe(te){D=te,pe||(pe=!0,A())}function Ne(te,he){S=V(function(){te(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_continueExecution=function(){L||P||(L=!0,qe(we))},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(te){switch(I){case 1:case 2:case 3:var he=3;break;default:he=I}var re=I;I=he;try{return te()}finally{I=re}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var re=I;I=te;try{return he()}finally{I=re}},n.unstable_scheduleCallback=function(te,he,re){var b=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?b+re:b):re=b,te){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=re+W,te={id:v++,callback:he,priorityLevel:te,startTime:re,expirationTime:W,sortIndex:-1},re>b?(te.sortIndex=re,e(y,te),t(p)===null&&te===t(y)&&(B?(H(S),S=-1):B=!0,Ne(ue,re-b))):(te.sortIndex=W,e(p,te),L||P||(L=!0,qe(we))),te},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(te){var he=I;return function(){var re=I;I=he;try{return te.apply(this,arguments)}finally{I=re}}}}(Bf)),Bf}var Hg;function FT(){return Hg||(Hg=1,$f.exports=MT()),$f.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function UT(){if(Wg)return nn;Wg=1;var n=Vd(),e=FT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},T={};function I(r){return p.call(T,r)?!0:p.call(v,r)?!1:y.test(r)?T[r]=!0:(v[r]=!0,!1)}function P(r,s,u,h){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function L(r,s,u,h){if(s===null||typeof s>"u"||P(r,s,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(r,s,u,h,d,g,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=u,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=E}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){V[r]=new B(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];V[s]=new B(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){V[r]=new B(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){V[r]=new B(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){V[r]=new B(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){V[r]=new B(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){V[r]=new B(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){V[r]=new B(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){V[r]=new B(r,5,!1,r.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function X(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(H,X);V[s]=new B(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(H,X);V[s]=new B(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(H,X);V[s]=new B(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){V[r]=new B(r,1,!1,r.toLowerCase(),null,!1,!1)}),V.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){V[r]=new B(r,1,!1,r.toLowerCase(),null,!0,!0)});function G(r,s,u,h){var d=V.hasOwnProperty(s)?V[s]:null;(d!==null?d.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,u,d,h)&&(u=null),h||d===null?I(s)&&(u===null?r.removeAttribute(s):r.setAttribute(s,""+u)):d.mustUseProperty?r[d.propertyName]=u===null?d.type===3?!1:"":u:(s=d.attributeName,h=d.attributeNamespace,u===null?r.removeAttribute(s):(d=d.type,u=d===3||d===4&&u===!0?"":""+u,h?r.setAttributeNS(h,s,u):r.setAttribute(s,u))))}var ue=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,we=Symbol.for("react.element"),pe=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),tt=Symbol.for("react.memo"),qe=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),te=Symbol.iterator;function he(r){return r===null||typeof r!="object"?null:(r=te&&r[te]||r["@@iterator"],typeof r=="function"?r:null)}var re=Object.assign,b;function W(r){if(b===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);b=s&&s[1]||""}return`
`+b+r}var de=!1;function Ce(r,s){if(!r||de)return"";de=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){h=$}r.call(s.prototype)}else{try{throw Error()}catch($){h=$}r()}}catch($){if($&&h&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),g=h.stack.split(`
`),E=d.length-1,C=g.length-1;1<=E&&0<=C&&d[E]!==g[C];)C--;for(;1<=E&&0<=C;E--,C--)if(d[E]!==g[C]){if(E!==1||C!==1)do if(E--,C--,0>C||d[E]!==g[C]){var k=`
`+d[E].replace(" at new "," at ");return r.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",r.displayName)),k}while(1<=E&&0<=C);break}}}finally{de=!1,Error.prepareStackTrace=u}return(r=r?r.displayName||r.name:"")?W(r):""}function Re(r){switch(r.tag){case 5:return W(r.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return r=Ce(r.type,!1),r;case 11:return r=Ce(r.type.render,!1),r;case 1:return r=Ce(r.type,!0),r;default:return""}}function Oe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case pe:return"Portal";case R:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case je:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case x:return(r._context.displayName||"Context")+".Provider";case F:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case tt:return s=r.displayName||null,s!==null?s:Oe(r.type)||"Memo";case qe:s=r._payload,r=r._init;try{return Oe(r(s))}catch{}}return null}function Fe(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ue(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function We(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Et(r){var s=We(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,g=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){h=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function dr(r){r._valueTracker||(r._valueTracker=Et(r))}function xs(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var u=s.getValue(),h="";return r&&(h=We(r)?r.checked?"true":"false":r.value),r=h,r!==u?(s.setValue(r),!0):!1}function Hr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function zi(r,s){var u=s.checked;return re({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??r._wrapperState.initialChecked})}function Ds(r,s){var u=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;u=Ue(s.value!=null?s.value:u),r._wrapperState={initialChecked:h,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Qo(r,s){s=s.checked,s!=null&&G(r,"checked",s,!1)}function Go(r,s){Qo(r,s);var u=Ue(s.value),h=s.type;if(u!=null)h==="number"?(u===0&&r.value===""||r.value!=u)&&(r.value=""+u):r.value!==""+u&&(r.value=""+u);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Ns(r,s.type,u):s.hasOwnProperty("defaultValue")&&Ns(r,s.type,Ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Au(r,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,u||s===r.value||(r.value=s),r.defaultValue=s}u=r.name,u!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,u!==""&&(r.name=u)}function Ns(r,s,u){(s!=="number"||Hr(r.ownerDocument)!==r)&&(u==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+u&&(r.defaultValue=""+u))}var pr=Array.isArray;function mr(r,s,u,h){if(r=r.options,s){s={};for(var d=0;d<u.length;d++)s["$"+u[d]]=!0;for(u=0;u<r.length;u++)d=s.hasOwnProperty("$"+r[u].value),r[u].selected!==d&&(r[u].selected=d),d&&h&&(r[u].defaultSelected=!0)}else{for(u=""+Ue(u),s=null,d=0;d<r.length;d++){if(r[d].value===u){r[d].selected=!0,h&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function Yo(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Os(r,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(pr(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}r._wrapperState={initialValue:Ue(u)}}function Ls(r,s){var u=Ue(s.value),h=Ue(s.defaultValue);u!=null&&(u=""+u,u!==r.value&&(r.value=u),s.defaultValue==null&&r.defaultValue!==u&&(r.defaultValue=u)),h!=null&&(r.defaultValue=""+h)}function Jo(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function dt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?dt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var gr,Xo=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,h,d){MSApp.execUnsafeLocalFunction(function(){return r(s,u,h,d)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(gr=gr||document.createElement("div"),gr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=gr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Wr(r,s){if(s){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=s;return}}r.textContent=s}var $i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bi=["Webkit","ms","Moz","O"];Object.keys($i).forEach(function(r){Bi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),$i[s]=$i[r]})});function Zo(r,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||$i.hasOwnProperty(r)&&$i[r]?(""+s).trim():s+"px"}function ea(r,s){r=r.style;for(var u in s)if(s.hasOwnProperty(u)){var h=u.indexOf("--")===0,d=Zo(u,s[u],h);u==="float"&&(u="cssFloat"),h?r.setProperty(u,d):r[u]=d}}var ta=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function na(r,s){if(s){if(ta[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ra(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qi=null;function bs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Vs=null,pn=null,Kn=null;function Ms(r){if(r=Aa(r)){if(typeof Vs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=rl(s),Vs(r.stateNode,r.type,s))}}function Qn(r){pn?Kn?Kn.push(r):Kn=[r]:pn=r}function ia(){if(pn){var r=pn,s=Kn;if(Kn=pn=null,Ms(r),s)for(r=0;r<s.length;r++)Ms(s[r])}}function Hi(r,s){return r(s)}function sa(){}var yr=!1;function oa(r,s,u){if(yr)return r(s,u);yr=!0;try{return Hi(r,s,u)}finally{yr=!1,(pn!==null||Kn!==null)&&(sa(),ia())}}function ot(r,s){var u=r.stateNode;if(u===null)return null;var h=rl(u);if(h===null)return null;u=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var Fs=!1;if(f)try{var An={};Object.defineProperty(An,"passive",{get:function(){Fs=!0}}),window.addEventListener("test",An,An),window.removeEventListener("test",An,An)}catch{Fs=!1}function Wi(r,s,u,h,d,g,E,C,k){var $=Array.prototype.slice.call(arguments,3);try{s.apply(u,$)}catch(J){this.onError(J)}}var Ki=!1,Us=null,Pn=!1,aa=null,fh={onError:function(r){Ki=!0,Us=r}};function js(r,s,u,h,d,g,E,C,k){Ki=!1,Us=null,Wi.apply(fh,arguments)}function Pu(r,s,u,h,d,g,E,C,k){if(js.apply(this,arguments),Ki){if(Ki){var $=Us;Ki=!1,Us=null}else throw Error(t(198));Pn||(Pn=!0,aa=$)}}function kn(r){var s=r,u=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(u=s.return),r=s.return;while(r)}return s.tag===3?u:null}function Qi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function xn(r){if(kn(r)!==r)throw Error(t(188))}function ku(r){var s=r.alternate;if(!s){if(s=kn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var u=r,h=s;;){var d=u.return;if(d===null)break;var g=d.alternate;if(g===null){if(h=d.return,h!==null){u=h;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===u)return xn(d),r;if(g===h)return xn(d),s;g=g.sibling}throw Error(t(188))}if(u.return!==h.return)u=d,h=g;else{for(var E=!1,C=d.child;C;){if(C===u){E=!0,u=d,h=g;break}if(C===h){E=!0,h=d,u=g;break}C=C.sibling}if(!E){for(C=g.child;C;){if(C===u){E=!0,u=g,h=d;break}if(C===h){E=!0,h=g,u=d;break}C=C.sibling}if(!E)throw Error(t(189))}}if(u.alternate!==h)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?r:s}function ua(r){return r=ku(r),r!==null?zs(r):null}function zs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=zs(r);if(s!==null)return s;r=r.sibling}return null}var $s=e.unstable_scheduleCallback,la=e.unstable_cancelCallback,xu=e.unstable_shouldYield,dh=e.unstable_requestPaint,Ke=e.unstable_now,Du=e.unstable_getCurrentPriorityLevel,Gi=e.unstable_ImmediatePriority,Kr=e.unstable_UserBlockingPriority,mn=e.unstable_NormalPriority,ca=e.unstable_LowPriority,Nu=e.unstable_IdlePriority,Yi=null,on=null;function Ou(r){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Yi,r,void 0,(r.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:bu,ha=Math.log,Lu=Math.LN2;function bu(r){return r>>>=0,r===0?32:31-(ha(r)/Lu|0)|0}var Bs=64,qs=4194304;function Qr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ji(r,s){var u=r.pendingLanes;if(u===0)return 0;var h=0,d=r.suspendedLanes,g=r.pingedLanes,E=u&268435455;if(E!==0){var C=E&~d;C!==0?h=Qr(C):(g&=E,g!==0&&(h=Qr(g)))}else E=u&~d,E!==0?h=Qr(E):g!==0&&(h=Qr(g));if(h===0)return 0;if(s!==0&&s!==h&&!(s&d)&&(d=h&-h,g=s&-s,d>=g||d===16&&(g&4194240)!==0))return s;if(h&4&&(h|=u&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)u=31-$t(s),d=1<<u,h|=r[u],s&=~d;return h}function ph(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _r(r,s){for(var u=r.suspendedLanes,h=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes;0<g;){var E=31-$t(g),C=1<<E,k=d[E];k===-1?(!(C&u)||C&h)&&(d[E]=ph(C,s)):k<=s&&(r.expiredLanes|=C),g&=~C}}function an(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Xi(){var r=Bs;return Bs<<=1,!(Bs&4194240)&&(Bs=64),r}function Gr(r){for(var s=[],u=0;31>u;u++)s.push(r);return s}function Yr(r,s,u){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-$t(s),r[s]=u}function He(r,s){var u=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<u;){var d=31-$t(u),g=1<<d;s[d]=0,h[d]=-1,r[d]=-1,u&=~g}}function Jr(r,s){var u=r.entangledLanes|=s;for(r=r.entanglements;u;){var h=31-$t(u),d=1<<h;d&s|r[h]&s&&(r[h]|=s),u&=~d}}var xe=0;function Xr(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Vu,Hs,Mu,Fu,Uu,fa=!1,Gn=[],Rt=null,Dn=null,Nn=null,Zr=new Map,gn=new Map,Yn=[],mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ju(r,s){switch(r){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":Zr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":gn.delete(s.pointerId)}}function Gt(r,s,u,h,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:u,eventSystemFlags:h,nativeEvent:g,targetContainers:[d]},s!==null&&(s=Aa(s),s!==null&&Hs(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function gh(r,s,u,h,d){switch(s){case"focusin":return Rt=Gt(Rt,r,s,u,h,d),!0;case"dragenter":return Dn=Gt(Dn,r,s,u,h,d),!0;case"mouseover":return Nn=Gt(Nn,r,s,u,h,d),!0;case"pointerover":var g=d.pointerId;return Zr.set(g,Gt(Zr.get(g)||null,r,s,u,h,d)),!0;case"gotpointercapture":return g=d.pointerId,gn.set(g,Gt(gn.get(g)||null,r,s,u,h,d)),!0}return!1}function zu(r){var s=rs(r.target);if(s!==null){var u=kn(s);if(u!==null){if(s=u.tag,s===13){if(s=Qi(u),s!==null){r.blockedOn=s,Uu(r.priority,function(){Mu(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function vr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var u=Ws(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(u===null){u=r.nativeEvent;var h=new u.constructor(u.type,u);qi=h,u.target.dispatchEvent(h),qi=null}else return s=Aa(u),s!==null&&Hs(s),r.blockedOn=u,!1;s.shift()}return!0}function Zi(r,s,u){vr(r)&&u.delete(s)}function $u(){fa=!1,Rt!==null&&vr(Rt)&&(Rt=null),Dn!==null&&vr(Dn)&&(Dn=null),Nn!==null&&vr(Nn)&&(Nn=null),Zr.forEach(Zi),gn.forEach(Zi)}function On(r,s){r.blockedOn===s&&(r.blockedOn=null,fa||(fa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$u)))}function Ln(r){function s(d){return On(d,r)}if(0<Gn.length){On(Gn[0],r);for(var u=1;u<Gn.length;u++){var h=Gn[u];h.blockedOn===r&&(h.blockedOn=null)}}for(Rt!==null&&On(Rt,r),Dn!==null&&On(Dn,r),Nn!==null&&On(Nn,r),Zr.forEach(s),gn.forEach(s),u=0;u<Yn.length;u++)h=Yn[u],h.blockedOn===r&&(h.blockedOn=null);for(;0<Yn.length&&(u=Yn[0],u.blockedOn===null);)zu(u),u.blockedOn===null&&Yn.shift()}var Er=ue.ReactCurrentBatchConfig,ei=!0;function Xe(r,s,u,h){var d=xe,g=Er.transition;Er.transition=null;try{xe=1,da(r,s,u,h)}finally{xe=d,Er.transition=g}}function yh(r,s,u,h){var d=xe,g=Er.transition;Er.transition=null;try{xe=4,da(r,s,u,h)}finally{xe=d,Er.transition=g}}function da(r,s,u,h){if(ei){var d=Ws(r,s,u,h);if(d===null)Ph(r,s,h,es,u),ju(r,h);else if(gh(d,r,s,u,h))h.stopPropagation();else if(ju(r,h),s&4&&-1<mh.indexOf(r)){for(;d!==null;){var g=Aa(d);if(g!==null&&Vu(g),g=Ws(r,s,u,h),g===null&&Ph(r,s,h,es,u),g===d)break;d=g}d!==null&&h.stopPropagation()}else Ph(r,s,h,null,u)}}var es=null;function Ws(r,s,u,h){if(es=null,r=bs(h),r=rs(r),r!==null)if(s=kn(r),s===null)r=null;else if(u=s.tag,u===13){if(r=Qi(s),r!==null)return r;r=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return es=r,null}function pa(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Du()){case Gi:return 1;case Kr:return 4;case mn:case ca:return 16;case Nu:return 536870912;default:return 16}default:return 16}}var un=null,Ks=null,Yt=null;function ma(){if(Yt)return Yt;var r,s=Ks,u=s.length,h,d="value"in un?un.value:un.textContent,g=d.length;for(r=0;r<u&&s[r]===d[r];r++);var E=u-r;for(h=1;h<=E&&s[u-h]===d[g-h];h++);return Yt=d.slice(r,1<h?1-h:void 0)}function Qs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Jn(){return!0}function ga(){return!1}function At(r){function s(u,h,d,g,E){this._reactName=u,this._targetInst=d,this.type=h,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(u=r[C],this[C]=u?u(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Jn:ga,this.isPropagationStopped=ga,this}return re(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),s}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gs=At(bn),Xn=re({},bn,{view:0,detail:0}),_h=At(Xn),Ys,wr,ti,ts=re({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ti&&(ti&&r.type==="mousemove"?(Ys=r.screenX-ti.screenX,wr=r.screenY-ti.screenY):wr=Ys=0,ti=r),Ys)},movementY:function(r){return"movementY"in r?r.movementY:wr}}),Js=At(ts),ya=re({},ts,{dataTransfer:0}),Bu=At(ya),Xs=re({},Xn,{relatedTarget:0}),Zs=At(Xs),qu=re({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Tr=At(qu),Hu=re({},bn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Wu=At(Hu),Ku=re({},bn,{data:0}),_a=At(Ku),eo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Qu[r])?!!s[r]:!1}function Zn(){return Gu}var l=re({},Xn,{key:function(r){if(r.key){var s=eo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Qs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Bt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(r){return r.type==="keypress"?Qs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Qs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=At(l),_=re({},ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=At(_),U=re({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),q=At(U),ne=re({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$e=At(ne),mt=re({},ts,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=At(mt),wt=[9,13,27,32],lt=f&&"CompositionEvent"in window,yn=null;f&&"documentMode"in document&&(yn=document.documentMode);var ln=f&&"TextEvent"in window&&!yn,ns=f&&(!lt||yn&&8<yn&&11>=yn),to=" ",Lp=!1;function bp(r,s){switch(r){case"keyup":return wt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var no=!1;function Dw(r,s){switch(r){case"compositionend":return Vp(s);case"keypress":return s.which!==32?null:(Lp=!0,to);case"textInput":return r=s.data,r===to&&Lp?null:r;default:return null}}function Nw(r,s){if(no)return r==="compositionend"||!lt&&bp(r,s)?(r=ma(),Yt=Ks=un=null,no=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ns&&s.locale!=="ko"?null:s.data;default:return null}}var Ow={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Ow[r.type]:s==="textarea"}function Fp(r,s,u,h){Qn(h),s=el(s,"onChange"),0<s.length&&(u=new Gs("onChange","change",null,u,h),r.push({event:u,listeners:s}))}var va=null,Ea=null;function Lw(r){nm(r,0)}function Yu(r){var s=ao(r);if(xs(s))return r}function bw(r,s){if(r==="change")return s}var Up=!1;if(f){var vh;if(f){var Eh="oninput"in document;if(!Eh){var jp=document.createElement("div");jp.setAttribute("oninput","return;"),Eh=typeof jp.oninput=="function"}vh=Eh}else vh=!1;Up=vh&&(!document.documentMode||9<document.documentMode)}function zp(){va&&(va.detachEvent("onpropertychange",$p),Ea=va=null)}function $p(r){if(r.propertyName==="value"&&Yu(Ea)){var s=[];Fp(s,Ea,r,bs(r)),oa(Lw,s)}}function Vw(r,s,u){r==="focusin"?(zp(),va=s,Ea=u,va.attachEvent("onpropertychange",$p)):r==="focusout"&&zp()}function Mw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Yu(Ea)}function Fw(r,s){if(r==="click")return Yu(s)}function Uw(r,s){if(r==="input"||r==="change")return Yu(s)}function jw(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Vn=typeof Object.is=="function"?Object.is:jw;function wa(r,s){if(Vn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var u=Object.keys(r),h=Object.keys(s);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var d=u[h];if(!p.call(s,d)||!Vn(r[d],s[d]))return!1}return!0}function Bp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function qp(r,s){var u=Bp(r);r=0;for(var h;u;){if(u.nodeType===3){if(h=r+u.textContent.length,r<=s&&h>=s)return{node:u,offset:s-r};r=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Bp(u)}}function Hp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Hp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Wp(){for(var r=window,s=Hr();s instanceof r.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)r=s.contentWindow;else break;s=Hr(r.document)}return s}function wh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function zw(r){var s=Wp(),u=r.focusedElem,h=r.selectionRange;if(s!==u&&u&&u.ownerDocument&&Hp(u.ownerDocument.documentElement,u)){if(h!==null&&wh(u)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(r,u.value.length);else if(r=(s=u.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var d=u.textContent.length,g=Math.min(h.start,d);h=h.end===void 0?g:Math.min(h.end,d),!r.extend&&g>h&&(d=h,h=g,g=d),d=qp(u,g);var E=qp(u,h);d&&E&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=u;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)r=s[u],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var $w=f&&"documentMode"in document&&11>=document.documentMode,ro=null,Th=null,Ta=null,Ih=!1;function Kp(r,s,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ih||ro==null||ro!==Hr(h)||(h=ro,"selectionStart"in h&&wh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ta&&wa(Ta,h)||(Ta=h,h=el(Th,"onSelect"),0<h.length&&(s=new Gs("onSelect","select",null,s,u),r.push({event:s,listeners:h}),s.target=ro)))}function Ju(r,s){var u={};return u[r.toLowerCase()]=s.toLowerCase(),u["Webkit"+r]="webkit"+s,u["Moz"+r]="moz"+s,u}var io={animationend:Ju("Animation","AnimationEnd"),animationiteration:Ju("Animation","AnimationIteration"),animationstart:Ju("Animation","AnimationStart"),transitionend:Ju("Transition","TransitionEnd")},Sh={},Qp={};f&&(Qp=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function Xu(r){if(Sh[r])return Sh[r];if(!io[r])return r;var s=io[r],u;for(u in s)if(s.hasOwnProperty(u)&&u in Qp)return Sh[r]=s[u];return r}var Gp=Xu("animationend"),Yp=Xu("animationiteration"),Jp=Xu("animationstart"),Xp=Xu("transitionend"),Zp=new Map,em="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(r,s){Zp.set(r,s),a(s,[r])}for(var Ch=0;Ch<em.length;Ch++){var Rh=em[Ch],Bw=Rh.toLowerCase(),qw=Rh[0].toUpperCase()+Rh.slice(1);ni(Bw,"on"+qw)}ni(Gp,"onAnimationEnd"),ni(Yp,"onAnimationIteration"),ni(Jp,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(Xp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function tm(r,s,u){var h=r.type||"unknown-event";r.currentTarget=u,Pu(h,s,void 0,r),r.currentTarget=null}function nm(r,s){s=(s&4)!==0;for(var u=0;u<r.length;u++){var h=r[u],d=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var E=h.length-1;0<=E;E--){var C=h[E],k=C.instance,$=C.currentTarget;if(C=C.listener,k!==g&&d.isPropagationStopped())break e;tm(d,C,$),g=k}else for(E=0;E<h.length;E++){if(C=h[E],k=C.instance,$=C.currentTarget,C=C.listener,k!==g&&d.isPropagationStopped())break e;tm(d,C,$),g=k}}}if(Pn)throw r=aa,Pn=!1,aa=null,r}function Ge(r,s){var u=s[Lh];u===void 0&&(u=s[Lh]=new Set);var h=r+"__bubble";u.has(h)||(rm(s,r,2,!1),u.add(h))}function Ah(r,s,u){var h=0;s&&(h|=4),rm(u,r,h,s)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function Sa(r){if(!r[Zu]){r[Zu]=!0,i.forEach(function(u){u!=="selectionchange"&&(Hw.has(u)||Ah(u,!1,r),Ah(u,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Zu]||(s[Zu]=!0,Ah("selectionchange",!1,s))}}function rm(r,s,u,h){switch(pa(s)){case 1:var d=Xe;break;case 4:d=yh;break;default:d=da}u=d.bind(null,s,u,r),d=void 0,!Fs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),h?d!==void 0?r.addEventListener(s,u,{capture:!0,passive:d}):r.addEventListener(s,u,!0):d!==void 0?r.addEventListener(s,u,{passive:d}):r.addEventListener(s,u,!1)}function Ph(r,s,u,h,d){var g=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var C=h.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(E===4)for(E=h.return;E!==null;){var k=E.tag;if((k===3||k===4)&&(k=E.stateNode.containerInfo,k===d||k.nodeType===8&&k.parentNode===d))return;E=E.return}for(;C!==null;){if(E=rs(C),E===null)return;if(k=E.tag,k===5||k===6){h=g=E;continue e}C=C.parentNode}}h=h.return}oa(function(){var $=g,J=bs(u),Z=[];e:{var Y=Zp.get(r);if(Y!==void 0){var ie=Gs,le=r;switch(r){case"keypress":if(Qs(u)===0)break e;case"keydown":case"keyup":ie=m;break;case"focusin":le="focus",ie=Zs;break;case"focusout":le="blur",ie=Zs;break;case"beforeblur":case"afterblur":ie=Zs;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Js;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=q;break;case Gp:case Yp:case Jp:ie=Tr;break;case Xp:ie=$e;break;case"scroll":ie=_h;break;case"wheel":ie=Le;break;case"copy":case"cut":case"paste":ie=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=w}var ce=(s&4)!==0,at=!ce&&r==="scroll",j=ce?Y!==null?Y+"Capture":null:Y;ce=[];for(var N=$,z;N!==null;){z=N;var ee=z.stateNode;if(z.tag===5&&ee!==null&&(z=ee,j!==null&&(ee=ot(N,j),ee!=null&&ce.push(Ca(N,ee,z)))),at)break;N=N.return}0<ce.length&&(Y=new ie(Y,le,null,u,J),Z.push({event:Y,listeners:ce}))}}if(!(s&7)){e:{if(Y=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",Y&&u!==qi&&(le=u.relatedTarget||u.fromElement)&&(rs(le)||le[Ir]))break e;if((ie||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,ie?(le=u.relatedTarget||u.toElement,ie=$,le=le?rs(le):null,le!==null&&(at=kn(le),le!==at||le.tag!==5&&le.tag!==6)&&(le=null)):(ie=null,le=$),ie!==le)){if(ce=Js,ee="onMouseLeave",j="onMouseEnter",N="mouse",(r==="pointerout"||r==="pointerover")&&(ce=w,ee="onPointerLeave",j="onPointerEnter",N="pointer"),at=ie==null?Y:ao(ie),z=le==null?Y:ao(le),Y=new ce(ee,N+"leave",ie,u,J),Y.target=at,Y.relatedTarget=z,ee=null,rs(J)===$&&(ce=new ce(j,N+"enter",le,u,J),ce.target=z,ce.relatedTarget=at,ee=ce),at=ee,ie&&le)t:{for(ce=ie,j=le,N=0,z=ce;z;z=so(z))N++;for(z=0,ee=j;ee;ee=so(ee))z++;for(;0<N-z;)ce=so(ce),N--;for(;0<z-N;)j=so(j),z--;for(;N--;){if(ce===j||j!==null&&ce===j.alternate)break t;ce=so(ce),j=so(j)}ce=null}else ce=null;ie!==null&&im(Z,Y,ie,ce,!1),le!==null&&at!==null&&im(Z,at,le,ce,!0)}}e:{if(Y=$?ao($):window,ie=Y.nodeName&&Y.nodeName.toLowerCase(),ie==="select"||ie==="input"&&Y.type==="file")var fe=bw;else if(Mp(Y))if(Up)fe=Uw;else{fe=Mw;var ge=Vw}else(ie=Y.nodeName)&&ie.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(fe=Fw);if(fe&&(fe=fe(r,$))){Fp(Z,fe,u,J);break e}ge&&ge(r,Y,$),r==="focusout"&&(ge=Y._wrapperState)&&ge.controlled&&Y.type==="number"&&Ns(Y,"number",Y.value)}switch(ge=$?ao($):window,r){case"focusin":(Mp(ge)||ge.contentEditable==="true")&&(ro=ge,Th=$,Ta=null);break;case"focusout":Ta=Th=ro=null;break;case"mousedown":Ih=!0;break;case"contextmenu":case"mouseup":case"dragend":Ih=!1,Kp(Z,u,J);break;case"selectionchange":if($w)break;case"keydown":case"keyup":Kp(Z,u,J)}var ye;if(lt)e:{switch(r){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else no?bp(r,u)&&(ve="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(ve="onCompositionStart");ve&&(ns&&u.locale!=="ko"&&(no||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&no&&(ye=ma()):(un=J,Ks="value"in un?un.value:un.textContent,no=!0)),ge=el($,ve),0<ge.length&&(ve=new _a(ve,r,null,u,J),Z.push({event:ve,listeners:ge}),ye?ve.data=ye:(ye=Vp(u),ye!==null&&(ve.data=ye)))),(ye=ln?Dw(r,u):Nw(r,u))&&($=el($,"onBeforeInput"),0<$.length&&(J=new _a("onBeforeInput","beforeinput",null,u,J),Z.push({event:J,listeners:$}),J.data=ye))}nm(Z,s)})}function Ca(r,s,u){return{instance:r,listener:s,currentTarget:u}}function el(r,s){for(var u=s+"Capture",h=[];r!==null;){var d=r,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=ot(r,u),g!=null&&h.unshift(Ca(r,g,d)),g=ot(r,s),g!=null&&h.push(Ca(r,g,d))),r=r.return}return h}function so(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function im(r,s,u,h,d){for(var g=s._reactName,E=[];u!==null&&u!==h;){var C=u,k=C.alternate,$=C.stateNode;if(k!==null&&k===h)break;C.tag===5&&$!==null&&(C=$,d?(k=ot(u,g),k!=null&&E.unshift(Ca(u,k,C))):d||(k=ot(u,g),k!=null&&E.push(Ca(u,k,C)))),u=u.return}E.length!==0&&r.push({event:s,listeners:E})}var Ww=/\r\n?/g,Kw=/\u0000|\uFFFD/g;function sm(r){return(typeof r=="string"?r:""+r).replace(Ww,`
`).replace(Kw,"")}function tl(r,s,u){if(s=sm(s),sm(r)!==s&&u)throw Error(t(425))}function nl(){}var kh=null,xh=null;function Dh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Nh=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,om=typeof Promise=="function"?Promise:void 0,Gw=typeof queueMicrotask=="function"?queueMicrotask:typeof om<"u"?function(r){return om.resolve(null).then(r).catch(Yw)}:Nh;function Yw(r){setTimeout(function(){throw r})}function Oh(r,s){var u=s,h=0;do{var d=u.nextSibling;if(r.removeChild(u),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(h===0){r.removeChild(d),Ln(s);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=d}while(u);Ln(s)}function ri(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function am(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return r;s--}else u==="/$"&&s++}r=r.previousSibling}return null}var oo=Math.random().toString(36).slice(2),er="__reactFiber$"+oo,Ra="__reactProps$"+oo,Ir="__reactContainer$"+oo,Lh="__reactEvents$"+oo,Jw="__reactListeners$"+oo,Xw="__reactHandles$"+oo;function rs(r){var s=r[er];if(s)return s;for(var u=r.parentNode;u;){if(s=u[Ir]||u[er]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(r=am(r);r!==null;){if(u=r[er])return u;r=am(r)}return s}r=u,u=r.parentNode}return null}function Aa(r){return r=r[er]||r[Ir],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ao(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function rl(r){return r[Ra]||null}var bh=[],uo=-1;function ii(r){return{current:r}}function Ye(r){0>uo||(r.current=bh[uo],bh[uo]=null,uo--)}function Qe(r,s){uo++,bh[uo]=r.current,r.current=s}var si={},Lt=ii(si),Jt=ii(!1),is=si;function lo(r,s){var u=r.type.contextTypes;if(!u)return si;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in u)d[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function Xt(r){return r=r.childContextTypes,r!=null}function il(){Ye(Jt),Ye(Lt)}function um(r,s,u){if(Lt.current!==si)throw Error(t(168));Qe(Lt,s),Qe(Jt,u)}function lm(r,s,u){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var d in h)if(!(d in s))throw Error(t(108,Fe(r)||"Unknown",d));return re({},u,h)}function sl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||si,is=Lt.current,Qe(Lt,r),Qe(Jt,Jt.current),!0}function cm(r,s,u){var h=r.stateNode;if(!h)throw Error(t(169));u?(r=lm(r,s,is),h.__reactInternalMemoizedMergedChildContext=r,Ye(Jt),Ye(Lt),Qe(Lt,r)):Ye(Jt),Qe(Jt,u)}var Sr=null,ol=!1,Vh=!1;function hm(r){Sr===null?Sr=[r]:Sr.push(r)}function Zw(r){ol=!0,hm(r)}function oi(){if(!Vh&&Sr!==null){Vh=!0;var r=0,s=xe;try{var u=Sr;for(xe=1;r<u.length;r++){var h=u[r];do h=h(!0);while(h!==null)}Sr=null,ol=!1}catch(d){throw Sr!==null&&(Sr=Sr.slice(r+1)),$s(Gi,oi),d}finally{xe=s,Vh=!1}}return null}var co=[],ho=0,al=null,ul=0,_n=[],vn=0,ss=null,Cr=1,Rr="";function os(r,s){co[ho++]=ul,co[ho++]=al,al=r,ul=s}function fm(r,s,u){_n[vn++]=Cr,_n[vn++]=Rr,_n[vn++]=ss,ss=r;var h=Cr;r=Rr;var d=32-$t(h)-1;h&=~(1<<d),u+=1;var g=32-$t(s)+d;if(30<g){var E=d-d%5;g=(h&(1<<E)-1).toString(32),h>>=E,d-=E,Cr=1<<32-$t(s)+d|u<<d|h,Rr=g+r}else Cr=1<<g|u<<d|h,Rr=r}function Mh(r){r.return!==null&&(os(r,1),fm(r,1,0))}function Fh(r){for(;r===al;)al=co[--ho],co[ho]=null,ul=co[--ho],co[ho]=null;for(;r===ss;)ss=_n[--vn],_n[vn]=null,Rr=_n[--vn],_n[vn]=null,Cr=_n[--vn],_n[vn]=null}var cn=null,hn=null,Ze=!1,Mn=null;function dm(r,s){var u=In(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=r,s=r.deletions,s===null?(r.deletions=[u],r.flags|=16):s.push(u)}function pm(r,s){switch(r.tag){case 5:var u=r.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,cn=r,hn=ri(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,cn=r,hn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=ss!==null?{id:Cr,overflow:Rr}:null,r.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=In(18,null,null,0),u.stateNode=s,u.return=r,r.child=u,cn=r,hn=null,!0):!1;default:return!1}}function Uh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function jh(r){if(Ze){var s=hn;if(s){var u=s;if(!pm(r,s)){if(Uh(r))throw Error(t(418));s=ri(u.nextSibling);var h=cn;s&&pm(r,s)?dm(h,u):(r.flags=r.flags&-4097|2,Ze=!1,cn=r)}}else{if(Uh(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ze=!1,cn=r}}}function mm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;cn=r}function ll(r){if(r!==cn)return!1;if(!Ze)return mm(r),Ze=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Dh(r.type,r.memoizedProps)),s&&(s=hn)){if(Uh(r))throw gm(),Error(t(418));for(;s;)dm(r,s),s=ri(s.nextSibling)}if(mm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"){if(s===0){hn=ri(r.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}r=r.nextSibling}hn=null}}else hn=cn?ri(r.stateNode.nextSibling):null;return!0}function gm(){for(var r=hn;r;)r=ri(r.nextSibling)}function fo(){hn=cn=null,Ze=!1}function zh(r){Mn===null?Mn=[r]:Mn.push(r)}var eT=ue.ReactCurrentBatchConfig;function Pa(r,s,u){if(r=u.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var h=u.stateNode}if(!h)throw Error(t(147,r));var d=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(E){var C=d.refs;E===null?delete C[g]:C[g]=E},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,r))}return r}function cl(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function ym(r){var s=r._init;return s(r._payload)}function _m(r){function s(j,N){if(r){var z=j.deletions;z===null?(j.deletions=[N],j.flags|=16):z.push(N)}}function u(j,N){if(!r)return null;for(;N!==null;)s(j,N),N=N.sibling;return null}function h(j,N){for(j=new Map;N!==null;)N.key!==null?j.set(N.key,N):j.set(N.index,N),N=N.sibling;return j}function d(j,N){return j=pi(j,N),j.index=0,j.sibling=null,j}function g(j,N,z){return j.index=z,r?(z=j.alternate,z!==null?(z=z.index,z<N?(j.flags|=2,N):z):(j.flags|=2,N)):(j.flags|=1048576,N)}function E(j){return r&&j.alternate===null&&(j.flags|=2),j}function C(j,N,z,ee){return N===null||N.tag!==6?(N=Of(z,j.mode,ee),N.return=j,N):(N=d(N,z),N.return=j,N)}function k(j,N,z,ee){var fe=z.type;return fe===D?J(j,N,z.props.children,ee,z.key):N!==null&&(N.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===qe&&ym(fe)===N.type)?(ee=d(N,z.props),ee.ref=Pa(j,N,z),ee.return=j,ee):(ee=Ll(z.type,z.key,z.props,null,j.mode,ee),ee.ref=Pa(j,N,z),ee.return=j,ee)}function $(j,N,z,ee){return N===null||N.tag!==4||N.stateNode.containerInfo!==z.containerInfo||N.stateNode.implementation!==z.implementation?(N=Lf(z,j.mode,ee),N.return=j,N):(N=d(N,z.children||[]),N.return=j,N)}function J(j,N,z,ee,fe){return N===null||N.tag!==7?(N=ps(z,j.mode,ee,fe),N.return=j,N):(N=d(N,z),N.return=j,N)}function Z(j,N,z){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Of(""+N,j.mode,z),N.return=j,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case we:return z=Ll(N.type,N.key,N.props,null,j.mode,z),z.ref=Pa(j,null,N),z.return=j,z;case pe:return N=Lf(N,j.mode,z),N.return=j,N;case qe:var ee=N._init;return Z(j,ee(N._payload),z)}if(pr(N)||he(N))return N=ps(N,j.mode,z,null),N.return=j,N;cl(j,N)}return null}function Y(j,N,z,ee){var fe=N!==null?N.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return fe!==null?null:C(j,N,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case we:return z.key===fe?k(j,N,z,ee):null;case pe:return z.key===fe?$(j,N,z,ee):null;case qe:return fe=z._init,Y(j,N,fe(z._payload),ee)}if(pr(z)||he(z))return fe!==null?null:J(j,N,z,ee,null);cl(j,z)}return null}function ie(j,N,z,ee,fe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return j=j.get(z)||null,C(N,j,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case we:return j=j.get(ee.key===null?z:ee.key)||null,k(N,j,ee,fe);case pe:return j=j.get(ee.key===null?z:ee.key)||null,$(N,j,ee,fe);case qe:var ge=ee._init;return ie(j,N,z,ge(ee._payload),fe)}if(pr(ee)||he(ee))return j=j.get(z)||null,J(N,j,ee,fe,null);cl(N,ee)}return null}function le(j,N,z,ee){for(var fe=null,ge=null,ye=N,ve=N=0,St=null;ye!==null&&ve<z.length;ve++){ye.index>ve?(St=ye,ye=null):St=ye.sibling;var Me=Y(j,ye,z[ve],ee);if(Me===null){ye===null&&(ye=St);break}r&&ye&&Me.alternate===null&&s(j,ye),N=g(Me,N,ve),ge===null?fe=Me:ge.sibling=Me,ge=Me,ye=St}if(ve===z.length)return u(j,ye),Ze&&os(j,ve),fe;if(ye===null){for(;ve<z.length;ve++)ye=Z(j,z[ve],ee),ye!==null&&(N=g(ye,N,ve),ge===null?fe=ye:ge.sibling=ye,ge=ye);return Ze&&os(j,ve),fe}for(ye=h(j,ye);ve<z.length;ve++)St=ie(ye,j,ve,z[ve],ee),St!==null&&(r&&St.alternate!==null&&ye.delete(St.key===null?ve:St.key),N=g(St,N,ve),ge===null?fe=St:ge.sibling=St,ge=St);return r&&ye.forEach(function(mi){return s(j,mi)}),Ze&&os(j,ve),fe}function ce(j,N,z,ee){var fe=he(z);if(typeof fe!="function")throw Error(t(150));if(z=fe.call(z),z==null)throw Error(t(151));for(var ge=fe=null,ye=N,ve=N=0,St=null,Me=z.next();ye!==null&&!Me.done;ve++,Me=z.next()){ye.index>ve?(St=ye,ye=null):St=ye.sibling;var mi=Y(j,ye,Me.value,ee);if(mi===null){ye===null&&(ye=St);break}r&&ye&&mi.alternate===null&&s(j,ye),N=g(mi,N,ve),ge===null?fe=mi:ge.sibling=mi,ge=mi,ye=St}if(Me.done)return u(j,ye),Ze&&os(j,ve),fe;if(ye===null){for(;!Me.done;ve++,Me=z.next())Me=Z(j,Me.value,ee),Me!==null&&(N=g(Me,N,ve),ge===null?fe=Me:ge.sibling=Me,ge=Me);return Ze&&os(j,ve),fe}for(ye=h(j,ye);!Me.done;ve++,Me=z.next())Me=ie(ye,j,ve,Me.value,ee),Me!==null&&(r&&Me.alternate!==null&&ye.delete(Me.key===null?ve:Me.key),N=g(Me,N,ve),ge===null?fe=Me:ge.sibling=Me,ge=Me);return r&&ye.forEach(function(NT){return s(j,NT)}),Ze&&os(j,ve),fe}function at(j,N,z,ee){if(typeof z=="object"&&z!==null&&z.type===D&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case we:e:{for(var fe=z.key,ge=N;ge!==null;){if(ge.key===fe){if(fe=z.type,fe===D){if(ge.tag===7){u(j,ge.sibling),N=d(ge,z.props.children),N.return=j,j=N;break e}}else if(ge.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===qe&&ym(fe)===ge.type){u(j,ge.sibling),N=d(ge,z.props),N.ref=Pa(j,ge,z),N.return=j,j=N;break e}u(j,ge);break}else s(j,ge);ge=ge.sibling}z.type===D?(N=ps(z.props.children,j.mode,ee,z.key),N.return=j,j=N):(ee=Ll(z.type,z.key,z.props,null,j.mode,ee),ee.ref=Pa(j,N,z),ee.return=j,j=ee)}return E(j);case pe:e:{for(ge=z.key;N!==null;){if(N.key===ge)if(N.tag===4&&N.stateNode.containerInfo===z.containerInfo&&N.stateNode.implementation===z.implementation){u(j,N.sibling),N=d(N,z.children||[]),N.return=j,j=N;break e}else{u(j,N);break}else s(j,N);N=N.sibling}N=Lf(z,j.mode,ee),N.return=j,j=N}return E(j);case qe:return ge=z._init,at(j,N,ge(z._payload),ee)}if(pr(z))return le(j,N,z,ee);if(he(z))return ce(j,N,z,ee);cl(j,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,N!==null&&N.tag===6?(u(j,N.sibling),N=d(N,z),N.return=j,j=N):(u(j,N),N=Of(z,j.mode,ee),N.return=j,j=N),E(j)):u(j,N)}return at}var po=_m(!0),vm=_m(!1),hl=ii(null),fl=null,mo=null,$h=null;function Bh(){$h=mo=fl=null}function qh(r){var s=hl.current;Ye(hl),r._currentValue=s}function Hh(r,s,u){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===u)break;r=r.return}}function go(r,s){fl=r,$h=mo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(Zt=!0),r.firstContext=null)}function En(r){var s=r._currentValue;if($h!==r)if(r={context:r,memoizedValue:s,next:null},mo===null){if(fl===null)throw Error(t(308));mo=r,fl.dependencies={lanes:0,firstContext:r}}else mo=mo.next=r;return s}var as=null;function Wh(r){as===null?as=[r]:as.push(r)}function Em(r,s,u,h){var d=s.interleaved;return d===null?(u.next=u,Wh(s)):(u.next=d.next,d.next=u),s.interleaved=u,Ar(r,h)}function Ar(r,s){r.lanes|=s;var u=r.alternate;for(u!==null&&(u.lanes|=s),u=r,r=r.return;r!==null;)r.childLanes|=s,u=r.alternate,u!==null&&(u.childLanes|=s),u=r,r=r.return;return u.tag===3?u.stateNode:null}var ai=!1;function Kh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Pr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function ui(r,s,u){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,Ve&2){var d=h.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),h.pending=s,Ar(r,u)}return d=h.interleaved,d===null?(s.next=s,Wh(h)):(s.next=d.next,d.next=s),h.interleaved=s,Ar(r,u)}function dl(r,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,u|=h,s.lanes=u,Jr(r,u)}}function Tm(r,s){var u=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var d=null,g=null;if(u=u.firstBaseUpdate,u!==null){do{var E={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};g===null?d=g=E:g=g.next=E,u=u.next}while(u!==null);g===null?d=g=s:g=g.next=s}else d=g=s;u={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=s:r.next=s,u.lastBaseUpdate=s}function pl(r,s,u,h){var d=r.updateQueue;ai=!1;var g=d.firstBaseUpdate,E=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var k=C,$=k.next;k.next=null,E===null?g=$:E.next=$,E=k;var J=r.alternate;J!==null&&(J=J.updateQueue,C=J.lastBaseUpdate,C!==E&&(C===null?J.firstBaseUpdate=$:C.next=$,J.lastBaseUpdate=k))}if(g!==null){var Z=d.baseState;E=0,J=$=k=null,C=g;do{var Y=C.lane,ie=C.eventTime;if((h&Y)===Y){J!==null&&(J=J.next={eventTime:ie,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var le=r,ce=C;switch(Y=s,ie=u,ce.tag){case 1:if(le=ce.payload,typeof le=="function"){Z=le.call(ie,Z,Y);break e}Z=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ce.payload,Y=typeof le=="function"?le.call(ie,Z,Y):le,Y==null)break e;Z=re({},Z,Y);break e;case 2:ai=!0}}C.callback!==null&&C.lane!==0&&(r.flags|=64,Y=d.effects,Y===null?d.effects=[C]:Y.push(C))}else ie={eventTime:ie,lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},J===null?($=J=ie,k=Z):J=J.next=ie,E|=Y;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;Y=C,C=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(J===null&&(k=Z),d.baseState=k,d.firstBaseUpdate=$,d.lastBaseUpdate=J,s=d.shared.interleaved,s!==null){d=s;do E|=d.lane,d=d.next;while(d!==s)}else g===null&&(d.shared.lanes=0);cs|=E,r.lanes=E,r.memoizedState=Z}}function Im(r,s,u){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],d=h.callback;if(d!==null){if(h.callback=null,h=u,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var ka={},tr=ii(ka),xa=ii(ka),Da=ii(ka);function us(r){if(r===ka)throw Error(t(174));return r}function Qh(r,s){switch(Qe(Da,s),Qe(xa,r),Qe(tr,ka),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:pt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=pt(s,r)}Ye(tr),Qe(tr,s)}function yo(){Ye(tr),Ye(xa),Ye(Da)}function Sm(r){us(Da.current);var s=us(tr.current),u=pt(s,r.type);s!==u&&(Qe(xa,r),Qe(tr,u))}function Gh(r){xa.current===r&&(Ye(tr),Ye(xa))}var nt=ii(0);function ml(r){for(var s=r;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Yh=[];function Jh(){for(var r=0;r<Yh.length;r++)Yh[r]._workInProgressVersionPrimary=null;Yh.length=0}var gl=ue.ReactCurrentDispatcher,Xh=ue.ReactCurrentBatchConfig,ls=0,rt=null,gt=null,Tt=null,yl=!1,Na=!1,Oa=0,tT=0;function bt(){throw Error(t(321))}function Zh(r,s){if(s===null)return!1;for(var u=0;u<s.length&&u<r.length;u++)if(!Vn(r[u],s[u]))return!1;return!0}function ef(r,s,u,h,d,g){if(ls=g,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,gl.current=r===null||r.memoizedState===null?sT:oT,r=u(h,d),Na){g=0;do{if(Na=!1,Oa=0,25<=g)throw Error(t(301));g+=1,Tt=gt=null,s.updateQueue=null,gl.current=aT,r=u(h,d)}while(Na)}if(gl.current=El,s=gt!==null&&gt.next!==null,ls=0,Tt=gt=rt=null,yl=!1,s)throw Error(t(300));return r}function tf(){var r=Oa!==0;return Oa=0,r}function nr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?rt.memoizedState=Tt=r:Tt=Tt.next=r,Tt}function wn(){if(gt===null){var r=rt.alternate;r=r!==null?r.memoizedState:null}else r=gt.next;var s=Tt===null?rt.memoizedState:Tt.next;if(s!==null)Tt=s,gt=r;else{if(r===null)throw Error(t(310));gt=r,r={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Tt===null?rt.memoizedState=Tt=r:Tt=Tt.next=r}return Tt}function La(r,s){return typeof s=="function"?s(r):s}function nf(r){var s=wn(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=r;var h=gt,d=h.baseQueue,g=u.pending;if(g!==null){if(d!==null){var E=d.next;d.next=g.next,g.next=E}h.baseQueue=d=g,u.pending=null}if(d!==null){g=d.next,h=h.baseState;var C=E=null,k=null,$=g;do{var J=$.lane;if((ls&J)===J)k!==null&&(k=k.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:r(h,$.action);else{var Z={lane:J,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};k===null?(C=k=Z,E=h):k=k.next=Z,rt.lanes|=J,cs|=J}$=$.next}while($!==null&&$!==g);k===null?E=h:k.next=C,Vn(h,s.memoizedState)||(Zt=!0),s.memoizedState=h,s.baseState=E,s.baseQueue=k,u.lastRenderedState=h}if(r=u.interleaved,r!==null){d=r;do g=d.lane,rt.lanes|=g,cs|=g,d=d.next;while(d!==r)}else d===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function rf(r){var s=wn(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=r;var h=u.dispatch,d=u.pending,g=s.memoizedState;if(d!==null){u.pending=null;var E=d=d.next;do g=r(g,E.action),E=E.next;while(E!==d);Vn(g,s.memoizedState)||(Zt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),u.lastRenderedState=g}return[g,h]}function Cm(){}function Rm(r,s){var u=rt,h=wn(),d=s(),g=!Vn(h.memoizedState,d);if(g&&(h.memoizedState=d,Zt=!0),h=h.queue,sf(km.bind(null,u,h,r),[r]),h.getSnapshot!==s||g||Tt!==null&&Tt.memoizedState.tag&1){if(u.flags|=2048,ba(9,Pm.bind(null,u,h,d,s),void 0,null),It===null)throw Error(t(349));ls&30||Am(u,s,d)}return d}function Am(r,s,u){r.flags|=16384,r={getSnapshot:s,value:u},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.stores=[r]):(u=s.stores,u===null?s.stores=[r]:u.push(r))}function Pm(r,s,u,h){s.value=u,s.getSnapshot=h,xm(s)&&Dm(r)}function km(r,s,u){return u(function(){xm(s)&&Dm(r)})}function xm(r){var s=r.getSnapshot;r=r.value;try{var u=s();return!Vn(r,u)}catch{return!0}}function Dm(r){var s=Ar(r,1);s!==null&&zn(s,r,1,-1)}function Nm(r){var s=nr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:r},s.queue=r,r=r.dispatch=iT.bind(null,rt,r),[s.memoizedState,r]}function ba(r,s,u,h){return r={tag:r,create:s,destroy:u,deps:h,next:null},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.lastEffect=r.next=r):(u=s.lastEffect,u===null?s.lastEffect=r.next=r:(h=u.next,u.next=r,r.next=h,s.lastEffect=r)),r}function Om(){return wn().memoizedState}function _l(r,s,u,h){var d=nr();rt.flags|=r,d.memoizedState=ba(1|s,u,void 0,h===void 0?null:h)}function vl(r,s,u,h){var d=wn();h=h===void 0?null:h;var g=void 0;if(gt!==null){var E=gt.memoizedState;if(g=E.destroy,h!==null&&Zh(h,E.deps)){d.memoizedState=ba(s,u,g,h);return}}rt.flags|=r,d.memoizedState=ba(1|s,u,g,h)}function Lm(r,s){return _l(8390656,8,r,s)}function sf(r,s){return vl(2048,8,r,s)}function bm(r,s){return vl(4,2,r,s)}function Vm(r,s){return vl(4,4,r,s)}function Mm(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Fm(r,s,u){return u=u!=null?u.concat([r]):null,vl(4,4,Mm.bind(null,s,r),u)}function of(){}function Um(r,s){var u=wn();s=s===void 0?null:s;var h=u.memoizedState;return h!==null&&s!==null&&Zh(s,h[1])?h[0]:(u.memoizedState=[r,s],r)}function jm(r,s){var u=wn();s=s===void 0?null:s;var h=u.memoizedState;return h!==null&&s!==null&&Zh(s,h[1])?h[0]:(r=r(),u.memoizedState=[r,s],r)}function zm(r,s,u){return ls&21?(Vn(u,s)||(u=Xi(),rt.lanes|=u,cs|=u,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,Zt=!0),r.memoizedState=u)}function nT(r,s){var u=xe;xe=u!==0&&4>u?u:4,r(!0);var h=Xh.transition;Xh.transition={};try{r(!1),s()}finally{xe=u,Xh.transition=h}}function $m(){return wn().memoizedState}function rT(r,s,u){var h=fi(r);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},Bm(r))qm(s,u);else if(u=Em(r,s,u,h),u!==null){var d=Ht();zn(u,r,h,d),Hm(u,s,h)}}function iT(r,s,u){var h=fi(r),d={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(Bm(r))qm(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,C=g(E,u);if(d.hasEagerState=!0,d.eagerState=C,Vn(C,E)){var k=s.interleaved;k===null?(d.next=d,Wh(s)):(d.next=k.next,k.next=d),s.interleaved=d;return}}catch{}finally{}u=Em(r,s,d,h),u!==null&&(d=Ht(),zn(u,r,h,d),Hm(u,s,h))}}function Bm(r){var s=r.alternate;return r===rt||s!==null&&s===rt}function qm(r,s){Na=yl=!0;var u=r.pending;u===null?s.next=s:(s.next=u.next,u.next=s),r.pending=s}function Hm(r,s,u){if(u&4194240){var h=s.lanes;h&=r.pendingLanes,u|=h,s.lanes=u,Jr(r,u)}}var El={readContext:En,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},sT={readContext:En,useCallback:function(r,s){return nr().memoizedState=[r,s===void 0?null:s],r},useContext:En,useEffect:Lm,useImperativeHandle:function(r,s,u){return u=u!=null?u.concat([r]):null,_l(4194308,4,Mm.bind(null,s,r),u)},useLayoutEffect:function(r,s){return _l(4194308,4,r,s)},useInsertionEffect:function(r,s){return _l(4,2,r,s)},useMemo:function(r,s){var u=nr();return s=s===void 0?null:s,r=r(),u.memoizedState=[r,s],r},useReducer:function(r,s,u){var h=nr();return s=u!==void 0?u(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=rT.bind(null,rt,r),[h.memoizedState,r]},useRef:function(r){var s=nr();return r={current:r},s.memoizedState=r},useState:Nm,useDebugValue:of,useDeferredValue:function(r){return nr().memoizedState=r},useTransition:function(){var r=Nm(!1),s=r[0];return r=nT.bind(null,r[1]),nr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,u){var h=rt,d=nr();if(Ze){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),It===null)throw Error(t(349));ls&30||Am(h,s,u)}d.memoizedState=u;var g={value:u,getSnapshot:s};return d.queue=g,Lm(km.bind(null,h,g,r),[r]),h.flags|=2048,ba(9,Pm.bind(null,h,g,u,s),void 0,null),u},useId:function(){var r=nr(),s=It.identifierPrefix;if(Ze){var u=Rr,h=Cr;u=(h&~(1<<32-$t(h)-1)).toString(32)+u,s=":"+s+"R"+u,u=Oa++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=tT++,s=":"+s+"r"+u.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},oT={readContext:En,useCallback:Um,useContext:En,useEffect:sf,useImperativeHandle:Fm,useInsertionEffect:bm,useLayoutEffect:Vm,useMemo:jm,useReducer:nf,useRef:Om,useState:function(){return nf(La)},useDebugValue:of,useDeferredValue:function(r){var s=wn();return zm(s,gt.memoizedState,r)},useTransition:function(){var r=nf(La)[0],s=wn().memoizedState;return[r,s]},useMutableSource:Cm,useSyncExternalStore:Rm,useId:$m,unstable_isNewReconciler:!1},aT={readContext:En,useCallback:Um,useContext:En,useEffect:sf,useImperativeHandle:Fm,useInsertionEffect:bm,useLayoutEffect:Vm,useMemo:jm,useReducer:rf,useRef:Om,useState:function(){return rf(La)},useDebugValue:of,useDeferredValue:function(r){var s=wn();return gt===null?s.memoizedState=r:zm(s,gt.memoizedState,r)},useTransition:function(){var r=rf(La)[0],s=wn().memoizedState;return[r,s]},useMutableSource:Cm,useSyncExternalStore:Rm,useId:$m,unstable_isNewReconciler:!1};function Fn(r,s){if(r&&r.defaultProps){s=re({},s),r=r.defaultProps;for(var u in r)s[u]===void 0&&(s[u]=r[u]);return s}return s}function af(r,s,u,h){s=r.memoizedState,u=u(h,s),u=u==null?s:re({},s,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var wl={isMounted:function(r){return(r=r._reactInternals)?kn(r)===r:!1},enqueueSetState:function(r,s,u){r=r._reactInternals;var h=Ht(),d=fi(r),g=Pr(h,d);g.payload=s,u!=null&&(g.callback=u),s=ui(r,g,d),s!==null&&(zn(s,r,d,h),dl(s,r,d))},enqueueReplaceState:function(r,s,u){r=r._reactInternals;var h=Ht(),d=fi(r),g=Pr(h,d);g.tag=1,g.payload=s,u!=null&&(g.callback=u),s=ui(r,g,d),s!==null&&(zn(s,r,d,h),dl(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var u=Ht(),h=fi(r),d=Pr(u,h);d.tag=2,s!=null&&(d.callback=s),s=ui(r,d,h),s!==null&&(zn(s,r,h,u),dl(s,r,h))}};function Wm(r,s,u,h,d,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,E):s.prototype&&s.prototype.isPureReactComponent?!wa(u,h)||!wa(d,g):!0}function Km(r,s,u){var h=!1,d=si,g=s.contextType;return typeof g=="object"&&g!==null?g=En(g):(d=Xt(s)?is:Lt.current,h=s.contextTypes,g=(h=h!=null)?lo(r,d):si),s=new s(u,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=wl,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=g),s}function Qm(r,s,u,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,h),s.state!==r&&wl.enqueueReplaceState(s,s.state,null)}function uf(r,s,u,h){var d=r.stateNode;d.props=u,d.state=r.memoizedState,d.refs={},Kh(r);var g=s.contextType;typeof g=="object"&&g!==null?d.context=En(g):(g=Xt(s)?is:Lt.current,d.context=lo(r,g)),d.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(af(r,s,g,u),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&wl.enqueueReplaceState(d,d.state,null),pl(r,u,d,h),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function _o(r,s){try{var u="",h=s;do u+=Re(h),h=h.return;while(h);var d=u}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:d,digest:null}}function lf(r,s,u){return{value:r,source:null,stack:u??null,digest:s??null}}function cf(r,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var uT=typeof WeakMap=="function"?WeakMap:Map;function Gm(r,s,u){u=Pr(-1,u),u.tag=3,u.payload={element:null};var h=s.value;return u.callback=function(){Pl||(Pl=!0,Cf=h),cf(r,s)},u}function Ym(r,s,u){u=Pr(-1,u),u.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=s.value;u.payload=function(){return h(d)},u.callback=function(){cf(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(u.callback=function(){cf(r,s),typeof h!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),u}function Jm(r,s,u){var h=r.pingCache;if(h===null){h=r.pingCache=new uT;var d=new Set;h.set(s,d)}else d=h.get(s),d===void 0&&(d=new Set,h.set(s,d));d.has(u)||(d.add(u),r=TT.bind(null,r,s,u),s.then(r,r))}function Xm(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Zm(r,s,u,h,d){return r.mode&1?(r.flags|=65536,r.lanes=d,r):(r===s?r.flags|=65536:(r.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=Pr(-1,1),s.tag=2,ui(u,s,1))),u.lanes|=1),r)}var lT=ue.ReactCurrentOwner,Zt=!1;function qt(r,s,u,h){s.child=r===null?vm(s,null,u,h):po(s,r.child,u,h)}function eg(r,s,u,h,d){u=u.render;var g=s.ref;return go(s,d),h=ef(r,s,u,h,g,d),u=tf(),r!==null&&!Zt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,kr(r,s,d)):(Ze&&u&&Mh(s),s.flags|=1,qt(r,s,h,d),s.child)}function tg(r,s,u,h,d){if(r===null){var g=u.type;return typeof g=="function"&&!Nf(g)&&g.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=g,ng(r,s,g,h,d)):(r=Ll(u.type,null,h,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!(r.lanes&d)){var E=g.memoizedProps;if(u=u.compare,u=u!==null?u:wa,u(E,h)&&r.ref===s.ref)return kr(r,s,d)}return s.flags|=1,r=pi(g,h),r.ref=s.ref,r.return=s,s.child=r}function ng(r,s,u,h,d){if(r!==null){var g=r.memoizedProps;if(wa(g,h)&&r.ref===s.ref)if(Zt=!1,s.pendingProps=h=g,(r.lanes&d)!==0)r.flags&131072&&(Zt=!0);else return s.lanes=r.lanes,kr(r,s,d)}return hf(r,s,u,h,d)}function rg(r,s,u){var h=s.pendingProps,d=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Eo,fn),fn|=u;else{if(!(u&1073741824))return r=g!==null?g.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Qe(Eo,fn),fn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:u,Qe(Eo,fn),fn|=h}else g!==null?(h=g.baseLanes|u,s.memoizedState=null):h=u,Qe(Eo,fn),fn|=h;return qt(r,s,d,u),s.child}function ig(r,s){var u=s.ref;(r===null&&u!==null||r!==null&&r.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function hf(r,s,u,h,d){var g=Xt(u)?is:Lt.current;return g=lo(s,g),go(s,d),u=ef(r,s,u,h,g,d),h=tf(),r!==null&&!Zt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,kr(r,s,d)):(Ze&&h&&Mh(s),s.flags|=1,qt(r,s,u,d),s.child)}function sg(r,s,u,h,d){if(Xt(u)){var g=!0;sl(s)}else g=!1;if(go(s,d),s.stateNode===null)Il(r,s),Km(s,u,h),uf(s,u,h,d),h=!0;else if(r===null){var E=s.stateNode,C=s.memoizedProps;E.props=C;var k=E.context,$=u.contextType;typeof $=="object"&&$!==null?$=En($):($=Xt(u)?is:Lt.current,$=lo(s,$));var J=u.getDerivedStateFromProps,Z=typeof J=="function"||typeof E.getSnapshotBeforeUpdate=="function";Z||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==h||k!==$)&&Qm(s,E,h,$),ai=!1;var Y=s.memoizedState;E.state=Y,pl(s,h,E,d),k=s.memoizedState,C!==h||Y!==k||Jt.current||ai?(typeof J=="function"&&(af(s,u,J,h),k=s.memoizedState),(C=ai||Wm(s,u,C,h,Y,k,$))?(Z||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=k),E.props=h,E.state=k,E.context=$,h=C):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{E=s.stateNode,wm(r,s),C=s.memoizedProps,$=s.type===s.elementType?C:Fn(s.type,C),E.props=$,Z=s.pendingProps,Y=E.context,k=u.contextType,typeof k=="object"&&k!==null?k=En(k):(k=Xt(u)?is:Lt.current,k=lo(s,k));var ie=u.getDerivedStateFromProps;(J=typeof ie=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==Z||Y!==k)&&Qm(s,E,h,k),ai=!1,Y=s.memoizedState,E.state=Y,pl(s,h,E,d);var le=s.memoizedState;C!==Z||Y!==le||Jt.current||ai?(typeof ie=="function"&&(af(s,u,ie,h),le=s.memoizedState),($=ai||Wm(s,u,$,h,Y,le,k)||!1)?(J||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,le,k),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,le,k)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=le),E.props=h,E.state=le,E.context=k,h=$):(typeof E.componentDidUpdate!="function"||C===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),h=!1)}return ff(r,s,u,h,g,d)}function ff(r,s,u,h,d,g){ig(r,s);var E=(s.flags&128)!==0;if(!h&&!E)return d&&cm(s,u,!1),kr(r,s,g);h=s.stateNode,lT.current=s;var C=E&&typeof u.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&E?(s.child=po(s,r.child,null,g),s.child=po(s,null,C,g)):qt(r,s,C,g),s.memoizedState=h.state,d&&cm(s,u,!0),s.child}function og(r){var s=r.stateNode;s.pendingContext?um(r,s.pendingContext,s.pendingContext!==s.context):s.context&&um(r,s.context,!1),Qh(r,s.containerInfo)}function ag(r,s,u,h,d){return fo(),zh(d),s.flags|=256,qt(r,s,u,h),s.child}var df={dehydrated:null,treeContext:null,retryLane:0};function pf(r){return{baseLanes:r,cachePool:null,transitions:null}}function ug(r,s,u){var h=s.pendingProps,d=nt.current,g=!1,E=(s.flags&128)!==0,C;if((C=E)||(C=r!==null&&r.memoizedState===null?!1:(d&2)!==0),C?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),Qe(nt,d&1),r===null)return jh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(E=h.children,r=h.fallback,g?(h=s.mode,g=s.child,E={mode:"hidden",children:E},!(h&1)&&g!==null?(g.childLanes=0,g.pendingProps=E):g=bl(E,h,0,null),r=ps(r,h,u,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=pf(u),s.memoizedState=df,r):mf(s,E));if(d=r.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return cT(r,s,E,h,C,d,u);if(g){g=h.fallback,E=s.mode,d=r.child,C=d.sibling;var k={mode:"hidden",children:h.children};return!(E&1)&&s.child!==d?(h=s.child,h.childLanes=0,h.pendingProps=k,s.deletions=null):(h=pi(d,k),h.subtreeFlags=d.subtreeFlags&14680064),C!==null?g=pi(C,g):(g=ps(g,E,u,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,E=r.child.memoizedState,E=E===null?pf(u):{baseLanes:E.baseLanes|u,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=r.childLanes&~u,s.memoizedState=df,h}return g=r.child,r=g.sibling,h=pi(g,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=u),h.return=s,h.sibling=null,r!==null&&(u=s.deletions,u===null?(s.deletions=[r],s.flags|=16):u.push(r)),s.child=h,s.memoizedState=null,h}function mf(r,s){return s=bl({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Tl(r,s,u,h){return h!==null&&zh(h),po(s,r.child,null,u),r=mf(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function cT(r,s,u,h,d,g,E){if(u)return s.flags&256?(s.flags&=-257,h=lf(Error(t(422))),Tl(r,s,E,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,d=s.mode,h=bl({mode:"visible",children:h.children},d,0,null),g=ps(g,d,E,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,s.mode&1&&po(s,r.child,null,E),s.child.memoizedState=pf(E),s.memoizedState=df,g);if(!(s.mode&1))return Tl(r,s,E,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var C=h.dgst;return h=C,g=Error(t(419)),h=lf(g,h,void 0),Tl(r,s,E,h)}if(C=(E&r.childLanes)!==0,Zt||C){if(h=It,h!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(h.suspendedLanes|E)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Ar(r,d),zn(h,r,d,-1))}return Df(),h=lf(Error(t(421))),Tl(r,s,E,h)}return d.data==="$?"?(s.flags|=128,s.child=r.child,s=IT.bind(null,r),d._reactRetry=s,null):(r=g.treeContext,hn=ri(d.nextSibling),cn=s,Ze=!0,Mn=null,r!==null&&(_n[vn++]=Cr,_n[vn++]=Rr,_n[vn++]=ss,Cr=r.id,Rr=r.overflow,ss=s),s=mf(s,h.children),s.flags|=4096,s)}function lg(r,s,u){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),Hh(r.return,s,u)}function gf(r,s,u,h,d){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=u,g.tailMode=d)}function cg(r,s,u){var h=s.pendingProps,d=h.revealOrder,g=h.tail;if(qt(r,s,h.children,u),h=nt.current,h&2)h=h&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&lg(r,u,s);else if(r.tag===19)lg(r,u,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Qe(nt,h),!(s.mode&1))s.memoizedState=null;else switch(d){case"forwards":for(u=s.child,d=null;u!==null;)r=u.alternate,r!==null&&ml(r)===null&&(d=u),u=u.sibling;u=d,u===null?(d=s.child,s.child=null):(d=u.sibling,u.sibling=null),gf(s,!1,d,u,g);break;case"backwards":for(u=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&ml(r)===null){s.child=d;break}r=d.sibling,d.sibling=u,u=d,d=r}gf(s,!0,u,null,g);break;case"together":gf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Il(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function kr(r,s,u){if(r!==null&&(s.dependencies=r.dependencies),cs|=s.lanes,!(u&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,u=pi(r,r.pendingProps),s.child=u,u.return=s;r.sibling!==null;)r=r.sibling,u=u.sibling=pi(r,r.pendingProps),u.return=s;u.sibling=null}return s.child}function hT(r,s,u){switch(s.tag){case 3:og(s),fo();break;case 5:Sm(s);break;case 1:Xt(s.type)&&sl(s);break;case 4:Qh(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,d=s.memoizedProps.value;Qe(hl,h._currentValue),h._currentValue=d;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Qe(nt,nt.current&1),s.flags|=128,null):u&s.child.childLanes?ug(r,s,u):(Qe(nt,nt.current&1),r=kr(r,s,u),r!==null?r.sibling:null);Qe(nt,nt.current&1);break;case 19:if(h=(u&s.childLanes)!==0,r.flags&128){if(h)return cg(r,s,u);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(nt,nt.current),h)break;return null;case 22:case 23:return s.lanes=0,rg(r,s,u)}return kr(r,s,u)}var hg,yf,fg,dg;hg=function(r,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)r.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},yf=function(){},fg=function(r,s,u,h){var d=r.memoizedProps;if(d!==h){r=s.stateNode,us(tr.current);var g=null;switch(u){case"input":d=zi(r,d),h=zi(r,h),g=[];break;case"select":d=re({},d,{value:void 0}),h=re({},h,{value:void 0}),g=[];break;case"textarea":d=Yo(r,d),h=Yo(r,h),g=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=nl)}na(u,h);var E;u=null;for($ in d)if(!h.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var C=d[$];for(E in C)C.hasOwnProperty(E)&&(u||(u={}),u[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in h){var k=h[$];if(C=d!=null?d[$]:void 0,h.hasOwnProperty($)&&k!==C&&(k!=null||C!=null))if($==="style")if(C){for(E in C)!C.hasOwnProperty(E)||k&&k.hasOwnProperty(E)||(u||(u={}),u[E]="");for(E in k)k.hasOwnProperty(E)&&C[E]!==k[E]&&(u||(u={}),u[E]=k[E])}else u||(g||(g=[]),g.push($,u)),u=k;else $==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,C=C?C.__html:void 0,k!=null&&C!==k&&(g=g||[]).push($,k)):$==="children"?typeof k!="string"&&typeof k!="number"||(g=g||[]).push($,""+k):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(k!=null&&$==="onScroll"&&Ge("scroll",r),g||C===k||(g=[])):(g=g||[]).push($,k))}u&&(g=g||[]).push("style",u);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},dg=function(r,s,u,h){u!==h&&(s.flags|=4)};function Va(r,s){if(!Ze)switch(r.tailMode){case"hidden":s=r.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Vt(r){var s=r.alternate!==null&&r.alternate.child===r.child,u=0,h=0;if(s)for(var d=r.child;d!==null;)u|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)u|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=h,r.childLanes=u,s}function fT(r,s,u){var h=s.pendingProps;switch(Fh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(s),null;case 1:return Xt(s.type)&&il(),Vt(s),null;case 3:return h=s.stateNode,yo(),Ye(Jt),Ye(Lt),Jh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(ll(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Mn!==null&&(Pf(Mn),Mn=null))),yf(r,s),Vt(s),null;case 5:Gh(s);var d=us(Da.current);if(u=s.type,r!==null&&s.stateNode!=null)fg(r,s,u,h,d),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Vt(s),null}if(r=us(tr.current),ll(s)){h=s.stateNode,u=s.type;var g=s.memoizedProps;switch(h[er]=s,h[Ra]=g,r=(s.mode&1)!==0,u){case"dialog":Ge("cancel",h),Ge("close",h);break;case"iframe":case"object":case"embed":Ge("load",h);break;case"video":case"audio":for(d=0;d<Ia.length;d++)Ge(Ia[d],h);break;case"source":Ge("error",h);break;case"img":case"image":case"link":Ge("error",h),Ge("load",h);break;case"details":Ge("toggle",h);break;case"input":Ds(h,g),Ge("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Ge("invalid",h);break;case"textarea":Os(h,g),Ge("invalid",h)}na(u,g),d=null;for(var E in g)if(g.hasOwnProperty(E)){var C=g[E];E==="children"?typeof C=="string"?h.textContent!==C&&(g.suppressHydrationWarning!==!0&&tl(h.textContent,C,r),d=["children",C]):typeof C=="number"&&h.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&tl(h.textContent,C,r),d=["children",""+C]):o.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&Ge("scroll",h)}switch(u){case"input":dr(h),Au(h,g,!0);break;case"textarea":dr(h),Jo(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=nl)}h=d,s.updateQueue=h,h!==null&&(s.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=dt(u)),r==="http://www.w3.org/1999/xhtml"?u==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=E.createElement(u,{is:h.is}):(r=E.createElement(u),u==="select"&&(E=r,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):r=E.createElementNS(r,u),r[er]=s,r[Ra]=h,hg(r,s,!1,!1),s.stateNode=r;e:{switch(E=ra(u,h),u){case"dialog":Ge("cancel",r),Ge("close",r),d=h;break;case"iframe":case"object":case"embed":Ge("load",r),d=h;break;case"video":case"audio":for(d=0;d<Ia.length;d++)Ge(Ia[d],r);d=h;break;case"source":Ge("error",r),d=h;break;case"img":case"image":case"link":Ge("error",r),Ge("load",r),d=h;break;case"details":Ge("toggle",r),d=h;break;case"input":Ds(r,h),d=zi(r,h),Ge("invalid",r);break;case"option":d=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},d=re({},h,{value:void 0}),Ge("invalid",r);break;case"textarea":Os(r,h),d=Yo(r,h),Ge("invalid",r);break;default:d=h}na(u,d),C=d;for(g in C)if(C.hasOwnProperty(g)){var k=C[g];g==="style"?ea(r,k):g==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Xo(r,k)):g==="children"?typeof k=="string"?(u!=="textarea"||k!=="")&&Wr(r,k):typeof k=="number"&&Wr(r,""+k):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?k!=null&&g==="onScroll"&&Ge("scroll",r):k!=null&&G(r,g,k,E))}switch(u){case"input":dr(r),Au(r,h,!1);break;case"textarea":dr(r),Jo(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Ue(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?mr(r,!!h.multiple,g,!1):h.defaultValue!=null&&mr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=nl)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Vt(s),null;case 6:if(r&&s.stateNode!=null)dg(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(u=us(Da.current),us(tr.current),ll(s)){if(h=s.stateNode,u=s.memoizedProps,h[er]=s,(g=h.nodeValue!==u)&&(r=cn,r!==null))switch(r.tag){case 3:tl(h.nodeValue,u,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&tl(h.nodeValue,u,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[er]=s,s.stateNode=h}return Vt(s),null;case 13:if(Ye(nt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ze&&hn!==null&&s.mode&1&&!(s.flags&128))gm(),fo(),s.flags|=98560,g=!1;else if(g=ll(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[er]=s}else fo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Vt(s),g=!1}else Mn!==null&&(Pf(Mn),Mn=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=u,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(r===null||nt.current&1?yt===0&&(yt=3):Df())),s.updateQueue!==null&&(s.flags|=4),Vt(s),null);case 4:return yo(),yf(r,s),r===null&&Sa(s.stateNode.containerInfo),Vt(s),null;case 10:return qh(s.type._context),Vt(s),null;case 17:return Xt(s.type)&&il(),Vt(s),null;case 19:if(Ye(nt),g=s.memoizedState,g===null)return Vt(s),null;if(h=(s.flags&128)!==0,E=g.rendering,E===null)if(h)Va(g,!1);else{if(yt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(E=ml(r),E!==null){for(s.flags|=128,Va(g,!1),h=E.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=u,u=s.child;u!==null;)g=u,r=h,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,r=E.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),u=u.sibling;return Qe(nt,nt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Ke()>wo&&(s.flags|=128,h=!0,Va(g,!1),s.lanes=4194304)}else{if(!h)if(r=ml(E),r!==null){if(s.flags|=128,h=!0,u=r.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),Va(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Ze)return Vt(s),null}else 2*Ke()-g.renderingStartTime>wo&&u!==1073741824&&(s.flags|=128,h=!0,Va(g,!1),s.lanes=4194304);g.isBackwards?(E.sibling=s.child,s.child=E):(u=g.last,u!==null?u.sibling=E:s.child=E,g.last=E)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ke(),s.sibling=null,u=nt.current,Qe(nt,h?u&1|2:u&1),s):(Vt(s),null);case 22:case 23:return xf(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?fn&1073741824&&(Vt(s),s.subtreeFlags&6&&(s.flags|=8192)):Vt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function dT(r,s){switch(Fh(s),s.tag){case 1:return Xt(s.type)&&il(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return yo(),Ye(Jt),Ye(Lt),Jh(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return Gh(s),null;case 13:if(Ye(nt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));fo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ye(nt),null;case 4:return yo(),null;case 10:return qh(s.type._context),null;case 22:case 23:return xf(),null;case 24:return null;default:return null}}var Sl=!1,Mt=!1,pT=typeof WeakSet=="function"?WeakSet:Set,oe=null;function vo(r,s){var u=r.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){st(r,s,h)}else u.current=null}function _f(r,s,u){try{u()}catch(h){st(r,s,h)}}var pg=!1;function mT(r,s){if(kh=ei,r=Wp(),wh(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var d=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{u.nodeType,g.nodeType}catch{u=null;break e}var E=0,C=-1,k=-1,$=0,J=0,Z=r,Y=null;t:for(;;){for(var ie;Z!==u||d!==0&&Z.nodeType!==3||(C=E+d),Z!==g||h!==0&&Z.nodeType!==3||(k=E+h),Z.nodeType===3&&(E+=Z.nodeValue.length),(ie=Z.firstChild)!==null;)Y=Z,Z=ie;for(;;){if(Z===r)break t;if(Y===u&&++$===d&&(C=E),Y===g&&++J===h&&(k=E),(ie=Z.nextSibling)!==null)break;Z=Y,Y=Z.parentNode}Z=ie}u=C===-1||k===-1?null:{start:C,end:k}}else u=null}u=u||{start:0,end:0}}else u=null;for(xh={focusedElem:r,selectionRange:u},ei=!1,oe=s;oe!==null;)if(s=oe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,oe=r;else for(;oe!==null;){s=oe;try{var le=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ce=le.memoizedProps,at=le.memoizedState,j=s.stateNode,N=j.getSnapshotBeforeUpdate(s.elementType===s.type?ce:Fn(s.type,ce),at);j.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){st(s,s.return,ee)}if(r=s.sibling,r!==null){r.return=s.return,oe=r;break}oe=s.return}return le=pg,pg=!1,le}function Ma(r,s,u){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&r)===r){var g=d.destroy;d.destroy=void 0,g!==void 0&&_f(s,u,g)}d=d.next}while(d!==h)}}function Cl(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&r)===r){var h=u.create;u.destroy=h()}u=u.next}while(u!==s)}}function vf(r){var s=r.ref;if(s!==null){var u=r.stateNode;switch(r.tag){case 5:r=u;break;default:r=u}typeof s=="function"?s(r):s.current=r}}function mg(r){var s=r.alternate;s!==null&&(r.alternate=null,mg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[er],delete s[Ra],delete s[Lh],delete s[Jw],delete s[Xw])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function gg(r){return r.tag===5||r.tag===3||r.tag===4}function yg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||gg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ef(r,s,u){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(r,s):u.insertBefore(r,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(r,u)):(s=u,s.appendChild(r)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=nl));else if(h!==4&&(r=r.child,r!==null))for(Ef(r,s,u),r=r.sibling;r!==null;)Ef(r,s,u),r=r.sibling}function wf(r,s,u){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?u.insertBefore(r,s):u.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(wf(r,s,u),r=r.sibling;r!==null;)wf(r,s,u),r=r.sibling}var Pt=null,Un=!1;function li(r,s,u){for(u=u.child;u!==null;)_g(r,s,u),u=u.sibling}function _g(r,s,u){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Yi,u)}catch{}switch(u.tag){case 5:Mt||vo(u,s);case 6:var h=Pt,d=Un;Pt=null,li(r,s,u),Pt=h,Un=d,Pt!==null&&(Un?(r=Pt,u=u.stateNode,r.nodeType===8?r.parentNode.removeChild(u):r.removeChild(u)):Pt.removeChild(u.stateNode));break;case 18:Pt!==null&&(Un?(r=Pt,u=u.stateNode,r.nodeType===8?Oh(r.parentNode,u):r.nodeType===1&&Oh(r,u),Ln(r)):Oh(Pt,u.stateNode));break;case 4:h=Pt,d=Un,Pt=u.stateNode.containerInfo,Un=!0,li(r,s,u),Pt=h,Un=d;break;case 0:case 11:case 14:case 15:if(!Mt&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var g=d,E=g.destroy;g=g.tag,E!==void 0&&(g&2||g&4)&&_f(u,s,E),d=d.next}while(d!==h)}li(r,s,u);break;case 1:if(!Mt&&(vo(u,s),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(C){st(u,s,C)}li(r,s,u);break;case 21:li(r,s,u);break;case 22:u.mode&1?(Mt=(h=Mt)||u.memoizedState!==null,li(r,s,u),Mt=h):li(r,s,u);break;default:li(r,s,u)}}function vg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var u=r.stateNode;u===null&&(u=r.stateNode=new pT),s.forEach(function(h){var d=ST.bind(null,r,h);u.has(h)||(u.add(h),h.then(d,d))})}}function jn(r,s){var u=s.deletions;if(u!==null)for(var h=0;h<u.length;h++){var d=u[h];try{var g=r,E=s,C=E;e:for(;C!==null;){switch(C.tag){case 5:Pt=C.stateNode,Un=!1;break e;case 3:Pt=C.stateNode.containerInfo,Un=!0;break e;case 4:Pt=C.stateNode.containerInfo,Un=!0;break e}C=C.return}if(Pt===null)throw Error(t(160));_g(g,E,d),Pt=null,Un=!1;var k=d.alternate;k!==null&&(k.return=null),d.return=null}catch($){st(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Eg(s,r),s=s.sibling}function Eg(r,s){var u=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(jn(s,r),rr(r),h&4){try{Ma(3,r,r.return),Cl(3,r)}catch(ce){st(r,r.return,ce)}try{Ma(5,r,r.return)}catch(ce){st(r,r.return,ce)}}break;case 1:jn(s,r),rr(r),h&512&&u!==null&&vo(u,u.return);break;case 5:if(jn(s,r),rr(r),h&512&&u!==null&&vo(u,u.return),r.flags&32){var d=r.stateNode;try{Wr(d,"")}catch(ce){st(r,r.return,ce)}}if(h&4&&(d=r.stateNode,d!=null)){var g=r.memoizedProps,E=u!==null?u.memoizedProps:g,C=r.type,k=r.updateQueue;if(r.updateQueue=null,k!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&Qo(d,g),ra(C,E);var $=ra(C,g);for(E=0;E<k.length;E+=2){var J=k[E],Z=k[E+1];J==="style"?ea(d,Z):J==="dangerouslySetInnerHTML"?Xo(d,Z):J==="children"?Wr(d,Z):G(d,J,Z,$)}switch(C){case"input":Go(d,g);break;case"textarea":Ls(d,g);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var ie=g.value;ie!=null?mr(d,!!g.multiple,ie,!1):Y!==!!g.multiple&&(g.defaultValue!=null?mr(d,!!g.multiple,g.defaultValue,!0):mr(d,!!g.multiple,g.multiple?[]:"",!1))}d[Ra]=g}catch(ce){st(r,r.return,ce)}}break;case 6:if(jn(s,r),rr(r),h&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,g=r.memoizedProps;try{d.nodeValue=g}catch(ce){st(r,r.return,ce)}}break;case 3:if(jn(s,r),rr(r),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Ln(s.containerInfo)}catch(ce){st(r,r.return,ce)}break;case 4:jn(s,r),rr(r);break;case 13:jn(s,r),rr(r),d=r.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Sf=Ke())),h&4&&vg(r);break;case 22:if(J=u!==null&&u.memoizedState!==null,r.mode&1?(Mt=($=Mt)||J,jn(s,r),Mt=$):jn(s,r),rr(r),h&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!J&&r.mode&1)for(oe=r,J=r.child;J!==null;){for(Z=oe=J;oe!==null;){switch(Y=oe,ie=Y.child,Y.tag){case 0:case 11:case 14:case 15:Ma(4,Y,Y.return);break;case 1:vo(Y,Y.return);var le=Y.stateNode;if(typeof le.componentWillUnmount=="function"){h=Y,u=Y.return;try{s=h,le.props=s.memoizedProps,le.state=s.memoizedState,le.componentWillUnmount()}catch(ce){st(h,u,ce)}}break;case 5:vo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Ig(Z);continue}}ie!==null?(ie.return=Y,oe=ie):Ig(Z)}J=J.sibling}e:for(J=null,Z=r;;){if(Z.tag===5){if(J===null){J=Z;try{d=Z.stateNode,$?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=Z.stateNode,k=Z.memoizedProps.style,E=k!=null&&k.hasOwnProperty("display")?k.display:null,C.style.display=Zo("display",E))}catch(ce){st(r,r.return,ce)}}}else if(Z.tag===6){if(J===null)try{Z.stateNode.nodeValue=$?"":Z.memoizedProps}catch(ce){st(r,r.return,ce)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===r)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===r)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===r)break e;J===Z&&(J=null),Z=Z.return}J===Z&&(J=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:jn(s,r),rr(r),h&4&&vg(r);break;case 21:break;default:jn(s,r),rr(r)}}function rr(r){var s=r.flags;if(s&2){try{e:{for(var u=r.return;u!==null;){if(gg(u)){var h=u;break e}u=u.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(Wr(d,""),h.flags&=-33);var g=yg(r);wf(r,g,d);break;case 3:case 4:var E=h.stateNode.containerInfo,C=yg(r);Ef(r,C,E);break;default:throw Error(t(161))}}catch(k){st(r,r.return,k)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function gT(r,s,u){oe=r,wg(r)}function wg(r,s,u){for(var h=(r.mode&1)!==0;oe!==null;){var d=oe,g=d.child;if(d.tag===22&&h){var E=d.memoizedState!==null||Sl;if(!E){var C=d.alternate,k=C!==null&&C.memoizedState!==null||Mt;C=Sl;var $=Mt;if(Sl=E,(Mt=k)&&!$)for(oe=d;oe!==null;)E=oe,k=E.child,E.tag===22&&E.memoizedState!==null?Sg(d):k!==null?(k.return=E,oe=k):Sg(d);for(;g!==null;)oe=g,wg(g),g=g.sibling;oe=d,Sl=C,Mt=$}Tg(r)}else d.subtreeFlags&8772&&g!==null?(g.return=d,oe=g):Tg(r)}}function Tg(r){for(;oe!==null;){var s=oe;if(s.flags&8772){var u=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Mt||Cl(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Mt)if(u===null)h.componentDidMount();else{var d=s.elementType===s.type?u.memoizedProps:Fn(s.type,u.memoizedProps);h.componentDidUpdate(d,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Im(s,g,h);break;case 3:var E=s.updateQueue;if(E!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}Im(s,E,u)}break;case 5:var C=s.stateNode;if(u===null&&s.flags&4){u=C;var k=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&u.focus();break;case"img":k.src&&(u.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var J=$.memoizedState;if(J!==null){var Z=J.dehydrated;Z!==null&&Ln(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mt||s.flags&512&&vf(s)}catch(Y){st(s,s.return,Y)}}if(s===r){oe=null;break}if(u=s.sibling,u!==null){u.return=s.return,oe=u;break}oe=s.return}}function Ig(r){for(;oe!==null;){var s=oe;if(s===r){oe=null;break}var u=s.sibling;if(u!==null){u.return=s.return,oe=u;break}oe=s.return}}function Sg(r){for(;oe!==null;){var s=oe;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{Cl(4,s)}catch(k){st(s,u,k)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var d=s.return;try{h.componentDidMount()}catch(k){st(s,d,k)}}var g=s.return;try{vf(s)}catch(k){st(s,g,k)}break;case 5:var E=s.return;try{vf(s)}catch(k){st(s,E,k)}}}catch(k){st(s,s.return,k)}if(s===r){oe=null;break}var C=s.sibling;if(C!==null){C.return=s.return,oe=C;break}oe=s.return}}var yT=Math.ceil,Rl=ue.ReactCurrentDispatcher,Tf=ue.ReactCurrentOwner,Tn=ue.ReactCurrentBatchConfig,Ve=0,It=null,ct=null,kt=0,fn=0,Eo=ii(0),yt=0,Fa=null,cs=0,Al=0,If=0,Ua=null,en=null,Sf=0,wo=1/0,xr=null,Pl=!1,Cf=null,ci=null,kl=!1,hi=null,xl=0,ja=0,Rf=null,Dl=-1,Nl=0;function Ht(){return Ve&6?Ke():Dl!==-1?Dl:Dl=Ke()}function fi(r){return r.mode&1?Ve&2&&kt!==0?kt&-kt:eT.transition!==null?(Nl===0&&(Nl=Xi()),Nl):(r=xe,r!==0||(r=window.event,r=r===void 0?16:pa(r.type)),r):1}function zn(r,s,u,h){if(50<ja)throw ja=0,Rf=null,Error(t(185));Yr(r,u,h),(!(Ve&2)||r!==It)&&(r===It&&(!(Ve&2)&&(Al|=u),yt===4&&di(r,kt)),tn(r,h),u===1&&Ve===0&&!(s.mode&1)&&(wo=Ke()+500,ol&&oi()))}function tn(r,s){var u=r.callbackNode;_r(r,s);var h=Ji(r,r===It?kt:0);if(h===0)u!==null&&la(u),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(u!=null&&la(u),s===1)r.tag===0?Zw(Rg.bind(null,r)):hm(Rg.bind(null,r)),Gw(function(){!(Ve&6)&&oi()}),u=null;else{switch(Xr(h)){case 1:u=Gi;break;case 4:u=Kr;break;case 16:u=mn;break;case 536870912:u=Nu;break;default:u=mn}u=Lg(u,Cg.bind(null,r))}r.callbackPriority=s,r.callbackNode=u}}function Cg(r,s){if(Dl=-1,Nl=0,Ve&6)throw Error(t(327));var u=r.callbackNode;if(To()&&r.callbackNode!==u)return null;var h=Ji(r,r===It?kt:0);if(h===0)return null;if(h&30||h&r.expiredLanes||s)s=Ol(r,h);else{s=h;var d=Ve;Ve|=2;var g=Pg();(It!==r||kt!==s)&&(xr=null,wo=Ke()+500,fs(r,s));do try{ET();break}catch(C){Ag(r,C)}while(!0);Bh(),Rl.current=g,Ve=d,ct!==null?s=0:(It=null,kt=0,s=yt)}if(s!==0){if(s===2&&(d=an(r),d!==0&&(h=d,s=Af(r,d))),s===1)throw u=Fa,fs(r,0),di(r,h),tn(r,Ke()),u;if(s===6)di(r,h);else{if(d=r.current.alternate,!(h&30)&&!_T(d)&&(s=Ol(r,h),s===2&&(g=an(r),g!==0&&(h=g,s=Af(r,g))),s===1))throw u=Fa,fs(r,0),di(r,h),tn(r,Ke()),u;switch(r.finishedWork=d,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ds(r,en,xr);break;case 3:if(di(r,h),(h&130023424)===h&&(s=Sf+500-Ke(),10<s)){if(Ji(r,0)!==0)break;if(d=r.suspendedLanes,(d&h)!==h){Ht(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=Nh(ds.bind(null,r,en,xr),s);break}ds(r,en,xr);break;case 4:if(di(r,h),(h&4194240)===h)break;for(s=r.eventTimes,d=-1;0<h;){var E=31-$t(h);g=1<<E,E=s[E],E>d&&(d=E),h&=~g}if(h=d,h=Ke()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*yT(h/1960))-h,10<h){r.timeoutHandle=Nh(ds.bind(null,r,en,xr),h);break}ds(r,en,xr);break;case 5:ds(r,en,xr);break;default:throw Error(t(329))}}}return tn(r,Ke()),r.callbackNode===u?Cg.bind(null,r):null}function Af(r,s){var u=Ua;return r.current.memoizedState.isDehydrated&&(fs(r,s).flags|=256),r=Ol(r,s),r!==2&&(s=en,en=u,s!==null&&Pf(s)),r}function Pf(r){en===null?en=r:en.push.apply(en,r)}function _T(r){for(var s=r;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var d=u[h],g=d.getSnapshot;d=d.value;try{if(!Vn(g(),d))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function di(r,s){for(s&=~If,s&=~Al,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var u=31-$t(s),h=1<<u;r[u]=-1,s&=~h}}function Rg(r){if(Ve&6)throw Error(t(327));To();var s=Ji(r,0);if(!(s&1))return tn(r,Ke()),null;var u=Ol(r,s);if(r.tag!==0&&u===2){var h=an(r);h!==0&&(s=h,u=Af(r,h))}if(u===1)throw u=Fa,fs(r,0),di(r,s),tn(r,Ke()),u;if(u===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ds(r,en,xr),tn(r,Ke()),null}function kf(r,s){var u=Ve;Ve|=1;try{return r(s)}finally{Ve=u,Ve===0&&(wo=Ke()+500,ol&&oi())}}function hs(r){hi!==null&&hi.tag===0&&!(Ve&6)&&To();var s=Ve;Ve|=1;var u=Tn.transition,h=xe;try{if(Tn.transition=null,xe=1,r)return r()}finally{xe=h,Tn.transition=u,Ve=s,!(Ve&6)&&oi()}}function xf(){fn=Eo.current,Ye(Eo)}function fs(r,s){r.finishedWork=null,r.finishedLanes=0;var u=r.timeoutHandle;if(u!==-1&&(r.timeoutHandle=-1,Qw(u)),ct!==null)for(u=ct.return;u!==null;){var h=u;switch(Fh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&il();break;case 3:yo(),Ye(Jt),Ye(Lt),Jh();break;case 5:Gh(h);break;case 4:yo();break;case 13:Ye(nt);break;case 19:Ye(nt);break;case 10:qh(h.type._context);break;case 22:case 23:xf()}u=u.return}if(It=r,ct=r=pi(r.current,null),kt=fn=s,yt=0,Fa=null,If=Al=cs=0,en=Ua=null,as!==null){for(s=0;s<as.length;s++)if(u=as[s],h=u.interleaved,h!==null){u.interleaved=null;var d=h.next,g=u.pending;if(g!==null){var E=g.next;g.next=d,h.next=E}u.pending=h}as=null}return r}function Ag(r,s){do{var u=ct;try{if(Bh(),gl.current=El,yl){for(var h=rt.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}yl=!1}if(ls=0,Tt=gt=rt=null,Na=!1,Oa=0,Tf.current=null,u===null||u.return===null){yt=1,Fa=s,ct=null;break}e:{var g=r,E=u.return,C=u,k=s;if(s=kt,C.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var $=k,J=C,Z=J.tag;if(!(J.mode&1)&&(Z===0||Z===11||Z===15)){var Y=J.alternate;Y?(J.updateQueue=Y.updateQueue,J.memoizedState=Y.memoizedState,J.lanes=Y.lanes):(J.updateQueue=null,J.memoizedState=null)}var ie=Xm(E);if(ie!==null){ie.flags&=-257,Zm(ie,E,C,g,s),ie.mode&1&&Jm(g,$,s),s=ie,k=$;var le=s.updateQueue;if(le===null){var ce=new Set;ce.add(k),s.updateQueue=ce}else le.add(k);break e}else{if(!(s&1)){Jm(g,$,s),Df();break e}k=Error(t(426))}}else if(Ze&&C.mode&1){var at=Xm(E);if(at!==null){!(at.flags&65536)&&(at.flags|=256),Zm(at,E,C,g,s),zh(_o(k,C));break e}}g=k=_o(k,C),yt!==4&&(yt=2),Ua===null?Ua=[g]:Ua.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var j=Gm(g,k,s);Tm(g,j);break e;case 1:C=k;var N=g.type,z=g.stateNode;if(!(g.flags&128)&&(typeof N.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ci===null||!ci.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var ee=Ym(g,C,s);Tm(g,ee);break e}}g=g.return}while(g!==null)}xg(u)}catch(fe){s=fe,ct===u&&u!==null&&(ct=u=u.return);continue}break}while(!0)}function Pg(){var r=Rl.current;return Rl.current=El,r===null?El:r}function Df(){(yt===0||yt===3||yt===2)&&(yt=4),It===null||!(cs&268435455)&&!(Al&268435455)||di(It,kt)}function Ol(r,s){var u=Ve;Ve|=2;var h=Pg();(It!==r||kt!==s)&&(xr=null,fs(r,s));do try{vT();break}catch(d){Ag(r,d)}while(!0);if(Bh(),Ve=u,Rl.current=h,ct!==null)throw Error(t(261));return It=null,kt=0,yt}function vT(){for(;ct!==null;)kg(ct)}function ET(){for(;ct!==null&&!xu();)kg(ct)}function kg(r){var s=Og(r.alternate,r,fn);r.memoizedProps=r.pendingProps,s===null?xg(r):ct=s,Tf.current=null}function xg(r){var s=r;do{var u=s.alternate;if(r=s.return,s.flags&32768){if(u=dT(u,s),u!==null){u.flags&=32767,ct=u;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{yt=6,ct=null;return}}else if(u=fT(u,s,fn),u!==null){ct=u;return}if(s=s.sibling,s!==null){ct=s;return}ct=s=r}while(s!==null);yt===0&&(yt=5)}function ds(r,s,u){var h=xe,d=Tn.transition;try{Tn.transition=null,xe=1,wT(r,s,u,h)}finally{Tn.transition=d,xe=h}return null}function wT(r,s,u,h){do To();while(hi!==null);if(Ve&6)throw Error(t(327));u=r.finishedWork;var d=r.finishedLanes;if(u===null)return null;if(r.finishedWork=null,r.finishedLanes=0,u===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=u.lanes|u.childLanes;if(He(r,g),r===It&&(ct=It=null,kt=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||kl||(kl=!0,Lg(mn,function(){return To(),null})),g=(u.flags&15990)!==0,u.subtreeFlags&15990||g){g=Tn.transition,Tn.transition=null;var E=xe;xe=1;var C=Ve;Ve|=4,Tf.current=null,mT(r,u),Eg(u,r),zw(xh),ei=!!kh,xh=kh=null,r.current=u,gT(u),dh(),Ve=C,xe=E,Tn.transition=g}else r.current=u;if(kl&&(kl=!1,hi=r,xl=d),g=r.pendingLanes,g===0&&(ci=null),Ou(u.stateNode),tn(r,Ke()),s!==null)for(h=r.onRecoverableError,u=0;u<s.length;u++)d=s[u],h(d.value,{componentStack:d.stack,digest:d.digest});if(Pl)throw Pl=!1,r=Cf,Cf=null,r;return xl&1&&r.tag!==0&&To(),g=r.pendingLanes,g&1?r===Rf?ja++:(ja=0,Rf=r):ja=0,oi(),null}function To(){if(hi!==null){var r=Xr(xl),s=Tn.transition,u=xe;try{if(Tn.transition=null,xe=16>r?16:r,hi===null)var h=!1;else{if(r=hi,hi=null,xl=0,Ve&6)throw Error(t(331));var d=Ve;for(Ve|=4,oe=r.current;oe!==null;){var g=oe,E=g.child;if(oe.flags&16){var C=g.deletions;if(C!==null){for(var k=0;k<C.length;k++){var $=C[k];for(oe=$;oe!==null;){var J=oe;switch(J.tag){case 0:case 11:case 15:Ma(8,J,g)}var Z=J.child;if(Z!==null)Z.return=J,oe=Z;else for(;oe!==null;){J=oe;var Y=J.sibling,ie=J.return;if(mg(J),J===$){oe=null;break}if(Y!==null){Y.return=ie,oe=Y;break}oe=ie}}}var le=g.alternate;if(le!==null){var ce=le.child;if(ce!==null){le.child=null;do{var at=ce.sibling;ce.sibling=null,ce=at}while(ce!==null)}}oe=g}}if(g.subtreeFlags&2064&&E!==null)E.return=g,oe=E;else e:for(;oe!==null;){if(g=oe,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Ma(9,g,g.return)}var j=g.sibling;if(j!==null){j.return=g.return,oe=j;break e}oe=g.return}}var N=r.current;for(oe=N;oe!==null;){E=oe;var z=E.child;if(E.subtreeFlags&2064&&z!==null)z.return=E,oe=z;else e:for(E=N;oe!==null;){if(C=oe,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:Cl(9,C)}}catch(fe){st(C,C.return,fe)}if(C===E){oe=null;break e}var ee=C.sibling;if(ee!==null){ee.return=C.return,oe=ee;break e}oe=C.return}}if(Ve=d,oi(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Yi,r)}catch{}h=!0}return h}finally{xe=u,Tn.transition=s}}return!1}function Dg(r,s,u){s=_o(u,s),s=Gm(r,s,1),r=ui(r,s,1),s=Ht(),r!==null&&(Yr(r,1,s),tn(r,s))}function st(r,s,u){if(r.tag===3)Dg(r,r,u);else for(;s!==null;){if(s.tag===3){Dg(s,r,u);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ci===null||!ci.has(h))){r=_o(u,r),r=Ym(s,r,1),s=ui(s,r,1),r=Ht(),s!==null&&(Yr(s,1,r),tn(s,r));break}}s=s.return}}function TT(r,s,u){var h=r.pingCache;h!==null&&h.delete(s),s=Ht(),r.pingedLanes|=r.suspendedLanes&u,It===r&&(kt&u)===u&&(yt===4||yt===3&&(kt&130023424)===kt&&500>Ke()-Sf?fs(r,0):If|=u),tn(r,s)}function Ng(r,s){s===0&&(r.mode&1?(s=qs,qs<<=1,!(qs&130023424)&&(qs=4194304)):s=1);var u=Ht();r=Ar(r,s),r!==null&&(Yr(r,s,u),tn(r,u))}function IT(r){var s=r.memoizedState,u=0;s!==null&&(u=s.retryLane),Ng(r,u)}function ST(r,s){var u=0;switch(r.tag){case 13:var h=r.stateNode,d=r.memoizedState;d!==null&&(u=d.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Ng(r,u)}var Og;Og=function(r,s,u){if(r!==null)if(r.memoizedProps!==s.pendingProps||Jt.current)Zt=!0;else{if(!(r.lanes&u)&&!(s.flags&128))return Zt=!1,hT(r,s,u);Zt=!!(r.flags&131072)}else Zt=!1,Ze&&s.flags&1048576&&fm(s,ul,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Il(r,s),r=s.pendingProps;var d=lo(s,Lt.current);go(s,u),d=ef(null,s,h,r,d,u);var g=tf();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Xt(h)?(g=!0,sl(s)):g=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Kh(s),d.updater=wl,s.stateNode=d,d._reactInternals=s,uf(s,h,r,u),s=ff(null,s,h,!0,g,u)):(s.tag=0,Ze&&g&&Mh(s),qt(null,s,d,u),s=s.child),s;case 16:h=s.elementType;e:{switch(Il(r,s),r=s.pendingProps,d=h._init,h=d(h._payload),s.type=h,d=s.tag=RT(h),r=Fn(h,r),d){case 0:s=hf(null,s,h,r,u);break e;case 1:s=sg(null,s,h,r,u);break e;case 11:s=eg(null,s,h,r,u);break e;case 14:s=tg(null,s,h,Fn(h.type,r),u);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:Fn(h,d),hf(r,s,h,d,u);case 1:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:Fn(h,d),sg(r,s,h,d,u);case 3:e:{if(og(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,d=g.element,wm(r,s),pl(s,h,null,u);var E=s.memoizedState;if(h=E.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){d=_o(Error(t(423)),s),s=ag(r,s,h,u,d);break e}else if(h!==d){d=_o(Error(t(424)),s),s=ag(r,s,h,u,d);break e}else for(hn=ri(s.stateNode.containerInfo.firstChild),cn=s,Ze=!0,Mn=null,u=vm(s,null,h,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(fo(),h===d){s=kr(r,s,u);break e}qt(r,s,h,u)}s=s.child}return s;case 5:return Sm(s),r===null&&jh(s),h=s.type,d=s.pendingProps,g=r!==null?r.memoizedProps:null,E=d.children,Dh(h,d)?E=null:g!==null&&Dh(h,g)&&(s.flags|=32),ig(r,s),qt(r,s,E,u),s.child;case 6:return r===null&&jh(s),null;case 13:return ug(r,s,u);case 4:return Qh(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=po(s,null,h,u):qt(r,s,h,u),s.child;case 11:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:Fn(h,d),eg(r,s,h,d,u);case 7:return qt(r,s,s.pendingProps,u),s.child;case 8:return qt(r,s,s.pendingProps.children,u),s.child;case 12:return qt(r,s,s.pendingProps.children,u),s.child;case 10:e:{if(h=s.type._context,d=s.pendingProps,g=s.memoizedProps,E=d.value,Qe(hl,h._currentValue),h._currentValue=E,g!==null)if(Vn(g.value,E)){if(g.children===d.children&&!Jt.current){s=kr(r,s,u);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var C=g.dependencies;if(C!==null){E=g.child;for(var k=C.firstContext;k!==null;){if(k.context===h){if(g.tag===1){k=Pr(-1,u&-u),k.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var J=$.pending;J===null?k.next=k:(k.next=J.next,J.next=k),$.pending=k}}g.lanes|=u,k=g.alternate,k!==null&&(k.lanes|=u),Hh(g.return,u,s),C.lanes|=u;break}k=k.next}}else if(g.tag===10)E=g.type===s.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=u,C=E.alternate,C!==null&&(C.lanes|=u),Hh(E,u,s),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}qt(r,s,d.children,u),s=s.child}return s;case 9:return d=s.type,h=s.pendingProps.children,go(s,u),d=En(d),h=h(d),s.flags|=1,qt(r,s,h,u),s.child;case 14:return h=s.type,d=Fn(h,s.pendingProps),d=Fn(h.type,d),tg(r,s,h,d,u);case 15:return ng(r,s,s.type,s.pendingProps,u);case 17:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:Fn(h,d),Il(r,s),s.tag=1,Xt(h)?(r=!0,sl(s)):r=!1,go(s,u),Km(s,h,d),uf(s,h,d,u),ff(null,s,h,!0,r,u);case 19:return cg(r,s,u);case 22:return rg(r,s,u)}throw Error(t(156,s.tag))};function Lg(r,s){return $s(r,s)}function CT(r,s,u,h){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(r,s,u,h){return new CT(r,s,u,h)}function Nf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function RT(r){if(typeof r=="function")return Nf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===F)return 11;if(r===tt)return 14}return 2}function pi(r,s){var u=r.alternate;return u===null?(u=In(r.tag,s,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=s,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&14680064,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,s=r.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u}function Ll(r,s,u,h,d,g){var E=2;if(h=r,typeof r=="function")Nf(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case D:return ps(u.children,d,g,s);case S:E=8,d|=8;break;case R:return r=In(12,u,s,d|2),r.elementType=R,r.lanes=g,r;case A:return r=In(13,u,s,d),r.elementType=A,r.lanes=g,r;case je:return r=In(19,u,s,d),r.elementType=je,r.lanes=g,r;case Ne:return bl(u,d,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case x:E=10;break e;case O:E=9;break e;case F:E=11;break e;case tt:E=14;break e;case qe:E=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=In(E,u,s,d),s.elementType=r,s.type=h,s.lanes=g,s}function ps(r,s,u,h){return r=In(7,r,h,s),r.lanes=u,r}function bl(r,s,u,h){return r=In(22,r,h,s),r.elementType=Ne,r.lanes=u,r.stateNode={isHidden:!1},r}function Of(r,s,u){return r=In(6,r,null,s),r.lanes=u,r}function Lf(r,s,u){return s=In(4,r.children!==null?r.children:[],r.key,s),s.lanes=u,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function AT(r,s,u,h,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gr(0),this.expirationTimes=Gr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gr(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function bf(r,s,u,h,d,g,E,C,k){return r=new AT(r,s,u,C,k),s===1?(s=1,g===!0&&(s|=8)):s=0,g=In(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kh(g),r}function PT(r,s,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pe,key:h==null?null:""+h,children:r,containerInfo:s,implementation:u}}function bg(r){if(!r)return si;r=r._reactInternals;e:{if(kn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Xt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var u=r.type;if(Xt(u))return lm(r,u,s)}return s}function Vg(r,s,u,h,d,g,E,C,k){return r=bf(u,h,!0,r,d,g,E,C,k),r.context=bg(null),u=r.current,h=Ht(),d=fi(u),g=Pr(h,d),g.callback=s??null,ui(u,g,d),r.current.lanes=d,Yr(r,d,h),tn(r,h),r}function Vl(r,s,u,h){var d=s.current,g=Ht(),E=fi(d);return u=bg(u),s.context===null?s.context=u:s.pendingContext=u,s=Pr(g,E),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=ui(d,s,E),r!==null&&(zn(r,d,E,g),dl(r,d,E)),E}function Ml(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Mg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<s?u:s}}function Vf(r,s){Mg(r,s),(r=r.alternate)&&Mg(r,s)}var Fg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Mf(r){this._internalRoot=r}Fl.prototype.render=Mf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Vl(r,s,null,null)},Fl.prototype.unmount=Mf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;hs(function(){Vl(null,r,null,null)}),s[Ir]=null}};function Fl(r){this._internalRoot=r}Fl.prototype.unstable_scheduleHydration=function(r){if(r){var s=Fu();r={blockedOn:null,target:r,priority:s};for(var u=0;u<Yn.length&&s!==0&&s<Yn[u].priority;u++);Yn.splice(u,0,r),u===0&&zu(r)}};function Ff(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Ul(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Ug(){}function kT(r,s,u,h,d){if(d){if(typeof h=="function"){var g=h;h=function(){var $=Ml(E);g.call($)}}var E=Vg(s,h,r,0,null,!1,!1,"",Ug);return r._reactRootContainer=E,r[Ir]=E.current,Sa(r.nodeType===8?r.parentNode:r),hs(),E}for(;d=r.lastChild;)r.removeChild(d);if(typeof h=="function"){var C=h;h=function(){var $=Ml(k);C.call($)}}var k=bf(r,0,!1,null,null,!1,!1,"",Ug);return r._reactRootContainer=k,r[Ir]=k.current,Sa(r.nodeType===8?r.parentNode:r),hs(function(){Vl(s,k,u,h)}),k}function jl(r,s,u,h,d){var g=u._reactRootContainer;if(g){var E=g;if(typeof d=="function"){var C=d;d=function(){var k=Ml(E);C.call(k)}}Vl(s,E,r,d)}else E=kT(u,s,r,d,h);return Ml(E)}Vu=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var u=Qr(s.pendingLanes);u!==0&&(Jr(s,u|1),tn(s,Ke()),!(Ve&6)&&(wo=Ke()+500,oi()))}break;case 13:hs(function(){var h=Ar(r,1);if(h!==null){var d=Ht();zn(h,r,1,d)}}),Vf(r,1)}},Hs=function(r){if(r.tag===13){var s=Ar(r,134217728);if(s!==null){var u=Ht();zn(s,r,134217728,u)}Vf(r,134217728)}},Mu=function(r){if(r.tag===13){var s=fi(r),u=Ar(r,s);if(u!==null){var h=Ht();zn(u,r,s,h)}Vf(r,s)}},Fu=function(){return xe},Uu=function(r,s){var u=xe;try{return xe=r,s()}finally{xe=u}},Vs=function(r,s,u){switch(s){case"input":if(Go(r,u),s=u.name,u.type==="radio"&&s!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var h=u[s];if(h!==r&&h.form===r.form){var d=rl(h);if(!d)throw Error(t(90));xs(h),Go(h,d)}}}break;case"textarea":Ls(r,u);break;case"select":s=u.value,s!=null&&mr(r,!!u.multiple,s,!1)}},Hi=kf,sa=hs;var xT={usingClientEntryPoint:!1,Events:[Aa,ao,rl,Qn,ia,kf]},za={findFiberByHostInstance:rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DT={bundleType:za.bundleType,version:za.version,rendererPackageName:za.rendererPackageName,rendererConfig:za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ue.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ua(r),r===null?null:r.stateNode},findFiberByHostInstance:za.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{Yi=zl.inject(DT),on=zl}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xT,nn.createPortal=function(r,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ff(s))throw Error(t(200));return PT(r,s,null,u)},nn.createRoot=function(r,s){if(!Ff(r))throw Error(t(299));var u=!1,h="",d=Fg;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=bf(r,1,!1,null,null,u,!1,h,d),r[Ir]=s.current,Sa(r.nodeType===8?r.parentNode:r),new Mf(s)},nn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ua(s),r=r===null?null:r.stateNode,r},nn.flushSync=function(r){return hs(r)},nn.hydrate=function(r,s,u){if(!Ul(s))throw Error(t(200));return jl(null,r,s,!0,u)},nn.hydrateRoot=function(r,s,u){if(!Ff(r))throw Error(t(405));var h=u!=null&&u.hydratedSources||null,d=!1,g="",E=Fg;if(u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onRecoverableError!==void 0&&(E=u.onRecoverableError)),s=Vg(s,null,r,1,u??null,d,!1,g,E),r[Ir]=s.current,Sa(r),h)for(r=0;r<h.length;r++)u=h[r],d=u._getVersion,d=d(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,d]:s.mutableSourceEagerHydrationData.push(u,d);return new Fl(s)},nn.render=function(r,s,u){if(!Ul(s))throw Error(t(200));return jl(null,r,s,!1,u)},nn.unmountComponentAtNode=function(r){if(!Ul(r))throw Error(t(40));return r._reactRootContainer?(hs(function(){jl(null,null,r,!1,function(){r._reactRootContainer=null,r[Ir]=null})}),!0):!1},nn.unstable_batchedUpdates=kf,nn.unstable_renderSubtreeIntoContainer=function(r,s,u,h){if(!Ul(u))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return jl(r,s,u,!1,h)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var Kg;function P_(){if(Kg)return zf.exports;Kg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zf.exports=UT(),zf.exports}var Qg;function jT(){if(Qg)return $l;Qg=1;var n=P_();return $l.createRoot=n.createRoot,$l.hydrateRoot=n.hydrateRoot,$l}var zT=jT();const $T="modulepreload",BT=function(n){return"/appPelis/"+n},Gg={},Br=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(t.map(p=>{if(p=BT(p),p in Gg)return;Gg[p]=!0;const y=p.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const T=document.createElement("link");if(T.rel=y?"stylesheet":$T,y||(T.as="script"),T.crossOrigin="",T.href=p,f&&T.setAttribute("nonce",f),document.head.appendChild(T),y)return new Promise((I,P)=>{T.addEventListener("load",I),T.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return o.then(c=>{for(const f of c||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};var M=Vd();const Si=A_(M),Zx=OT({__proto__:null,default:Si},[M]);var Ba={},Yg;function qT(){if(Yg)return Ba;Yg=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.parse=c,Ba.serialize=y;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function c(I,P){const L=new a,B=I.length;if(B<2)return L;const V=(P==null?void 0:P.decode)||v;let H=0;do{const X=I.indexOf("=",H);if(X===-1)break;const G=I.indexOf(";",H),ue=G===-1?B:G;if(X>ue){H=I.lastIndexOf(";",X-1)+1;continue}const we=f(I,H,X),pe=p(I,X,we),D=I.slice(we,pe);if(L[D]===void 0){let S=f(I,X+1,ue),R=p(I,ue,S);const x=V(I.slice(S,R));L[D]=x}H=ue+1}while(H<B);return L}function f(I,P,L){do{const B=I.charCodeAt(P);if(B!==32&&B!==9)return P}while(++P<L);return L}function p(I,P,L){for(;P>L;){const B=I.charCodeAt(--P);if(B!==32&&B!==9)return P+1}return L}function y(I,P,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!n.test(I))throw new TypeError(`argument name is invalid: ${I}`);const V=B(P);if(!e.test(V))throw new TypeError(`argument val is invalid: ${P}`);let H=I+"="+V;if(!L)return H;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);H+="; Max-Age="+L.maxAge}if(L.domain){if(!t.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);H+="; Domain="+L.domain}if(L.path){if(!i.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);H+="; Path="+L.path}if(L.expires){if(!T(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);H+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(H+="; HttpOnly"),L.secure&&(H+="; Secure"),L.partitioned&&(H+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return H}function v(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function T(I){return o.call(I)==="[object Date]"}return Ba}qT();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Jg="popstate";function HT(n={}){function e(o,a){let{pathname:c="/",search:f="",hash:p=""}=Is(o.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),sd("",{pathname:c,search:f,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(o,a){let c=o.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");f=y===-1?p:p.slice(0,y)}return f+"#"+(typeof a=="string"?a:ru(a))}function i(o,a){Cn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return KT(e,t,i,n)}function et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Cn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WT(){return Math.random().toString(36).substring(2,10)}function Xg(n,e){return{usr:n.state,key:n.key,idx:e}}function sd(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Is(e):e,state:t,key:e&&e.key||i||WT()}}function ru({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Is(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function KT(n,e,t,i={}){let{window:o=document.defaultView,v5Compat:a=!1}=i,c=o.history,f="POP",p=null,y=v();y==null&&(y=0,c.replaceState({...c.state,idx:y},""));function v(){return(c.state||{idx:null}).idx}function T(){f="POP";let V=v(),H=V==null?null:V-y;y=V,p&&p({action:f,location:B.location,delta:H})}function I(V,H){f="PUSH";let X=sd(B.location,V,H);t(X,V),y=v()+1;let G=Xg(X,y),ue=B.createHref(X);try{c.pushState(G,"",ue)}catch(we){if(we instanceof DOMException&&we.name==="DataCloneError")throw we;o.location.assign(ue)}a&&p&&p({action:f,location:B.location,delta:1})}function P(V,H){f="REPLACE";let X=sd(B.location,V,H);t(X,V),y=v();let G=Xg(X,y),ue=B.createHref(X);c.replaceState(G,"",ue),a&&p&&p({action:f,location:B.location,delta:0})}function L(V){let H=o.location.origin!=="null"?o.location.origin:o.location.href,X=typeof V=="string"?V:ru(V);return X=X.replace(/ $/,"%20"),et(H,`No window.location.(origin|href) available to create URL for href: ${X}`),new URL(X,H)}let B={get action(){return f},get location(){return n(o,c)},listen(V){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Jg,T),p=V,()=>{o.removeEventListener(Jg,T),p=null}},createHref(V){return e(o,V)},createURL:L,encodeLocation(V){let H=L(V);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:I,replace:P,go(V){return c.go(V)}};return B}function k_(n,e,t="/"){return QT(n,e,t,!1)}function QT(n,e,t,i){let o=typeof e=="string"?Is(e):e,a=xi(o.pathname||"/",t);if(a==null)return null;let c=x_(n);GT(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let y=oI(a);f=iI(c[p],y,i)}return f}function x_(n,e=[],t=[],i=""){let o=(a,c,f)=>{let p={relativePath:f===void 0?a.path||"":f,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};p.relativePath.startsWith("/")&&(et(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let y=br([i,p.relativePath]),v=t.concat(p);a.children&&a.children.length>0&&(et(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),x_(a.children,e,v,y)),!(a.path==null&&!a.index)&&e.push({path:y,score:nI(y,a.index),routesMeta:v})};return n.forEach((a,c)=>{var f;if(a.path===""||!((f=a.path)!=null&&f.includes("?")))o(a,c);else for(let p of D_(a.path))o(a,c,p)}),e}function D_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let c=D_(i.join("/")),f=[];return f.push(...c.map(p=>p===""?a:[a,p].join("/"))),o&&f.push(...c),f.map(p=>n.startsWith("/")&&p===""?"/":p)}function GT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:rI(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var YT=/^:[\w-]+$/,JT=3,XT=2,ZT=1,eI=10,tI=-2,Zg=n=>n==="*";function nI(n,e){let t=n.split("/"),i=t.length;return t.some(Zg)&&(i+=tI),e&&(i+=XT),t.filter(o=>!Zg(o)).reduce((o,a)=>o+(YT.test(a)?JT:a===""?ZT:eI),i)}function rI(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function iI(n,e,t=!1){let{routesMeta:i}=n,o={},a="/",c=[];for(let f=0;f<i.length;++f){let p=i[f],y=f===i.length-1,v=a==="/"?e:e.slice(a.length)||"/",T=dc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),I=p.route;if(!T&&y&&t&&!i[i.length-1].route.index&&(T=dc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!T)return null;Object.assign(o,T.params),c.push({params:o,pathname:br([a,T.pathname]),pathnameBase:cI(br([a,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(a=br([a,T.pathnameBase]))}return c}function dc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=sI(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((y,{paramName:v,isOptional:T},I)=>{if(v==="*"){let L=f[I]||"";c=a.slice(0,a.length-L.length).replace(/(.)\/+$/,"$1")}const P=f[I];return T&&!P?y[v]=void 0:y[v]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:c,pattern:n}}function sI(n,e=!1,t=!0){Cn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function oI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function xi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function aI(n,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Is(n):n;return{pathname:t?t.startsWith("/")?t:uI(t,e):e,search:hI(i),hash:fI(o)}}function uI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function qf(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Md(n){let e=lI(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Fd(n,e,t,i=!1){let o;typeof n=="string"?o=Is(n):(o={...n},et(!o.pathname||!o.pathname.includes("?"),qf("?","pathname","search",o)),et(!o.pathname||!o.pathname.includes("#"),qf("#","pathname","hash",o)),et(!o.search||!o.search.includes("#"),qf("#","search","hash",o)));let a=n===""||o.pathname==="",c=a?"/":o.pathname,f;if(c==null)f=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let I=c.split("/");for(;I[0]==="..";)I.shift(),T-=1;o.pathname=I.join("/")}f=T>=0?e[T]:"/"}let p=aI(o,f),y=c&&c!=="/"&&c.endsWith("/"),v=(a||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}var br=n=>n.join("/").replace(/\/\/+/g,"/"),cI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),hI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,fI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function dI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var N_=["POST","PUT","PATCH","DELETE"];new Set(N_);var pI=["GET",...N_];new Set(pI);var jo=M.createContext(null);jo.displayName="DataRouter";var Fc=M.createContext(null);Fc.displayName="DataRouterState";var O_=M.createContext({isTransitioning:!1});O_.displayName="ViewTransition";var mI=M.createContext(new Map);mI.displayName="Fetchers";var gI=M.createContext(null);gI.displayName="Await";var Wn=M.createContext(null);Wn.displayName="Navigation";var fu=M.createContext(null);fu.displayName="Location";var Rn=M.createContext({outlet:null,matches:[],isDataRoute:!1});Rn.displayName="Route";var Ud=M.createContext(null);Ud.displayName="RouteError";function yI(n,{relative:e}={}){et(zo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=M.useContext(Wn),{hash:o,pathname:a,search:c}=du(n,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:br([t,a])),i.createHref({pathname:f,search:c,hash:o})}function zo(){return M.useContext(fu)!=null}function Mi(){return et(zo(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(fu).location}var L_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function b_(n){M.useContext(Wn).static||M.useLayoutEffect(n)}function V_(){let{isDataRoute:n}=M.useContext(Rn);return n?NI():_I()}function _I(){et(zo(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext(jo),{basename:e,navigator:t}=M.useContext(Wn),{matches:i}=M.useContext(Rn),{pathname:o}=Mi(),a=JSON.stringify(Md(i)),c=M.useRef(!1);return b_(()=>{c.current=!0}),M.useCallback((p,y={})=>{if(Cn(c.current,L_),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=Fd(p,JSON.parse(a),o,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:br([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,a,o,n])}var vI=M.createContext(null);function EI(n){let e=M.useContext(Rn).outlet;return e&&M.createElement(vI.Provider,{value:n},e)}function eD(){let{matches:n}=M.useContext(Rn),e=n[n.length-1];return e?e.params:{}}function du(n,{relative:e}={}){let{matches:t}=M.useContext(Rn),{pathname:i}=Mi(),o=JSON.stringify(Md(t));return M.useMemo(()=>Fd(n,JSON.parse(o),i,e==="path"),[n,o,i,e])}function wI(n,e){return M_(n,e)}function M_(n,e,t,i){var X;et(zo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:a}=M.useContext(Wn),{matches:c}=M.useContext(Rn),f=c[c.length-1],p=f?f.params:{},y=f?f.pathname:"/",v=f?f.pathnameBase:"/",T=f&&f.route;{let G=T&&T.path||"";F_(y,!T||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let I=Mi(),P;if(e){let G=typeof e=="string"?Is(e):e;et(v==="/"||((X=G.pathname)==null?void 0:X.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${G.pathname}" was given in the \`location\` prop.`),P=G}else P=I;let L=P.pathname||"/",B=L;if(v!=="/"){let G=v.replace(/^\//,"").split("/");B="/"+L.replace(/^\//,"").split("/").slice(G.length).join("/")}let V=!a&&t&&t.matches&&t.matches.length>0?t.matches:k_(n,{pathname:B});Cn(T||V!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),Cn(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=RI(V&&V.map(G=>Object.assign({},G,{params:Object.assign({},p,G.params),pathname:br([v,o.encodeLocation?o.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?v:br([v,o.encodeLocation?o.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),c,t,i);return e&&H?M.createElement(fu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},H):H}function TI(){let n=DI(),e=dI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:a},"ErrorBoundary")," or"," ",M.createElement("code",{style:a},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:o},t):null,c)}var II=M.createElement(TI,null),SI=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?M.createElement(Rn.Provider,{value:this.props.routeContext},M.createElement(Ud.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CI({routeContext:n,match:e,children:t}){let i=M.useContext(jo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Rn.Provider,{value:n},t)}function RI(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=t==null?void 0:t.errors;if(a!=null){let p=o.findIndex(y=>y.route.id&&(a==null?void 0:a[y.route.id])!==void 0);et(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,f=-1;if(t)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=p),y.route.id){let{loaderData:v,errors:T}=t,I=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||I){c=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((p,y,v)=>{let T,I=!1,P=null,L=null;t&&(T=a&&y.route.id?a[y.route.id]:void 0,P=y.route.errorElement||II,c&&(f<0&&v===0?(F_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,L=null):f===v&&(I=!0,L=y.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,v+1)),V=()=>{let H;return T?H=P:I?H=L:y.route.Component?H=M.createElement(y.route.Component,null):y.route.element?H=y.route.element:H=p,M.createElement(CI,{match:y,routeContext:{outlet:p,matches:B,isDataRoute:t!=null},children:H})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?M.createElement(SI,{location:t.location,revalidation:t.revalidation,component:P,error:T,children:V(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):V()},null)}function jd(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AI(n){let e=M.useContext(jo);return et(e,jd(n)),e}function PI(n){let e=M.useContext(Fc);return et(e,jd(n)),e}function kI(n){let e=M.useContext(Rn);return et(e,jd(n)),e}function zd(n){let e=kI(n),t=e.matches[e.matches.length-1];return et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function xI(){return zd("useRouteId")}function DI(){var i;let n=M.useContext(Ud),e=PI("useRouteError"),t=zd("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function NI(){let{router:n}=AI("useNavigate"),e=zd("useNavigate"),t=M.useRef(!1);return b_(()=>{t.current=!0}),M.useCallback(async(o,a={})=>{Cn(t.current,L_),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...a}))},[n,e])}var ey={};function F_(n,e,t){!e&&!ey[n]&&(ey[n]=!0,Cn(!1,t))}M.memo(OI);function OI({routes:n,future:e,state:t}){return M_(n,void 0,t,e)}function U_({to:n,replace:e,state:t,relative:i}){et(zo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=M.useContext(Wn);Cn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=M.useContext(Rn),{pathname:c}=Mi(),f=V_(),p=Fd(n,Md(a),c,i==="path"),y=JSON.stringify(p);return M.useEffect(()=>{f(JSON.parse(y),{replace:e,state:t,relative:i})},[f,y,i,e,t]),null}function LI(n){return EI(n.context)}function dn(n){et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bI({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:a=!1}){et(!zo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:c,navigator:o,static:a,future:{}}),[c,o,a]);typeof t=="string"&&(t=Is(t));let{pathname:p="/",search:y="",hash:v="",state:T=null,key:I="default"}=t,P=M.useMemo(()=>{let L=xi(p,c);return L==null?null:{location:{pathname:L,search:y,hash:v,state:T,key:I},navigationType:i}},[c,p,y,v,T,I,i]);return Cn(P!=null,`<Router basename="${c}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:M.createElement(Wn.Provider,{value:f},M.createElement(fu.Provider,{children:e,value:P}))}function VI({children:n,location:e}){return wI(od(n),e)}function od(n,e=[]){let t=[];return M.Children.forEach(n,(i,o)=>{if(!M.isValidElement(i))return;let a=[...e,o];if(i.type===M.Fragment){t.push.apply(t,od(i.props.children,a));return}et(i.type===dn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),et(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=od(i.props.children,a)),t.push(c)}),t}var Jl="get",Xl="application/x-www-form-urlencoded";function Uc(n){return n!=null&&typeof n.tagName=="string"}function MI(n){return Uc(n)&&n.tagName.toLowerCase()==="button"}function FI(n){return Uc(n)&&n.tagName.toLowerCase()==="form"}function UI(n){return Uc(n)&&n.tagName.toLowerCase()==="input"}function jI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function zI(n,e){return n.button===0&&(!e||e==="_self")&&!jI(n)}var Bl=null;function $I(){if(Bl===null)try{new FormData(document.createElement("form"),0),Bl=!1}catch{Bl=!0}return Bl}var BI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hf(n){return n!=null&&!BI.has(n)?(Cn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xl}"`),null):n}function qI(n,e){let t,i,o,a,c;if(FI(n)){let f=n.getAttribute("action");i=f?xi(f,e):null,t=n.getAttribute("method")||Jl,o=Hf(n.getAttribute("enctype"))||Xl,a=new FormData(n)}else if(MI(n)||UI(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||f.getAttribute("action");if(i=p?xi(p,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Jl,o=Hf(n.getAttribute("formenctype"))||Hf(f.getAttribute("enctype"))||Xl,a=new FormData(f,n),!$I()){let{name:y,type:v,value:T}=n;if(v==="image"){let I=y?`${y}.`:"";a.append(`${I}x`,"0"),a.append(`${I}y`,"0")}else y&&a.append(y,T)}}else{if(Uc(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Jl,i=null,o=Xl,c=n}return a&&o==="text/plain"&&(c=a,a=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:a,body:c}}function $d(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function HI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function KI(n,e,t){let i=await Promise.all(n.map(async o=>{let a=e.routes[o.route.id];if(a){let c=await HI(a,t);return c.links?c.links():[]}return[]}));return JI(i.flat(1).filter(WI).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function ty(n,e,t,i,o,a){let c=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,f=(p,y)=>{var v;return t[y].pathname!==p.pathname||((v=t[y].route.path)==null?void 0:v.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return a==="assets"?e.filter((p,y)=>c(p,y)||f(p,y)):a==="data"?e.filter((p,y)=>{var T;let v=i.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,y)||f(p,y))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function QI(n,e){return GI(n.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let o=[i.module];return i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function GI(n){return[...new Set(n)]}function YI(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function JI(n,e){let t=new Set;return new Set(e),n.reduce((i,o)=>{let a=JSON.stringify(YI(o));return t.has(a)||(t.add(a),i.push({key:a,link:o})),i},[])}function XI(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function ZI(){let n=M.useContext(jo);return $d(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function eS(){let n=M.useContext(Fc);return $d(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Bd=M.createContext(void 0);Bd.displayName="FrameworkContext";function j_(){let n=M.useContext(Bd);return $d(n,"You must render this element inside a <HydratedRouter> element"),n}function tS(n,e){let t=M.useContext(Bd),[i,o]=M.useState(!1),[a,c]=M.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:y,onMouseLeave:v,onTouchStart:T}=e,I=M.useRef(null);M.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let B=H=>{H.forEach(X=>{c(X.isIntersecting)})},V=new IntersectionObserver(B,{threshold:.5});return I.current&&V.observe(I.current),()=>{V.disconnect()}}},[n]),M.useEffect(()=>{if(i){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[i]);let P=()=>{o(!0)},L=()=>{o(!1),c(!1)};return t?n!=="intent"?[a,I,{}]:[a,I,{onFocus:qa(f,P),onBlur:qa(p,L),onMouseEnter:qa(y,P),onMouseLeave:qa(v,L),onTouchStart:qa(T,P)}]:[!1,I,{}]}function qa(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function nS({page:n,...e}){let{router:t}=ZI(),i=M.useMemo(()=>k_(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?M.createElement(iS,{page:n,matches:i,...e}):null}function rS(n){let{manifest:e,routeModules:t}=j_(),[i,o]=M.useState([]);return M.useEffect(()=>{let a=!1;return KI(n,e,t).then(c=>{a||o(c)}),()=>{a=!0}},[n,e,t]),i}function iS({page:n,matches:e,...t}){let i=Mi(),{manifest:o,routeModules:a}=j_(),{loaderData:c,matches:f}=eS(),p=M.useMemo(()=>ty(n,e,f,o,i,"data"),[n,e,f,o,i]),y=M.useMemo(()=>ty(n,e,f,o,i,"assets"),[n,e,f,o,i]),v=M.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let P=new Set,L=!1;if(e.forEach(V=>{var X;let H=o.routes[V.route.id];!H||!H.hasLoader||(!p.some(G=>G.route.id===V.route.id)&&V.route.id in c&&((X=a[V.route.id])!=null&&X.shouldRevalidate)||H.hasClientLoader?L=!0:P.add(V.route.id))}),P.size===0)return[];let B=XI(n);return L&&P.size>0&&B.searchParams.set("_routes",e.filter(V=>P.has(V.route.id)).map(V=>V.route.id).join(",")),[B.pathname+B.search]},[c,i,o,p,e,n,a]),T=M.useMemo(()=>QI(y,o),[y,o]),I=rS(y);return M.createElement(M.Fragment,null,v.map(P=>M.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...t})),T.map(P=>M.createElement("link",{key:P,rel:"modulepreload",href:P,...t})),I.map(({key:P,link:L})=>M.createElement("link",{key:P,...L})))}function sS(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var z_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{z_&&(window.__reactRouterVersion="7.1.5")}catch{}function oS({basename:n,children:e,window:t}){let i=M.useRef();i.current==null&&(i.current=HT({window:t,v5Compat:!0}));let o=i.current,[a,c]=M.useState({action:o.action,location:o.location}),f=M.useCallback(p=>{M.startTransition(()=>c(p))},[c]);return M.useLayoutEffect(()=>o.listen(f),[o,f]),M.createElement(bI,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:o})}var $_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B_=M.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:a,replace:c,state:f,target:p,to:y,preventScrollReset:v,viewTransition:T,...I},P){let{basename:L}=M.useContext(Wn),B=typeof y=="string"&&$_.test(y),V,H=!1;if(typeof y=="string"&&B&&(V=y,z_))try{let R=new URL(window.location.href),x=y.startsWith("//")?new URL(R.protocol+y):new URL(y),O=xi(x.pathname,L);x.origin===R.origin&&O!=null?y=O+x.search+x.hash:H=!0}catch{Cn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=yI(y,{relative:o}),[G,ue,we]=tS(i,I),pe=cS(y,{replace:c,state:f,target:p,preventScrollReset:v,relative:o,viewTransition:T});function D(R){e&&e(R),R.defaultPrevented||pe(R)}let S=M.createElement("a",{...I,...we,href:V||X,onClick:H||a?e:D,ref:sS(P,ue),target:p,"data-discover":!B&&t==="render"?"true":void 0});return G&&!B?M.createElement(M.Fragment,null,S,M.createElement(nS,{page:X})):S});B_.displayName="Link";var aS=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:a,to:c,viewTransition:f,children:p,...y},v){let T=du(c,{relative:y.relative}),I=Mi(),P=M.useContext(Fc),{navigator:L,basename:B}=M.useContext(Wn),V=P!=null&&mS(T)&&f===!0,H=L.encodeLocation?L.encodeLocation(T).pathname:T.pathname,X=I.pathname,G=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;t||(X=X.toLowerCase(),G=G?G.toLowerCase():null,H=H.toLowerCase()),G&&B&&(G=xi(G,B)||G);const ue=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let we=X===H||!o&&X.startsWith(H)&&X.charAt(ue)==="/",pe=G!=null&&(G===H||!o&&G.startsWith(H)&&G.charAt(H.length)==="/"),D={isActive:we,isPending:pe,isTransitioning:V},S=we?e:void 0,R;typeof i=="function"?R=i(D):R=[i,we?"active":null,pe?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let x=typeof a=="function"?a(D):a;return M.createElement(B_,{...y,"aria-current":S,className:R,ref:v,style:x,to:c,viewTransition:f},typeof p=="function"?p(D):p)});aS.displayName="NavLink";var uS=M.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:a,method:c=Jl,action:f,onSubmit:p,relative:y,preventScrollReset:v,viewTransition:T,...I},P)=>{let L=dS(),B=pS(f,{relative:y}),V=c.toLowerCase()==="get"?"get":"post",H=typeof f=="string"&&$_.test(f),X=G=>{if(p&&p(G),G.defaultPrevented)return;G.preventDefault();let ue=G.nativeEvent.submitter,we=(ue==null?void 0:ue.getAttribute("formmethod"))||c;L(ue||G.currentTarget,{fetcherKey:e,method:we,navigate:t,replace:o,state:a,relative:y,preventScrollReset:v,viewTransition:T})};return M.createElement("form",{ref:P,method:V,action:B,onSubmit:i?p:X,...I,"data-discover":!H&&n==="render"?"true":void 0})});uS.displayName="Form";function lS(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q_(n){let e=M.useContext(jo);return et(e,lS(n)),e}function cS(n,{target:e,replace:t,state:i,preventScrollReset:o,relative:a,viewTransition:c}={}){let f=V_(),p=Mi(),y=du(n,{relative:a});return M.useCallback(v=>{if(zI(v,e)){v.preventDefault();let T=t!==void 0?t:ru(p)===ru(y);f(n,{replace:T,state:i,preventScrollReset:o,relative:a,viewTransition:c})}},[p,f,y,t,i,e,n,o,a,c])}var hS=0,fS=()=>`__${String(++hS)}__`;function dS(){let{router:n}=q_("useSubmit"),{basename:e}=M.useContext(Wn),t=xI();return M.useCallback(async(i,o={})=>{let{action:a,method:c,encType:f,formData:p,body:y}=qI(i,e);if(o.navigate===!1){let v=o.fetcherKey||fS();await n.fetch(v,t,o.action||a,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||c,formEncType:o.encType||f,flushSync:o.flushSync})}else await n.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||c,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function pS(n,{relative:e}={}){let{basename:t}=M.useContext(Wn),i=M.useContext(Rn);et(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a={...du(n||".",{relative:e})},c=Mi();if(n==null){a.search=c.search;let f=new URLSearchParams(a.search),p=f.getAll("index");if(p.some(v=>v==="")){f.delete("index"),p.filter(T=>T).forEach(T=>f.append("index",T));let v=f.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:br([t,a.pathname])),ru(a)}function mS(n,e={}){let t=M.useContext(O_);et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=q_("useViewTransitionState"),o=du(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=xi(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=xi(t.nextLocation.pathname,i)||t.nextLocation.pathname;return dc(o.pathname,c)!=null||dc(o.pathname,a)!=null}new TextEncoder;var gS=P_();const yS=A_(gS);let _S={data:""},vS=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||_S,ES=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,wS=/\/\*[^]*?\*\/|  +/g,ny=/\n+/g,_i=(n,e)=>{let t="",i="",o="";for(let a in n){let c=n[a];a[0]=="@"?a[1]=="i"?t=a+" "+c+";":i+=a[1]=="f"?_i(c,a):a+"{"+_i(c,a[1]=="k"?"":e)+"}":typeof c=="object"?i+=_i(c,e?e.replace(/([^,])+/g,f=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,f):f?f+" "+p:p)):a):c!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=_i.p?_i.p(a,c):a+":"+c+";")}return t+(e&&o?e+"{"+o+"}":o)+i},Dr={},H_=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+H_(n[t]);return e}return n},TS=(n,e,t,i,o)=>{let a=H_(n),c=Dr[a]||(Dr[a]=(p=>{let y=0,v=11;for(;y<p.length;)v=101*v+p.charCodeAt(y++)>>>0;return"go"+v})(a));if(!Dr[c]){let p=a!==n?n:(y=>{let v,T,I=[{}];for(;v=ES.exec(y.replace(wS,""));)v[4]?I.shift():v[3]?(T=v[3].replace(ny," ").trim(),I.unshift(I[0][T]=I[0][T]||{})):I[0][v[1]]=v[2].replace(ny," ").trim();return I[0]})(n);Dr[c]=_i(o?{["@keyframes "+c]:p}:p,t?"":"."+c)}let f=t&&Dr.g?Dr.g:null;return t&&(Dr.g=Dr[c]),((p,y,v,T)=>{T?y.data=y.data.replace(T,p):y.data.indexOf(p)===-1&&(y.data=v?p+y.data:y.data+p)})(Dr[c],e,i,f),c},IS=(n,e,t)=>n.reduce((i,o,a)=>{let c=e[a];if(c&&c.call){let f=c(t),p=f&&f.props&&f.props.className||/^go/.test(f)&&f;c=p?"."+p:f&&typeof f=="object"?f.props?"":_i(f,""):f===!1?"":f}return i+o+(c??"")},"");function jc(n){let e=this||{},t=n.call?n(e.p):n;return TS(t.unshift?t.raw?IS(t,[].slice.call(arguments,1),e.p):t.reduce((i,o)=>Object.assign(i,o&&o.call?o(e.p):o),{}):t,vS(e.target),e.g,e.o,e.k)}let W_,ad,ud;jc.bind({g:1});let Fr=jc.bind({k:1});function SS(n,e,t,i){_i.p=e,W_=n,ad=t,ud=i}function Fi(n,e){let t=this||{};return function(){let i=arguments;function o(a,c){let f=Object.assign({},a),p=f.className||o.className;t.p=Object.assign({theme:ad&&ad()},f),t.o=/ *go\d+/.test(p),f.className=jc.apply(t,i)+(p?" "+p:"");let y=n;return n[0]&&(y=f.as||n,delete f.as),ud&&y[0]&&ud(f),W_(y,f)}return o}}var CS=n=>typeof n=="function",pc=(n,e)=>CS(n)?n(e):n,RS=(()=>{let n=0;return()=>(++n).toString()})(),K_=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),AS=20,Q_=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,AS)};case 1:return{...n,toasts:n.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:t}=e;return Q_(n,{type:n.toasts.find(a=>a.id===t.id)?1:0,toast:t});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(a=>a.id===i||i===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let o=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+o}))}}},Zl=[],ec={toasts:[],pausedAt:void 0},Ss=n=>{ec=Q_(ec,n),Zl.forEach(e=>{e(ec)})},PS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},kS=(n={})=>{let[e,t]=M.useState(ec);M.useEffect(()=>(Zl.push(t),()=>{let o=Zl.indexOf(t);o>-1&&Zl.splice(o,1)}),[e]);let i=e.toasts.map(o=>{var a,c,f;return{...n,...n[o.type],...o,removeDelay:o.removeDelay||((a=n[o.type])==null?void 0:a.removeDelay)||(n==null?void 0:n.removeDelay),duration:o.duration||((c=n[o.type])==null?void 0:c.duration)||(n==null?void 0:n.duration)||PS[o.type],style:{...n.style,...(f=n[o.type])==null?void 0:f.style,...o.style}}});return{...e,toasts:i}},xS=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||RS()}),pu=n=>(e,t)=>{let i=xS(e,n,t);return Ss({type:2,toast:i}),i.id},Kt=(n,e)=>pu("blank")(n,e);Kt.error=pu("error");Kt.success=pu("success");Kt.loading=pu("loading");Kt.custom=pu("custom");Kt.dismiss=n=>{Ss({type:3,toastId:n})};Kt.remove=n=>Ss({type:4,toastId:n});Kt.promise=(n,e,t)=>{let i=Kt.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof n=="function"&&(n=n()),n.then(o=>{let a=e.success?pc(e.success,o):void 0;return a?Kt.success(a,{id:i,...t,...t==null?void 0:t.success}):Kt.dismiss(i),o}).catch(o=>{let a=e.error?pc(e.error,o):void 0;a?Kt.error(a,{id:i,...t,...t==null?void 0:t.error}):Kt.dismiss(i)}),n};var DS=(n,e)=>{Ss({type:1,toast:{id:n,height:e}})},NS=()=>{Ss({type:5,time:Date.now()})},Ja=new Map,OS=1e3,LS=(n,e=OS)=>{if(Ja.has(n))return;let t=setTimeout(()=>{Ja.delete(n),Ss({type:4,toastId:n})},e);Ja.set(n,t)},bS=n=>{let{toasts:e,pausedAt:t}=kS(n);M.useEffect(()=>{if(t)return;let a=Date.now(),c=e.map(f=>{if(f.duration===1/0)return;let p=(f.duration||0)+f.pauseDuration-(a-f.createdAt);if(p<0){f.visible&&Kt.dismiss(f.id);return}return setTimeout(()=>Kt.dismiss(f.id),p)});return()=>{c.forEach(f=>f&&clearTimeout(f))}},[e,t]);let i=M.useCallback(()=>{t&&Ss({type:6,time:Date.now()})},[t]),o=M.useCallback((a,c)=>{let{reverseOrder:f=!1,gutter:p=8,defaultPosition:y}=c||{},v=e.filter(P=>(P.position||y)===(a.position||y)&&P.height),T=v.findIndex(P=>P.id===a.id),I=v.filter((P,L)=>L<T&&P.visible).length;return v.filter(P=>P.visible).slice(...f?[I+1]:[0,I]).reduce((P,L)=>P+(L.height||0)+p,0)},[e]);return M.useEffect(()=>{e.forEach(a=>{if(a.dismissed)LS(a.id,a.removeDelay);else{let c=Ja.get(a.id);c&&(clearTimeout(c),Ja.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:DS,startPause:NS,endPause:i,calculateOffset:o}}},VS=Fr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,MS=Fr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,FS=Fr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,US=Fi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${VS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${MS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${FS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,jS=Fr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zS=Fi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${jS} 1s linear infinite;
`,$S=Fr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,BS=Fr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,qS=Fi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$S} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${BS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,HS=Fi("div")`
  position: absolute;
`,WS=Fi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,KS=Fr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,QS=Fi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${KS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,GS=({toast:n})=>{let{icon:e,type:t,iconTheme:i}=n;return e!==void 0?typeof e=="string"?M.createElement(QS,null,e):e:t==="blank"?null:M.createElement(WS,null,M.createElement(zS,{...i}),t!=="loading"&&M.createElement(HS,null,t==="error"?M.createElement(US,{...i}):M.createElement(qS,{...i})))},YS=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,JS=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,XS="0%{opacity:0;} 100%{opacity:1;}",ZS="0%{opacity:1;} 100%{opacity:0;}",e0=Fi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,t0=Fi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,n0=(n,e)=>{let t=n.includes("top")?1:-1,[i,o]=K_()?[XS,ZS]:[YS(t),JS(t)];return{animation:e?`${Fr(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fr(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},r0=M.memo(({toast:n,position:e,style:t,children:i})=>{let o=n.height?n0(n.position||e||"top-center",n.visible):{opacity:0},a=M.createElement(GS,{toast:n}),c=M.createElement(t0,{...n.ariaProps},pc(n.message,n));return M.createElement(e0,{className:n.className,style:{...o,...t,...n.style}},typeof i=="function"?i({icon:a,message:c}):M.createElement(M.Fragment,null,a,c))});SS(M.createElement);var i0=({id:n,className:e,style:t,onHeightUpdate:i,children:o})=>{let a=M.useCallback(c=>{if(c){let f=()=>{let p=c.getBoundingClientRect().height;i(n,p)};f(),new MutationObserver(f).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[n,i]);return M.createElement("div",{ref:a,className:e,style:t},o)},s0=(n,e)=>{let t=n.includes("top"),i=t?{top:0}:{bottom:0},o=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:K_()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...i,...o}},o0=jc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ql=16,a0=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:i,children:o,containerStyle:a,containerClassName:c})=>{let{toasts:f,handlers:p}=bS(t);return M.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:ql,left:ql,right:ql,bottom:ql,pointerEvents:"none",...a},className:c,onMouseEnter:p.startPause,onMouseLeave:p.endPause},f.map(y=>{let v=y.position||e,T=p.calculateOffset(y,{reverseOrder:n,gutter:i,defaultPosition:e}),I=s0(v,T);return M.createElement(i0,{id:y.id,key:y.id,onHeightUpdate:p.updateHeight,className:y.visible?o0:"",style:I},y.type==="custom"?pc(y.message,y):o?o(y):M.createElement(r0,{toast:y,position:v}))}))},$n=Kt;function u0(){return Te.jsx("div",{className:"cargandoSpinner",children:Te.jsx("div",{className:"spinner"})})}var ry={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},l0=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],f=n[t++],p=((o&7)<<18|(a&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Y_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,f=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,v=a>>2,T=(a&3)<<4|f>>4;let I=(f&15)<<2|y>>6,P=y&63;p||(P=64,c||(I=64)),i.push(t[v],t[T],t[I],t[P])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(G_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):l0(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||f==null||y==null||T==null)throw new c0;const I=a<<2|f>>4;if(i.push(I),y!==64){const P=f<<4&240|y>>2;if(i.push(P),T!==64){const L=y<<6&192|T;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class c0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h0=function(n){const e=G_(n);return Y_.encodeByteArray(e,!0)},mc=function(n){return h0(n).replace(/\./g,"")},J_=function(n){try{return Y_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=()=>f0().__FIREBASE_DEFAULTS__,p0=()=>{if(typeof process>"u"||typeof ry>"u")return;const n=ry.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},m0=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&J_(n[1]);return e&&JSON.parse(e)},zc=()=>{try{return d0()||p0()||m0()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},X_=n=>{var e,t;return(t=(e=zc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},g0=n=>{const e=X_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Z_=()=>{var n;return(n=zc())===null||n===void 0?void 0:n.config},ev=n=>{var e;return(e=zc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[mc(JSON.stringify(t)),mc(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function E0(){var n;const e=(n=zc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function I0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S0(){const n=zt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function C0(){return!E0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R0(){try{return typeof indexedDB=="object"}catch{return!1}}function A0(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="FirebaseError";class qr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=P0,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mu.prototype.create)}}class mu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?k0(a,i):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new qr(o,f,i)}}function k0(n,e){return n.replace(x0,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const x0=/\{\$([^}]+)}/g;function D0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function gc(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],c=e[o];if(iy(a)&&iy(c)){if(!gc(a,c))return!1}else if(a!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function iy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ha(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Wa(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function N0(n,e){const t=new O0(n,e);return t.subscribe.bind(t)}class O0{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");L0(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Wf),o.error===void 0&&(o.error=Wf),o.complete===void 0&&(o.complete=Wf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L0(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Wf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(n){return n&&n._delegate?n._delegate:n}class _s{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new y0;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M0(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);i===f&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:V0(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function V0(n){return n===ms?void 0:n}function M0(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new b0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pe||(Pe={}));const U0={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},j0=Pe.INFO,z0={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},$0=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=z0[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qd{constructor(e){this.name=e,this._logLevel=j0,this._logHandler=$0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const B0=(n,e)=>e.some(t=>n instanceof t);let sy,oy;function q0(){return sy||(sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H0(){return oy||(oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tv=new WeakMap,ld=new WeakMap,nv=new WeakMap,Kf=new WeakMap,Hd=new WeakMap;function W0(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Ci(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&tv.set(t,n)}).catch(()=>{}),Hd.set(e,n),e}function K0(n){if(ld.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});ld.set(n,e)}let cd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ld.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ci(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Q0(n){cd=n(cd)}function G0(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Qf(this),e,...t);return nv.set(i,e.sort?e.sort():[e]),Ci(i)}:H0().includes(n)?function(...e){return n.apply(Qf(this),e),Ci(tv.get(this))}:function(...e){return Ci(n.apply(Qf(this),e))}}function Y0(n){return typeof n=="function"?G0(n):(n instanceof IDBTransaction&&K0(n),B0(n,q0())?new Proxy(n,cd):n)}function Ci(n){if(n instanceof IDBRequest)return W0(n);if(Kf.has(n))return Kf.get(n);const e=Y0(n);return e!==n&&(Kf.set(n,e),Hd.set(e,n)),e}const Qf=n=>Hd.get(n);function J0(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),f=Ci(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Ci(c.result),p.oldVersion,p.newVersion,Ci(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const X0=["get","getKey","getAll","getAllKeys","count"],Z0=["put","add","delete","clear"],Gf=new Map;function ay(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Gf.get(e))return Gf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Z0.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||X0.includes(t)))return;const a=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return Gf.set(e,a),a}Q0(n=>({...n,get:(e,t,i)=>ay(e,t)||n.get(e,t,i),has:(e,t)=>!!ay(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function tC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hd="@firebase/app",uy="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new qd("@firebase/app"),nC="@firebase/app-compat",rC="@firebase/analytics-compat",iC="@firebase/analytics",sC="@firebase/app-check-compat",oC="@firebase/app-check",aC="@firebase/auth",uC="@firebase/auth-compat",lC="@firebase/database",cC="@firebase/data-connect",hC="@firebase/database-compat",fC="@firebase/functions",dC="@firebase/functions-compat",pC="@firebase/installations",mC="@firebase/installations-compat",gC="@firebase/messaging",yC="@firebase/messaging-compat",_C="@firebase/performance",vC="@firebase/performance-compat",EC="@firebase/remote-config",wC="@firebase/remote-config-compat",TC="@firebase/storage",IC="@firebase/storage-compat",SC="@firebase/firestore",CC="@firebase/vertexai",RC="@firebase/firestore-compat",AC="firebase",PC="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="[DEFAULT]",kC={[hd]:"fire-core",[nC]:"fire-core-compat",[iC]:"fire-analytics",[rC]:"fire-analytics-compat",[oC]:"fire-app-check",[sC]:"fire-app-check-compat",[aC]:"fire-auth",[uC]:"fire-auth-compat",[lC]:"fire-rtdb",[cC]:"fire-data-connect",[hC]:"fire-rtdb-compat",[fC]:"fire-fn",[dC]:"fire-fn-compat",[pC]:"fire-iid",[mC]:"fire-iid-compat",[gC]:"fire-fcm",[yC]:"fire-fcm-compat",[_C]:"fire-perf",[vC]:"fire-perf-compat",[EC]:"fire-rc",[wC]:"fire-rc-compat",[TC]:"fire-gcs",[IC]:"fire-gcs-compat",[SC]:"fire-fst",[RC]:"fire-fst-compat",[CC]:"fire-vertex","fire-js":"fire-js",[AC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Map,xC=new Map,dd=new Map;function ly(n,e){try{n.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function No(n){const e=n.name;if(dd.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;dd.set(e,n);for(const t of yc.values())ly(t,n);for(const t of xC.values())ly(t,n);return!0}function Wd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function sr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ri=new mu("app","Firebase",DC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=PC;function rv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:fd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Ri.create("bad-app-name",{appName:String(o)});if(t||(t=Z_()),!t)throw Ri.create("no-options");const a=yc.get(o);if(a){if(gc(t,a.options)&&gc(i,a.config))return a;throw Ri.create("duplicate-app",{appName:o})}const c=new F0(o);for(const p of dd.values())c.addComponent(p);const f=new NC(t,i,c);return yc.set(o,f),f}function iv(n=fd){const e=yc.get(n);if(!e&&n===fd&&Z_())return rv();if(!e)throw Ri.create("no-app",{appName:n});return e}function Ai(n,e,t){var i;let o=(i=kC[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${o}" with version "${e}":`];a&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(f.join(" "));return}No(new _s(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="firebase-heartbeat-database",LC=1,iu="firebase-heartbeat-store";let Yf=null;function sv(){return Yf||(Yf=J0(OC,LC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(iu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ri.create("idb-open",{originalErrorMessage:n.message})})),Yf}async function bC(n){try{const t=(await sv()).transaction(iu),i=await t.objectStore(iu).get(ov(n));return await t.done,i}catch(e){if(e instanceof qr)Ur.warn(e.message);else{const t=Ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(t.message)}}}async function cy(n,e){try{const i=(await sv()).transaction(iu,"readwrite");await i.objectStore(iu).put(e,ov(n)),await i.done}catch(t){if(t instanceof qr)Ur.warn(t.message);else{const i=Ri.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ur.warn(i.message)}}}function ov(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=1024,MC=30*24*60*60*1e3;class FC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=hy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const f=new Date(c.date).valueOf();return Date.now()-f<=MC}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ur.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=hy(),{heartbeatsToSend:i,unsentEntries:o}=UC(this._heartbeatsCache.heartbeats),a=mc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ur.warn(t),""}}}function hy(){return new Date().toISOString().substring(0,10)}function UC(n,e=VC){const t=[];let i=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),fy(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),fy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class jC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R0()?A0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return cy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return cy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function fy(n){return mc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(n){No(new _s("platform-logger",e=>new eC(e),"PRIVATE")),No(new _s("heartbeat",e=>new FC(e),"PRIVATE")),Ai(hd,uy,n),Ai(hd,uy,"esm2017"),Ai("fire-js","")}zC("");var $C="firebase",BC="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai($C,BC,"app");function Kd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function av(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qC=av,uv=new mu("auth","Firebase",av());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new qd("@firebase/auth");function HC(n,...e){_c.logLevel<=Pe.WARN&&_c.warn(`Auth (${$o}): ${n}`,...e)}function tc(n,...e){_c.logLevel<=Pe.ERROR&&_c.error(`Auth (${$o}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(n,...e){throw Qd(n,...e)}function or(n,...e){return Qd(n,...e)}function lv(n,e,t){const i=Object.assign(Object.assign({},qC()),{[e]:t});return new mu("auth","Firebase",i).create(e,{appName:n.name})}function Vr(n){return lv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qd(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return uv.create(n,...e)}function _e(n,e,...t){if(!n)throw Qd(e,...t)}function Nr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw tc(e),new Error(e)}function jr(n,e){n||Nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function WC(){return dy()==="http:"||dy()==="https:"}function dy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WC()||T0()||"connection"in navigator)?navigator.onLine:!0}function QC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,jr(t>e,"Short delay should be less than long delay!"),this.isMobile=v0()||I0()}get(){return KC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(n,e){jr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=new yu(3e4,6e4);function Ui(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ji(n,e,t,i,o={}){return hv(n,o,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const f=gu(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},a);return w0()||(y.referrerPolicy="no-referrer"),cv.fetch()(fv(n,n.config.apiHost,t,f),y)})}async function hv(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},GC),e);try{const o=new XC(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Hl(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const f=a.ok?c.errorMessage:c.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Hl(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Hl(n,"user-disabled",c);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw lv(n,v,y);qn(n,v)}}catch(o){if(o instanceof qr)throw o;qn(n,"network-request-failed",{message:String(o)})}}async function _u(n,e,t,i,o={}){const a=await ji(n,e,t,i,o);return"mfaPendingCredential"in a&&qn(n,"multi-factor-auth-required",{_serverResponse:a}),a}function fv(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?Gd(n.config,o):`${n.config.apiScheme}://${o}`}function JC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(or(this.auth,"network-request-failed")),YC.get())})}}function Hl(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=or(n,e,i);return o.customData._tokenResponse=t,o}function py(n){return n!==void 0&&n.enterprise!==void 0}class ZC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return JC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eR(n,e){return ji(n,"GET","/v2/recaptchaConfig",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(n,e){return ji(n,"POST","/v1/accounts:delete",e)}async function dv(n,e){return ji(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nR(n,e=!1){const t=Qt(n),i=await t.getIdToken(e),o=Yd(i);_e(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:Xa(Jf(o.auth_time)),issuedAtTime:Xa(Jf(o.iat)),expirationTime:Xa(Jf(o.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Jf(n){return Number(n)*1e3}function Yd(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return tc("JWT malformed, contained fewer than 3 sections"),null;try{const o=J_(t);return o?JSON.parse(o):(tc("Failed to decode base64 JWT payload"),null)}catch(o){return tc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function my(n){const e=Yd(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof qr&&rR(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function rR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xa(this.lastLoginAt),this.creationTime=Xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await su(n,dv(t,{idToken:i}));_e(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?pv(a.providerUserInfo):[],f=oR(n.providerData,c),p=n.isAnonymous,y=!(n.email&&a.passwordHash)&&!(f!=null&&f.length),v=p?y:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:f,metadata:new md(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,T)}async function sR(n){const e=Qt(n);await vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oR(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function pv(n){return n.map(e=>{var{providerId:t}=e,i=Kd(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(n,e){const t=await hv(n,{},async()=>{const i=gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,c=fv(n,o,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",cv.fetch()(c,{method:"POST",headers:f,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function uR(n,e){return ji(n,"POST","/v2/accounts:revokeToken",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):my(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const t=my(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await aR(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,c=new Po;return i&&(_e(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(_e(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(_e(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Po,this.toJSON())}_performRefresh(){return Nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Or{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Kd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new md(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await su(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nR(this,e)}reload(){return sR(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await vc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await su(this,tR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,c,f,p,y,v;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,P=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,L=(c=t.photoURL)!==null&&c!==void 0?c:void 0,B=(f=t.tenantId)!==null&&f!==void 0?f:void 0,V=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,H=(y=t.createdAt)!==null&&y!==void 0?y:void 0,X=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:G,emailVerified:ue,isAnonymous:we,providerData:pe,stsTokenManager:D}=t;_e(G&&D,e,"internal-error");const S=Po.fromJSON(this.name,D);_e(typeof G=="string",e,"internal-error"),gi(T,e.name),gi(I,e.name),_e(typeof ue=="boolean",e,"internal-error"),_e(typeof we=="boolean",e,"internal-error"),gi(P,e.name),gi(L,e.name),gi(B,e.name),gi(V,e.name),gi(H,e.name),gi(X,e.name);const R=new Or({uid:G,auth:e,email:I,emailVerified:ue,displayName:T,isAnonymous:we,photoURL:L,phoneNumber:P,tenantId:B,stsTokenManager:S,createdAt:H,lastLoginAt:X});return pe&&Array.isArray(pe)&&(R.providerData=pe.map(x=>Object.assign({},x))),V&&(R._redirectEventId=V),R}static async _fromIdTokenResponse(e,t,i=!1){const o=new Po;o.updateFromServerResponse(t);const a=new Or({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await vc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];_e(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?pv(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),f=new Po;f.updateFromIdToken(i);const p=new Or({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new md(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Map;function Lr(n){jr(n instanceof Function,"Expected a class definition");let e=gy.get(n);return e?(jr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mv.type="NONE";const yy=mv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(n,e,t){return`firebase:${n}:${e}:${t}`}class ko{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=nc(this.userKey,o.apiKey,a),this.fullPersistenceKey=nc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Or._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ko(Lr(yy),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||Lr(yy);const c=nc(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(c);if(v){const T=Or._fromJSON(e,v);y!==a&&(f=T),a=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new ko(a,e,i):(a=p[0],f&&await a._set(c,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(c)}catch{}})),new ko(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wv(e))return"Blackberry";if(Tv(e))return"Webos";if(yv(e))return"Safari";if((e.includes("chrome/")||_v(e))&&!e.includes("edge/"))return"Chrome";if(Ev(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function gv(n=zt()){return/firefox\//i.test(n)}function yv(n=zt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _v(n=zt()){return/crios\//i.test(n)}function vv(n=zt()){return/iemobile/i.test(n)}function Ev(n=zt()){return/android/i.test(n)}function wv(n=zt()){return/blackberry/i.test(n)}function Tv(n=zt()){return/webos/i.test(n)}function Jd(n=zt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function lR(n=zt()){var e;return Jd(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cR(){return S0()&&document.documentMode===10}function Iv(n=zt()){return Jd(n)||Ev(n)||Tv(n)||wv(n)||/windows phone/i.test(n)||vv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(n,e=[]){let t;switch(n){case"Browser":t=_y(zt());break;case"Worker":t=`${_y(zt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$o}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((c,f)=>{try{const p=e(a);c(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(n,e={}){return ji(n,"GET","/v2/passwordPolicy",Ui(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=6;class pR{constructor(e){var t,i,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:dR,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,c,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vy(this),this.idTokenSubscription=new vy(this),this.beforeStateQueue=new hR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await dv(this,{idToken:e}),i=await Or._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(sr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(Vr(this));const t=e?Qt(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fR(this),t=new pR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await uR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lr(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(f,this,"internal-error"),f.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&HC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Cs(n){return Qt(n)}class vy{constructor(e){this.auth=e,this.observer=null,this.addObserver=N0(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gR(n){$c=n}function Cv(n){return $c.loadJS(n)}function yR(){return $c.recaptchaEnterpriseScript}function _R(){return $c.gapiScript}function vR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ER{constructor(){this.enterprise=new wR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class wR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const TR="recaptcha-enterprise",Rv="NO_RECAPTCHA";class IR{constructor(e){this.type=TR,this.auth=Cs(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,f)=>{eR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new ZC(p);return a.tenantId==null?a._agentRecaptchaConfig=y:a._tenantRecaptchaConfigs[a.tenantId]=y,c(y.siteKey)}}).catch(p=>{f(p)})})}function o(a,c,f){const p=window.grecaptcha;py(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(y=>{c(y)}).catch(()=>{c(Rv)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ER().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{i(this.auth).then(f=>{if(!t&&py(window.grecaptcha))o(f,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=yR();p.length!==0&&(p+=f),Cv(p).then(()=>{o(f,a,c)}).catch(y=>{c(y)})}}).catch(f=>{c(f)})})}}async function Ey(n,e,t,i=!1,o=!1){const a=new IR(n);let c;if(o)c=Rv;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function gd(n,e,t,i,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Ey(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Ey(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(n,e){const t=Wd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(gc(a,e??{}))return o;qn(o,"already-initialized")}return t.initialize({options:e})}function CR(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Lr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function RR(n,e,t){const i=Cs(n);_e(i._canInitEmulator,i,"emulator-config-failed"),_e(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=Av(e),{host:c,port:f}=AR(e),p=f===null?"":`:${f}`;i.config.emulator={url:`${a}//${c}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),PR()}function Av(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AR(n){const e=Av(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:wy(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:wy(c)}}}function wy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function PR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,t){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}}async function kR(n,e){return ji(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(n,e){return _u(n,"POST","/v1/accounts:signInWithPassword",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(n,e){return _u(n,"POST","/v1/accounts:signInWithEmailLink",Ui(n,e))}async function NR(n,e){return _u(n,"POST","/v1/accounts:signInWithEmailLink",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends Xd{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ou(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ou(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gd(e,t,"signInWithPassword",xR);case"emailLink":return DR(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gd(e,i,"signUpPassword",kR);case"emailLink":return NR(e,{idToken:t,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(n,e){return _u(n,"POST","/v1/accounts:signInWithIdp",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="http://localhost";class vs extends Xd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Kd(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new vs(i,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return xo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,xo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xo(e,t)}buildRequest(){const e={requestUri:OR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bR(n){const e=Ha(Wa(n)).link,t=e?Ha(Wa(e)).deep_link_id:null,i=Ha(Wa(n)).deep_link_id;return(i?Ha(Wa(i)).link:null)||i||t||e||n}class Zd{constructor(e){var t,i,o,a,c,f;const p=Ha(Wa(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(i=p.oobCode)!==null&&i!==void 0?i:null,T=LR((o=p.mode)!==null&&o!==void 0?o:null);_e(y&&v&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=v,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=p.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=bR(e);try{return new Zd(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,t){return ou._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Zd.parseLink(t);return _e(i,"argument-error"),ou._fromEmailAndCode(e,i.code,i.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends Pv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends vu{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vs._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ei.credential(t,i)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends vu{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends vu{constructor(){super("twitter.com")}static credential(e,t){return vs._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ti.credential(t,i)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(n,e){return _u(n,"POST","/v1/accounts:signUp",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Or._fromIdTokenResponse(e,i,o),c=Ty(i);return new Es({user:a,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Ty(i);return new Es({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Ty(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends qr{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Ec(e,t,i,o)}}function kv(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ec._fromErrorAndOperation(n,a,e,i):a})}async function MR(n,e,t=!1){const i=await su(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Es._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(n,e,t=!1){const{auth:i}=n;if(sr(i.app))return Promise.reject(Vr(i));const o="reauthenticate";try{const a=await su(n,kv(i,o,e,n),t);_e(a.idToken,i,"internal-error");const c=Yd(a.idToken);_e(c,i,"internal-error");const{sub:f}=c;return _e(n.uid===f,i,"user-mismatch"),Es._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&qn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xv(n,e,t=!1){if(sr(n.app))return Promise.reject(Vr(n));const i="signIn",o=await kv(n,i,e),a=await Es._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function UR(n,e){return xv(Cs(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dv(n){const e=Cs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jR(n,e,t){if(sr(n.app))return Promise.reject(Vr(n));const i=Cs(n),c=await gd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Dv(n),p}),f=await Es._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function zR(n,e,t){return sr(n.app)?Promise.reject(Vr(n)):UR(Qt(n),Bo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Dv(n),i})}function $R(n,e,t,i){return Qt(n).onIdTokenChanged(e,t,i)}function BR(n,e,t){return Qt(n).beforeAuthStateChanged(e,t)}function qR(n,e,t,i){return Qt(n).onAuthStateChanged(e,t,i)}function HR(n){return Qt(n).signOut()}const wc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wc,"1"),this.storage.removeItem(wc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=1e3,KR=10;class Ov extends Nv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Iv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);cR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,KR):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},WR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ov.type="LOCAL";const QR=Ov;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends Nv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Lv.type="SESSION";const bv=Lv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Bc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(c).map(async y=>y(t.origin,a)),p=await GR(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((f,p)=>{const y=ep("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(I.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return window}function JR(n){ar().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function XR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function eA(){return Vv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="firebaseLocalStorageDb",tA=1,Tc="firebaseLocalStorage",Fv="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qc(n,e){return n.transaction([Tc],e?"readwrite":"readonly").objectStore(Tc)}function nA(){const n=indexedDB.deleteDatabase(Mv);return new Eu(n).toPromise()}function yd(){const n=indexedDB.open(Mv,tA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Tc,{keyPath:Fv})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Tc)?e(i):(i.close(),await nA(),e(await yd()))})})}async function Iy(n,e,t){const i=qc(n,!0).put({[Fv]:e,value:t});return new Eu(i).toPromise()}async function rA(n,e){const t=qc(n,!1).get(e),i=await new Eu(t).toPromise();return i===void 0?null:i.value}function Sy(n,e){const t=qc(n,!0).delete(e);return new Eu(t).toPromise()}const iA=800,sA=3;class Uv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>sA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bc._getInstance(eA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await XR(),!this.activeServiceWorker)return;this.sender=new YR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yd();return await Iy(e,wc,"1"),await Sy(e,wc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Iy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>rA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Sy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=qc(o,!1).getAll();return new Eu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Uv.type="LOCAL";const oA=Uv;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(n,e){return e?Lr(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp extends Xd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uA(n){return xv(n.auth,new tp(n),n.bypassAuthState)}function lA(n){const{auth:e,user:t}=n;return _e(t,e,"internal-error"),FR(t,new tp(n),n.bypassAuthState)}async function cA(n){const{auth:e,user:t}=n;return _e(t,e,"internal-error"),MR(t,new tp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uA;case"linkViaPopup":case"linkViaRedirect":return cA;case"reauthViaPopup":case"reauthViaRedirect":return lA;default:qn(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new yu(2e3,1e4);class Ao extends jv{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Ao.currentPopupAction&&Ao.currentPopupAction.cancel(),Ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=ep();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hA.get())};e()}}Ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="pendingRedirect",rc=new Map;class dA extends jv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=rc.get(this.auth._key());if(!e){try{const i=await pA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}rc.set(this.auth._key(),e)}return this.bypassAuthState||rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pA(n,e){const t=yA(e),i=gA(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function mA(n,e){rc.set(n._key(),e)}function gA(n){return Lr(n._redirectPersistence)}function yA(n){return nc(fA,n.config.apiKey,n.name)}async function _A(n,e,t=!1){if(sr(n.app))return Promise.reject(Vr(n));const i=Cs(n),o=aA(i,e),c=await new dA(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=10*60*1e3;class EA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!zv(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(or(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cy(e))}saveEventToCache(e){this.cachedEventUids.add(Cy(e)),this.lastProcessedEventTime=Date.now()}}function Cy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zv({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zv(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(n,e={}){return ji(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SA=/^https?/;async function CA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await TA(n);for(const t of e)try{if(RA(t))return}catch{}qn(n,"unauthorized-domain")}function RA(n){const e=pd(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!SA.test(t))return!1;if(IA.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=new yu(3e4,6e4);function Ry(){const n=ar().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function PA(n){return new Promise((e,t)=>{var i,o,a;function c(){Ry(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ry(),t(or(n,"network-request-failed"))},timeout:AA.get()})}if(!((o=(i=ar().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=ar().gapi)===null||a===void 0)&&a.load)c();else{const f=vR("iframefcb");return ar()[f]=()=>{gapi.load?c():t(or(n,"network-request-failed"))},Cv(`${_R()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw ic=null,e})}let ic=null;function kA(n){return ic=ic||PA(n),ic}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new yu(5e3,15e3),DA="__/auth/iframe",NA="emulator/auth/iframe",OA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bA(n){const e=n.config;_e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Gd(e,NA):`https://${n.config.authDomain}/${DA}`,i={apiKey:e.apiKey,appName:n.name,v:$o},o=LA.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${gu(i).slice(1)}`}async function VA(n){const e=await kA(n),t=ar().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:bA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OA,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const c=or(n,"network-request-failed"),f=ar().setTimeout(()=>{a(c)},xA.get());function p(){ar().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FA=500,UA=600,jA="_blank",zA="http://localhost";class Ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $A(n,e,t,i=FA,o=UA){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p=Object.assign(Object.assign({},MA),{width:i.toString(),height:o.toString(),top:a,left:c}),y=zt().toLowerCase();t&&(f=_v(y)?jA:t),gv(y)&&(e=e||zA,p.scrollbars="yes");const v=Object.entries(p).reduce((I,[P,L])=>`${I}${P}=${L},`,"");if(lR(y)&&f!=="_self")return BA(e||"",f),new Ay(null);const T=window.open(e||"",f,v);_e(T,n,"popup-blocked");try{T.focus()}catch{}return new Ay(T)}function BA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="__/auth/handler",HA="emulator/auth/handler",WA=encodeURIComponent("fac");async function Py(n,e,t,i,o,a){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:$o,eventId:o};if(e instanceof Pv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",D0(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))c[v]=T}if(e instanceof vu){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await n._getAppCheckToken(),y=p?`#${WA}=${encodeURIComponent(p)}`:"";return`${KA(n)}?${gu(f).slice(1)}${y}`}function KA({config:n}){return n.emulator?Gd(n,HA):`https://${n.authDomain}/${qA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="webStorageSupport";class QA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bv,this._completeRedirectFn=_A,this._overrideRedirectResult=mA}async _openPopup(e,t,i,o){var a;jr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await Py(e,t,i,pd(),o);return $A(e,c,ep())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await Py(e,t,i,pd(),o);return JR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(jr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await VA(e),i=new EA(e);return t.register("authEvent",o=>(_e(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xf,{type:Xf},o=>{var a;const c=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Xf];c!==void 0&&t(!!c),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Iv()||yv()||Jd()}}const GA=QA;var ky="@firebase/auth",xy="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XA(n){No(new _s("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;_e(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sv(n)},y=new mR(i,o,a,p);return CR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),No(new _s("auth-internal",e=>{const t=Cs(e.getProvider("auth").getImmediate());return(i=>new YA(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(ky,xy,JA(n)),Ai(ky,xy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=5*60,eP=ev("authIdTokenMaxAge")||ZA;let Dy=null;const tP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>eP)return;const o=t==null?void 0:t.token;Dy!==o&&(Dy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function nP(n=iv()){const e=Wd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=SR(n,{popupRedirectResolver:GA,persistence:[oA,QR,bv]}),i=ev("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=tP(a.toString());BR(t,c,()=>c(t.currentUser)),$R(t,f=>c(f))}}const o=X_("auth");return o&&RR(t,`http://${o}`),t}function rP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}gR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=or("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",rP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XA("Browser");var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pi,$v;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function R(){}R.prototype=S.prototype,D.D=S.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(x,O,F){for(var A=Array(arguments.length-2),je=2;je<arguments.length;je++)A[je-2]=arguments[je];return S.prototype[O].apply(x,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,S,R){R||(R=0);var x=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)x[O]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(O=0;16>O;++O)x[O]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=D.g[0],R=D.g[1],O=D.g[2];var F=D.g[3],A=S+(F^R&(O^F))+x[0]+3614090360&4294967295;S=R+(A<<7&4294967295|A>>>25),A=F+(O^S&(R^O))+x[1]+3905402710&4294967295,F=S+(A<<12&4294967295|A>>>20),A=O+(R^F&(S^R))+x[2]+606105819&4294967295,O=F+(A<<17&4294967295|A>>>15),A=R+(S^O&(F^S))+x[3]+3250441966&4294967295,R=O+(A<<22&4294967295|A>>>10),A=S+(F^R&(O^F))+x[4]+4118548399&4294967295,S=R+(A<<7&4294967295|A>>>25),A=F+(O^S&(R^O))+x[5]+1200080426&4294967295,F=S+(A<<12&4294967295|A>>>20),A=O+(R^F&(S^R))+x[6]+2821735955&4294967295,O=F+(A<<17&4294967295|A>>>15),A=R+(S^O&(F^S))+x[7]+4249261313&4294967295,R=O+(A<<22&4294967295|A>>>10),A=S+(F^R&(O^F))+x[8]+1770035416&4294967295,S=R+(A<<7&4294967295|A>>>25),A=F+(O^S&(R^O))+x[9]+2336552879&4294967295,F=S+(A<<12&4294967295|A>>>20),A=O+(R^F&(S^R))+x[10]+4294925233&4294967295,O=F+(A<<17&4294967295|A>>>15),A=R+(S^O&(F^S))+x[11]+2304563134&4294967295,R=O+(A<<22&4294967295|A>>>10),A=S+(F^R&(O^F))+x[12]+1804603682&4294967295,S=R+(A<<7&4294967295|A>>>25),A=F+(O^S&(R^O))+x[13]+4254626195&4294967295,F=S+(A<<12&4294967295|A>>>20),A=O+(R^F&(S^R))+x[14]+2792965006&4294967295,O=F+(A<<17&4294967295|A>>>15),A=R+(S^O&(F^S))+x[15]+1236535329&4294967295,R=O+(A<<22&4294967295|A>>>10),A=S+(O^F&(R^O))+x[1]+4129170786&4294967295,S=R+(A<<5&4294967295|A>>>27),A=F+(R^O&(S^R))+x[6]+3225465664&4294967295,F=S+(A<<9&4294967295|A>>>23),A=O+(S^R&(F^S))+x[11]+643717713&4294967295,O=F+(A<<14&4294967295|A>>>18),A=R+(F^S&(O^F))+x[0]+3921069994&4294967295,R=O+(A<<20&4294967295|A>>>12),A=S+(O^F&(R^O))+x[5]+3593408605&4294967295,S=R+(A<<5&4294967295|A>>>27),A=F+(R^O&(S^R))+x[10]+38016083&4294967295,F=S+(A<<9&4294967295|A>>>23),A=O+(S^R&(F^S))+x[15]+3634488961&4294967295,O=F+(A<<14&4294967295|A>>>18),A=R+(F^S&(O^F))+x[4]+3889429448&4294967295,R=O+(A<<20&4294967295|A>>>12),A=S+(O^F&(R^O))+x[9]+568446438&4294967295,S=R+(A<<5&4294967295|A>>>27),A=F+(R^O&(S^R))+x[14]+3275163606&4294967295,F=S+(A<<9&4294967295|A>>>23),A=O+(S^R&(F^S))+x[3]+4107603335&4294967295,O=F+(A<<14&4294967295|A>>>18),A=R+(F^S&(O^F))+x[8]+1163531501&4294967295,R=O+(A<<20&4294967295|A>>>12),A=S+(O^F&(R^O))+x[13]+2850285829&4294967295,S=R+(A<<5&4294967295|A>>>27),A=F+(R^O&(S^R))+x[2]+4243563512&4294967295,F=S+(A<<9&4294967295|A>>>23),A=O+(S^R&(F^S))+x[7]+1735328473&4294967295,O=F+(A<<14&4294967295|A>>>18),A=R+(F^S&(O^F))+x[12]+2368359562&4294967295,R=O+(A<<20&4294967295|A>>>12),A=S+(R^O^F)+x[5]+4294588738&4294967295,S=R+(A<<4&4294967295|A>>>28),A=F+(S^R^O)+x[8]+2272392833&4294967295,F=S+(A<<11&4294967295|A>>>21),A=O+(F^S^R)+x[11]+1839030562&4294967295,O=F+(A<<16&4294967295|A>>>16),A=R+(O^F^S)+x[14]+4259657740&4294967295,R=O+(A<<23&4294967295|A>>>9),A=S+(R^O^F)+x[1]+2763975236&4294967295,S=R+(A<<4&4294967295|A>>>28),A=F+(S^R^O)+x[4]+1272893353&4294967295,F=S+(A<<11&4294967295|A>>>21),A=O+(F^S^R)+x[7]+4139469664&4294967295,O=F+(A<<16&4294967295|A>>>16),A=R+(O^F^S)+x[10]+3200236656&4294967295,R=O+(A<<23&4294967295|A>>>9),A=S+(R^O^F)+x[13]+681279174&4294967295,S=R+(A<<4&4294967295|A>>>28),A=F+(S^R^O)+x[0]+3936430074&4294967295,F=S+(A<<11&4294967295|A>>>21),A=O+(F^S^R)+x[3]+3572445317&4294967295,O=F+(A<<16&4294967295|A>>>16),A=R+(O^F^S)+x[6]+76029189&4294967295,R=O+(A<<23&4294967295|A>>>9),A=S+(R^O^F)+x[9]+3654602809&4294967295,S=R+(A<<4&4294967295|A>>>28),A=F+(S^R^O)+x[12]+3873151461&4294967295,F=S+(A<<11&4294967295|A>>>21),A=O+(F^S^R)+x[15]+530742520&4294967295,O=F+(A<<16&4294967295|A>>>16),A=R+(O^F^S)+x[2]+3299628645&4294967295,R=O+(A<<23&4294967295|A>>>9),A=S+(O^(R|~F))+x[0]+4096336452&4294967295,S=R+(A<<6&4294967295|A>>>26),A=F+(R^(S|~O))+x[7]+1126891415&4294967295,F=S+(A<<10&4294967295|A>>>22),A=O+(S^(F|~R))+x[14]+2878612391&4294967295,O=F+(A<<15&4294967295|A>>>17),A=R+(F^(O|~S))+x[5]+4237533241&4294967295,R=O+(A<<21&4294967295|A>>>11),A=S+(O^(R|~F))+x[12]+1700485571&4294967295,S=R+(A<<6&4294967295|A>>>26),A=F+(R^(S|~O))+x[3]+2399980690&4294967295,F=S+(A<<10&4294967295|A>>>22),A=O+(S^(F|~R))+x[10]+4293915773&4294967295,O=F+(A<<15&4294967295|A>>>17),A=R+(F^(O|~S))+x[1]+2240044497&4294967295,R=O+(A<<21&4294967295|A>>>11),A=S+(O^(R|~F))+x[8]+1873313359&4294967295,S=R+(A<<6&4294967295|A>>>26),A=F+(R^(S|~O))+x[15]+4264355552&4294967295,F=S+(A<<10&4294967295|A>>>22),A=O+(S^(F|~R))+x[6]+2734768916&4294967295,O=F+(A<<15&4294967295|A>>>17),A=R+(F^(O|~S))+x[13]+1309151649&4294967295,R=O+(A<<21&4294967295|A>>>11),A=S+(O^(R|~F))+x[4]+4149444226&4294967295,S=R+(A<<6&4294967295|A>>>26),A=F+(R^(S|~O))+x[11]+3174756917&4294967295,F=S+(A<<10&4294967295|A>>>22),A=O+(S^(F|~R))+x[2]+718787259&4294967295,O=F+(A<<15&4294967295|A>>>17),A=R+(F^(O|~S))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(O+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+F&4294967295}i.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var R=S-this.blockSize,x=this.B,O=this.h,F=0;F<S;){if(O==0)for(;F<=R;)o(this,D,F),F+=this.blockSize;if(typeof D=="string"){for(;F<S;)if(x[O++]=D.charCodeAt(F++),O==this.blockSize){o(this,x),O=0;break}}else for(;F<S;)if(x[O++]=D[F++],O==this.blockSize){o(this,x),O=0;break}}this.h=O,this.o+=S},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var R=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=R&255,R/=256;for(this.u(D),D=Array(16),S=R=0;4>S;++S)for(var x=0;32>x;x+=8)D[R++]=this.g[S]>>>x&255;return D};function a(D,S){var R=f;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=S(D)}function c(D,S){this.h=S;for(var R=[],x=!0,O=D.length-1;0<=O;O--){var F=D[O]|0;x&&F==S||(R[O]=F,x=!1)}this.g=R}var f={};function p(D){return-128<=D&&128>D?a(D,function(S){return new c([S|0],0>S?-1:0)}):new c([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return V(y(-D));for(var S=[],R=1,x=0;D>=R;x++)S[x]=D/R|0,R*=4294967296;return new c(S,0)}function v(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return V(v(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(S,8)),x=T,O=0;O<D.length;O+=8){var F=Math.min(8,D.length-O),A=parseInt(D.substring(O,O+F),S);8>F?(F=y(Math.pow(S,F)),x=x.j(F).add(y(A))):(x=x.j(R),x=x.add(y(A)))}return x}var T=p(0),I=p(1),P=p(16777216);n=c.prototype,n.m=function(){if(B(this))return-V(this).m();for(var D=0,S=1,R=0;R<this.g.length;R++){var x=this.i(R);D+=(0<=x?x:4294967296+x)*S,S*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(L(this))return"0";if(B(this))return"-"+V(this).toString(D);for(var S=y(Math.pow(D,6)),R=this,x="";;){var O=ue(R,S).g;R=H(R,O.j(S));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=O,L(R))return F+x;for(;6>F.length;)F="0"+F;x=F+x}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function L(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function B(D){return D.h==-1}n.l=function(D){return D=H(this,D),B(D)?-1:L(D)?0:1};function V(D){for(var S=D.g.length,R=[],x=0;x<S;x++)R[x]=~D.g[x];return new c(R,~D.h).add(I)}n.abs=function(){return B(this)?V(this):this},n.add=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],x=0,O=0;O<=S;O++){var F=x+(this.i(O)&65535)+(D.i(O)&65535),A=(F>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);x=A>>>16,F&=65535,A&=65535,R[O]=A<<16|F}return new c(R,R[R.length-1]&-2147483648?-1:0)};function H(D,S){return D.add(V(S))}n.j=function(D){if(L(this)||L(D))return T;if(B(this))return B(D)?V(this).j(V(D)):V(V(this).j(D));if(B(D))return V(this.j(V(D)));if(0>this.l(P)&&0>D.l(P))return y(this.m()*D.m());for(var S=this.g.length+D.g.length,R=[],x=0;x<2*S;x++)R[x]=0;for(x=0;x<this.g.length;x++)for(var O=0;O<D.g.length;O++){var F=this.i(x)>>>16,A=this.i(x)&65535,je=D.i(O)>>>16,tt=D.i(O)&65535;R[2*x+2*O]+=A*tt,X(R,2*x+2*O),R[2*x+2*O+1]+=F*tt,X(R,2*x+2*O+1),R[2*x+2*O+1]+=A*je,X(R,2*x+2*O+1),R[2*x+2*O+2]+=F*je,X(R,2*x+2*O+2)}for(x=0;x<S;x++)R[x]=R[2*x+1]<<16|R[2*x];for(x=S;x<2*S;x++)R[x]=0;return new c(R,0)};function X(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function G(D,S){this.g=D,this.h=S}function ue(D,S){if(L(S))throw Error("division by zero");if(L(D))return new G(T,T);if(B(D))return S=ue(V(D),S),new G(V(S.g),V(S.h));if(B(S))return S=ue(D,V(S)),new G(V(S.g),S.h);if(30<D.g.length){if(B(D)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var R=I,x=S;0>=x.l(D);)R=we(R),x=we(x);var O=pe(R,1),F=pe(x,1);for(x=pe(x,2),R=pe(R,2);!L(x);){var A=F.add(x);0>=A.l(D)&&(O=O.add(R),F=A),x=pe(x,1),R=pe(R,1)}return S=H(D,O.j(S)),new G(O,S)}for(O=T;0<=D.l(S);){for(R=Math.max(1,Math.floor(D.m()/S.m())),x=Math.ceil(Math.log(R)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),F=y(R),A=F.j(S);B(A)||0<A.l(D);)R-=x,F=y(R),A=F.j(S);L(F)&&(F=I),O=O.add(F),D=H(D,A)}return new G(O,D)}n.A=function(D){return ue(this,D).h},n.and=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],x=0;x<S;x++)R[x]=this.i(x)&D.i(x);return new c(R,this.h&D.h)},n.or=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],x=0;x<S;x++)R[x]=this.i(x)|D.i(x);return new c(R,this.h|D.h)},n.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],x=0;x<S;x++)R[x]=this.i(x)^D.i(x);return new c(R,this.h^D.h)};function we(D){for(var S=D.g.length+1,R=[],x=0;x<S;x++)R[x]=D.i(x)<<1|D.i(x-1)>>>31;return new c(R,D.h)}function pe(D,S){var R=S>>5;S%=32;for(var x=D.g.length-R,O=[],F=0;F<x;F++)O[F]=0<S?D.i(F+R)>>>S|D.i(F+R+1)<<32-S:D.i(F+R);return new c(O,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,$v=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=v,Pi=c}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bv,Ka,qv,sc,_d,Hv,Wv,Kv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,_){return l==Array.prototype||l==Object.prototype||(l[m]=_.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wl=="object"&&Wl];for(var m=0;m<l.length;++m){var _=l[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(l,m){if(m)e:{var _=i;l=l.split(".");for(var w=0;w<l.length-1;w++){var U=l[w];if(!(U in _))break e;_=_[U]}l=l[l.length-1],w=_[l],m=m(w),m!=w&&m!=null&&e(_,l,{configurable:!0,writable:!0,value:m})}}function a(l,m){l instanceof String&&(l+="");var _=0,w=!1,U={next:function(){if(!w&&_<l.length){var q=_++;return{value:m(q,l[q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(l){return l||function(){return a(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function y(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function v(l,m,_){return l.call.apply(l.bind,arguments)}function T(l,m,_){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,w),l.apply(m,U)}}return function(){return l.apply(m,arguments)}}function I(l,m,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,I.apply(null,arguments)}function P(l,m){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function L(l,m){function _(){}_.prototype=m.prototype,l.aa=m.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(w,U,q){for(var ne=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ne[$e-2]=arguments[$e];return m.prototype[U].apply(w,ne)}}function B(l){const m=l.length;if(0<m){const _=Array(m);for(let w=0;w<m;w++)_[w]=l[w];return _}return[]}function V(l,m){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const U=l.length||0,q=w.length||0;l.length=U+q;for(let ne=0;ne<q;ne++)l[U+ne]=w[ne]}else l.push(w)}}class H{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function X(l){return/^[\s\xa0]*$/.test(l)}function G(){var l=f.navigator;return l&&(l=l.userAgent)?l:""}function ue(l){return ue[" "](l),l}ue[" "]=function(){};var we=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function pe(l,m,_){for(const w in l)m.call(_,l[w],w,l)}function D(l,m){for(const _ in l)m.call(void 0,l[_],_,l)}function S(l){const m={};for(const _ in l)m[_]=l[_];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,m){let _,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(_ in w)l[_]=w[_];for(let q=0;q<R.length;q++)_=R[q],Object.prototype.hasOwnProperty.call(w,_)&&(l[_]=w[_])}}function O(l){var m=1;l=l.split(":");const _=[];for(;0<m&&l.length;)_.push(l.shift()),m--;return l.length&&_.push(l.join(":")),_}function F(l){f.setTimeout(()=>{throw l},0)}function A(){var l=he;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class je{constructor(){this.h=this.g=null}add(m,_){const w=tt.get();w.set(m,_),this.h?this.h.next=w:this.g=w,this.h=w}}var tt=new H(()=>new qe,l=>l.reset());class qe{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,te=!1,he=new je,re=()=>{const l=f.Promise.resolve(void 0);Ne=()=>{l.then(b)}};var b=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(_){F(_)}var m=tt;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}te=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};f.addEventListener("test",_,m),f.removeEventListener("test",_,m)}catch{}return l}();function Re(l,m){if(de.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(we){e:{try{ue(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else _=="mouseover"?m=l.fromElement:_=="mouseout"&&(m=l.toElement);this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Oe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Re.aa.h.call(this)}}L(Re,de);var Oe={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function We(l,m,_,w,U){this.listener=l,this.proxy=null,this.src=m,this.type=_,this.capture=!!w,this.ha=U,this.key=++Ue,this.da=this.fa=!1}function Et(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function dr(l){this.src=l,this.g={},this.h=0}dr.prototype.add=function(l,m,_,w,U){var q=l.toString();l=this.g[q],l||(l=this.g[q]=[],this.h++);var ne=Hr(l,m,w,U);return-1<ne?(m=l[ne],_||(m.fa=!1)):(m=new We(m,this.src,q,!!w,U),m.fa=_,l.push(m)),m};function xs(l,m){var _=m.type;if(_ in l.g){var w=l.g[_],U=Array.prototype.indexOf.call(w,m,void 0),q;(q=0<=U)&&Array.prototype.splice.call(w,U,1),q&&(Et(m),l.g[_].length==0&&(delete l.g[_],l.h--))}}function Hr(l,m,_,w){for(var U=0;U<l.length;++U){var q=l[U];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==w)return U}return-1}var zi="closure_lm_"+(1e6*Math.random()|0),Ds={};function Qo(l,m,_,w,U){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Qo(l,m[q],_,w,U);return null}return _=Jo(_),l&&l[Fe]?l.K(m,_,y(w)?!!w.capture:!1,U):Go(l,m,_,!1,w,U)}function Go(l,m,_,w,U,q){if(!m)throw Error("Invalid event type");var ne=y(U)?!!U.capture:!!U,$e=Os(l);if($e||(l[zi]=$e=new dr(l)),_=$e.add(m,_,w,ne,q),_.proxy)return _;if(w=Au(),_.proxy=w,w.src=l,w.listener=_,l.addEventListener)Ce||(U=ne),U===void 0&&(U=!1),l.addEventListener(m.toString(),w,U);else if(l.attachEvent)l.attachEvent(mr(m.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Au(){function l(_){return m.call(l.src,l.listener,_)}const m=Yo;return l}function Ns(l,m,_,w,U){if(Array.isArray(m))for(var q=0;q<m.length;q++)Ns(l,m[q],_,w,U);else w=y(w)?!!w.capture:!!w,_=Jo(_),l&&l[Fe]?(l=l.i,m=String(m).toString(),m in l.g&&(q=l.g[m],_=Hr(q,_,w,U),-1<_&&(Et(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete l.g[m],l.h--)))):l&&(l=Os(l))&&(m=l.g[m.toString()],l=-1,m&&(l=Hr(m,_,w,U)),(_=-1<l?m[l]:null)&&pr(_))}function pr(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[Fe])xs(m.i,l);else{var _=l.type,w=l.proxy;m.removeEventListener?m.removeEventListener(_,w,l.capture):m.detachEvent?m.detachEvent(mr(_),w):m.addListener&&m.removeListener&&m.removeListener(w),(_=Os(m))?(xs(_,l),_.h==0&&(_.src=null,m[zi]=null)):Et(l)}}}function mr(l){return l in Ds?Ds[l]:Ds[l]="on"+l}function Yo(l,m){if(l.da)l=!0;else{m=new Re(m,this);var _=l.listener,w=l.ha||l.src;l.fa&&pr(l),l=_.call(w,m)}return l}function Os(l){return l=l[zi],l instanceof dr?l:null}var Ls="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jo(l){return typeof l=="function"?l:(l[Ls]||(l[Ls]=function(m){return l.handleEvent(m)}),l[Ls])}function dt(){W.call(this),this.i=new dr(this),this.M=this,this.F=null}L(dt,W),dt.prototype[Fe]=!0,dt.prototype.removeEventListener=function(l,m,_,w){Ns(this,l,m,_,w)};function pt(l,m){var _,w=l.F;if(w)for(_=[];w;w=w.F)_.push(w);if(l=l.M,w=m.type||m,typeof m=="string")m=new de(m,l);else if(m instanceof de)m.target=m.target||l;else{var U=m;m=new de(w,l),x(m,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var ne=m.g=_[q];U=gr(ne,w,!0,m)&&U}if(ne=m.g=l,U=gr(ne,w,!0,m)&&U,U=gr(ne,w,!1,m)&&U,_)for(q=0;q<_.length;q++)ne=m.g=_[q],U=gr(ne,w,!1,m)&&U}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var _=l.g[m],w=0;w<_.length;w++)Et(_[w]);delete l.g[m],l.h--}}this.F=null},dt.prototype.K=function(l,m,_,w){return this.i.add(String(l),m,!1,_,w)},dt.prototype.L=function(l,m,_,w){return this.i.add(String(l),m,!0,_,w)};function gr(l,m,_,w){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,q=0;q<m.length;++q){var ne=m[q];if(ne&&!ne.da&&ne.capture==_){var $e=ne.listener,mt=ne.ha||ne.src;ne.fa&&xs(l.i,ne),U=$e.call(mt,w)!==!1&&U}}return U&&!w.defaultPrevented}function Xo(l,m,_){if(typeof l=="function")_&&(l=I(l,_));else if(l&&typeof l.handleEvent=="function")l=I(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:f.setTimeout(l,m||0)}function Wr(l){l.g=Xo(()=>{l.g=null,l.i&&(l.i=!1,Wr(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class $i extends W{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(l){W.call(this),this.h=l,this.g={}}L(Bi,W);var Zo=[];function ea(l){pe(l.g,function(m,_){this.g.hasOwnProperty(_)&&pr(m)},l),l.g={}}Bi.prototype.N=function(){Bi.aa.N.call(this),ea(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ta=f.JSON.stringify,na=f.JSON.parse,ra=class{stringify(l){return f.JSON.stringify(l,void 0)}parse(l){return f.JSON.parse(l,void 0)}};function qi(){}qi.prototype.h=null;function bs(l){return l.h||(l.h=l.i())}function Vs(){}var pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kn(){de.call(this,"d")}L(Kn,de);function Ms(){de.call(this,"c")}L(Ms,de);var Qn={},ia=null;function Hi(){return ia=ia||new dt}Qn.La="serverreachability";function sa(l){de.call(this,Qn.La,l)}L(sa,de);function yr(l){const m=Hi();pt(m,new sa(m))}Qn.STAT_EVENT="statevent";function oa(l,m){de.call(this,Qn.STAT_EVENT,l),this.stat=m}L(oa,de);function ot(l){const m=Hi();pt(m,new oa(m,l))}Qn.Ma="timingevent";function Fs(l,m){de.call(this,Qn.Ma,l),this.size=m}L(Fs,de);function An(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){l()},m)}function Wi(){this.g=!0}Wi.prototype.xa=function(){this.g=!1};function Ki(l,m,_,w,U,q){l.info(function(){if(l.g)if(q)for(var ne="",$e=q.split("&"),mt=0;mt<$e.length;mt++){var Le=$e[mt].split("=");if(1<Le.length){var wt=Le[0];Le=Le[1];var lt=wt.split("_");ne=2<=lt.length&&lt[1]=="type"?ne+(wt+"="+Le+"&"):ne+(wt+"=redacted&")}}else ne=null;else ne=q;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+m+`
`+_+`
`+ne})}function Us(l,m,_,w,U,q,ne){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+m+`
`+_+`
`+q+" "+ne})}function Pn(l,m,_,w){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+fh(l,_)+(w?" "+w:"")})}function aa(l,m){l.info(function(){return"TIMEOUT: "+m})}Wi.prototype.info=function(){};function fh(l,m){if(!l.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var w=_[l];if(!(2>w.length)){var U=w[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ne=1;ne<U.length;ne++)U[ne]=""}}}}return ta(_)}catch{return m}}var js={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kn;function Qi(){}L(Qi,qi),Qi.prototype.g=function(){return new XMLHttpRequest},Qi.prototype.i=function(){return{}},kn=new Qi;function xn(l,m,_,w){this.j=l,this.i=m,this.l=_,this.R=w||1,this.U=new Bi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ku}function ku(){this.i=null,this.g="",this.h=!1}var ua={},zs={};function $s(l,m,_){l.L=1,l.v=Jr(an(m)),l.m=_,l.P=!0,la(l,null)}function la(l,m){l.F=Date.now(),Ke(l),l.A=an(l.v);var _=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Zr(_.i,"t",w),l.C=0,_=l.j.J,l.h=new ku,l.g=Ku(l.j,_?m:null,!l.m),0<l.O&&(l.M=new $i(I(l.Y,l,l.g),l.O)),m=l.U,_=l.g,w=l.ca;var U="readystatechange";Array.isArray(U)||(U&&(Zo[0]=U.toString()),U=Zo);for(var q=0;q<U.length;q++){var ne=Qo(_,U[q],w||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),yr(),Ki(l.i,l.u,l.A,l.l,l.R,l.m)}xn.prototype.ca=function(l){l=l.target;const m=this.M;m&&Yt(l)==3?m.j():this.Y(l)},xn.prototype.Y=function(l){try{if(l==this.g)e:{const lt=Yt(this.g);var m=this.g.Ba();const yn=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||ma(this.g)))){this.J||lt!=4||m==7||(m==8||0>=yn?yr(3):yr(2)),Gi(this);var _=this.g.Z();this.X=_;t:if(xu(this)){var w=ma(this.g);l="";var U=w.length,q=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),Kr(this);var ne="";break t}this.h.i=new f.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,l+=this.h.i.decode(w[m],{stream:!(q&&m==U-1)});w.length=0,this.h.g+=l,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=_==200,Us(this.i,this.u,this.A,this.l,this.R,lt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,mt=this.g;if(($e=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X($e)){var Le=$e;break t}}Le=null}if(_=Le)Pn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ca(this,_);else{this.o=!1,this.s=3,ot(12),mn(this),Kr(this);break e}}if(this.P){_=!0;let ln;for(;!this.J&&this.C<ne.length;)if(ln=dh(this,ne),ln==zs){lt==4&&(this.s=4,ot(14),_=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==ua){this.s=4,ot(15),Pn(this.i,this.l,ne,"[Invalid Chunk]"),_=!1;break}else Pn(this.i,this.l,ln,null),ca(this,ln);if(xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||ne.length!=0||this.h.h||(this.s=1,ot(16),_=!1),this.o=this.o&&_,!_)Pn(this.i,this.l,ne,"[Invalid Chunked Response]"),mn(this),Kr(this);else if(0<ne.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),ya(wt),wt.M=!0,ot(11))}}else Pn(this.i,this.l,ne,null),ca(this,ne);lt==4&&mn(this),this.o&&!this.J&&(lt==4?Zs(this.j,this):(this.o=!1,Ke(this)))}else Qs(this.g),_==400&&0<ne.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),mn(this),Kr(this)}}}catch{}finally{}};function xu(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function dh(l,m){var _=l.C,w=m.indexOf(`
`,_);return w==-1?zs:(_=Number(m.substring(_,w)),isNaN(_)?ua:(w+=1,w+_>m.length?zs:(m=m.slice(w,w+_),l.C=w+_,m)))}xn.prototype.cancel=function(){this.J=!0,mn(this)};function Ke(l){l.S=Date.now()+l.I,Du(l,l.I)}function Du(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=An(I(l.ba,l),m)}function Gi(l){l.B&&(f.clearTimeout(l.B),l.B=null)}xn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(aa(this.i,this.A),this.L!=2&&(yr(),ot(17)),mn(this),this.s=2,Kr(this)):Du(this,this.S-l)};function Kr(l){l.j.G==0||l.J||Zs(l.j,l)}function mn(l){Gi(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,ea(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function ca(l,m){try{var _=l.j;if(_.G!=0&&(_.g==l||$t(_.h,l))){if(!l.K&&$t(_.h,l)&&_.G==3){try{var w=_.Da.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)Xs(_),bn(_);else break e;Js(_),ot(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=An(I(_.Za,_),6e3));if(1>=Ou(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Tr(_,11)}else if((l.K||_.g==l)&&Xs(_),!X(m))for(U=_.Da.g.parse(m),m=0;m<U.length;m++){let Le=U[m];if(_.T=Le[0],Le=Le[1],_.G==2)if(Le[0]=="c"){_.K=Le[1],_.ia=Le[2];const wt=Le[3];wt!=null&&(_.la=wt,_.j.info("VER="+_.la));const lt=Le[4];lt!=null&&(_.Aa=lt,_.j.info("SVER="+_.Aa));const yn=Le[5];yn!=null&&typeof yn=="number"&&0<yn&&(w=1.5*yn,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const ln=l.g;if(ln){const ns=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ns){var q=w.h;q.g||ns.indexOf("spdy")==-1&&ns.indexOf("quic")==-1&&ns.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ha(q,q.h),q.h=null))}if(w.D){const to=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;to&&(w.ya=to,He(w.I,w.D,to))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var ne=l;if(w.qa=Wu(w,w.J?w.ia:null,w.W),ne.K){Lu(w.h,ne);var $e=ne,mt=w.L;mt&&($e.I=mt),$e.B&&(Gi($e),Ke($e)),w.g=ne}else ts(w);0<_.i.length&&Xn(_)}else Le[0]!="stop"&&Le[0]!="close"||Tr(_,7);else _.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Tr(_,7):At(_):Le[0]!="noop"&&_.l&&_.l.ta(Le),_.v=0)}}yr(4)}catch{}}var Nu=class{constructor(l,m){this.g=l,this.map=m}};function Yi(l){this.l=l||10,f.PerformanceNavigationTiming?(l=f.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function on(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ou(l){return l.h?1:l.g?l.g.size:0}function $t(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function ha(l,m){l.g?l.g.add(m):l.h=m}function Lu(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}Yi.prototype.cancel=function(){if(this.i=bu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function bu(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const _ of l.g.values())m=m.concat(_.D);return m}return B(l.i)}function Bs(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(p(l)){for(var m=[],_=l.length,w=0;w<_;w++)m.push(l[w]);return m}m=[],_=0;for(w in l)m[_++]=l[w];return m}function qs(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(p(l)||typeof l=="string"){var m=[];l=l.length;for(var _=0;_<l;_++)m.push(_);return m}m=[],_=0;for(const w in l)m[_++]=w;return m}}}function Qr(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(p(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var _=qs(l),w=Bs(l),U=w.length,q=0;q<U;q++)m.call(void 0,w[q],_&&_[q],l)}var Ji=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ph(l,m){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var w=l[_].indexOf("="),U=null;if(0<=w){var q=l[_].substring(0,w);U=l[_].substring(w+1)}else q=l[_];m(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function _r(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof _r){this.h=l.h,Xi(this,l.j),this.o=l.o,this.g=l.g,Gr(this,l.s),this.l=l.l;var m=l.i,_=new Gn;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Yr(this,_),this.m=l.m}else l&&(m=String(l).match(Ji))?(this.h=!1,Xi(this,m[1]||"",!0),this.o=xe(m[2]||""),this.g=xe(m[3]||"",!0),Gr(this,m[4]),this.l=xe(m[5]||"",!0),Yr(this,m[6]||"",!0),this.m=xe(m[7]||"")):(this.h=!1,this.i=new Gn(null,this.h))}_r.prototype.toString=function(){var l=[],m=this.j;m&&l.push(Xr(m,Hs,!0),":");var _=this.g;return(_||m=="file")&&(l.push("//"),(m=this.o)&&l.push(Xr(m,Hs,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(Xr(_,_.charAt(0)=="/"?Fu:Mu,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",Xr(_,fa)),l.join("")};function an(l){return new _r(l)}function Xi(l,m,_){l.j=_?xe(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function Gr(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function Yr(l,m,_){m instanceof Gn?(l.i=m,Yn(l.i,l.h)):(_||(m=Xr(m,Uu)),l.i=new Gn(m,l.h))}function He(l,m,_){l.i.set(m,_)}function Jr(l){return He(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function xe(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Xr(l,m,_){return typeof l=="string"?(l=encodeURI(l).replace(m,Vu),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Vu(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Hs=/[#\/\?@]/g,Mu=/[#\?:]/g,Fu=/[#\?]/g,Uu=/[#\?@]/g,fa=/#/g;function Gn(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function Rt(l){l.g||(l.g=new Map,l.h=0,l.i&&ph(l.i,function(m,_){l.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}n=Gn.prototype,n.add=function(l,m){Rt(this),this.i=null,l=gn(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(m),this.h+=1,this};function Dn(l,m){Rt(l),m=gn(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function Nn(l,m){return Rt(l),m=gn(l,m),l.g.has(m)}n.forEach=function(l,m){Rt(this),this.g.forEach(function(_,w){_.forEach(function(U){l.call(m,U,w,this)},this)},this)},n.na=function(){Rt(this);const l=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let w=0;w<m.length;w++){const U=l[w];for(let q=0;q<U.length;q++)_.push(m[w])}return _},n.V=function(l){Rt(this);let m=[];if(typeof l=="string")Nn(this,l)&&(m=m.concat(this.g.get(gn(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)m=m.concat(l[_])}return m},n.set=function(l,m){return Rt(this),this.i=null,l=gn(this,l),Nn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},n.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function Zr(l,m,_){Dn(l,m),0<_.length&&(l.i=null,l.g.set(gn(l,m),B(_)),l.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var w=m[_];const q=encodeURIComponent(String(w)),ne=this.V(w);for(w=0;w<ne.length;w++){var U=q;ne[w]!==""&&(U+="="+encodeURIComponent(String(ne[w]))),l.push(U)}}return this.i=l.join("&")};function gn(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function Yn(l,m){m&&!l.j&&(Rt(l),l.i=null,l.g.forEach(function(_,w){var U=w.toLowerCase();w!=U&&(Dn(this,w),Zr(this,U,_))},l)),l.j=m}function mh(l,m){const _=new Wi;if(f.Image){const w=new Image;w.onload=P(Gt,_,"TestLoadImage: loaded",!0,m,w),w.onerror=P(Gt,_,"TestLoadImage: error",!1,m,w),w.onabort=P(Gt,_,"TestLoadImage: abort",!1,m,w),w.ontimeout=P(Gt,_,"TestLoadImage: timeout",!1,m,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else m(!1)}function ju(l,m){const _=new Wi,w=new AbortController,U=setTimeout(()=>{w.abort(),Gt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:w.signal}).then(q=>{clearTimeout(U),q.ok?Gt(_,"TestPingServer: ok",!0,m):Gt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Gt(_,"TestPingServer: error",!1,m)})}function Gt(l,m,_,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(_)}catch{}}function gh(){this.g=new ra}function zu(l,m,_){const w=_||"";try{Qr(l,function(U,q){let ne=U;y(U)&&(ne=ta(U)),m.push(w+q+"="+encodeURIComponent(ne))})}catch(U){throw m.push(w+"type="+encodeURIComponent("_badmap")),U}}function vr(l){this.l=l.Ub||null,this.j=l.eb||!1}L(vr,qi),vr.prototype.g=function(){return new Zi(this.l,this.j)},vr.prototype.i=function(l){return function(){return l}}({});function Zi(l,m){dt.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Zi,dt),n=Zi.prototype,n.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,Ln(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||f).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,On(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$u(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function $u(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?On(this):Ln(this),this.readyState==3&&$u(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,On(this))},n.Qa=function(l){this.g&&(this.response=l,On(this))},n.ga=function(){this.g&&On(this)};function On(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ln(l)}n.setRequestHeader=function(l,m){this.u.append(l,m)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=m.next();return l.join(`\r
`)};function Ln(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Er(l){let m="";return pe(l,function(_,w){m+=w,m+=":",m+=_,m+=`\r
`}),m}function ei(l,m,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Er(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):He(l,m,_))}function Xe(l){dt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Xe,dt);var yh=/^https?$/i,da=["POST","PUT"];n=Xe.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,m,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kn.g(),this.v=this.o?bs(this.o):bs(kn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(q){es(this,q);return}if(l=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)_.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const q of w.keys())_.set(q,w.get(q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=f.FormData&&l instanceof f.FormData,!(0<=Array.prototype.indexOf.call(da,m,void 0))||w||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ne]of _)this.g.setRequestHeader(q,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ks(this),this.u=!0,this.g.send(l),this.u=!1}catch(q){es(this,q)}};function es(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,Ws(l),un(l)}function Ws(l){l.A||(l.A=!0,pt(l,"complete"),pt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,pt(this,"complete"),pt(this,"abort"),un(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),Xe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?pa(this):this.bb())},n.bb=function(){pa(this)};function pa(l){if(l.h&&typeof c<"u"&&(!l.v[1]||Yt(l)!=4||l.Z()!=2)){if(l.u&&Yt(l)==4)Xo(l.Ea,0,l);else if(pt(l,"readystatechange"),Yt(l)==4){l.h=!1;try{const ne=l.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var w;if(w=ne===0){var U=String(l.D).match(Ji)[1]||null;!U&&f.self&&f.self.location&&(U=f.self.location.protocol.slice(0,-1)),w=!yh.test(U?U.toLowerCase():"")}_=w}if(_)pt(l,"complete"),pt(l,"success");else{l.m=6;try{var q=2<Yt(l)?l.g.statusText:""}catch{q=""}l.l=q+" ["+l.Z()+"]",Ws(l)}}finally{un(l)}}}}function un(l,m){if(l.g){Ks(l);const _=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||pt(l,"ready");try{_.onreadystatechange=w}catch{}}}function Ks(l){l.I&&(f.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Yt(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),na(m)}};function ma(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Qs(l){const m={};l=(l.g&&2<=Yt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(X(l[w]))continue;var _=O(l[w]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[U]||[];m[U]=q,q.push(_)}D(m,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jn(l,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||m}function ga(l){this.Aa=0,this.i=[],this.j=new Wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jn("baseRetryDelayMs",5e3,l),this.cb=Jn("retryDelaySeedMs",1e4,l),this.Wa=Jn("forwardChannelMaxRetries",2,l),this.wa=Jn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Yi(l&&l.concurrentRequestLimit),this.Da=new gh,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ga.prototype,n.la=8,n.G=1,n.connect=function(l,m,_,w){ot(0),this.W=l,this.H=m||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Wu(this,null,this.W),Xn(this)};function At(l){if(Gs(l),l.G==3){var m=l.U++,_=an(l.I);if(He(_,"SID",l.K),He(_,"RID",m),He(_,"TYPE","terminate"),wr(l,_),m=new xn(l,l.j,m),m.L=2,m.v=Jr(an(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=m.v,_=!0),_||(m.g=Ku(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ke(m)}Hu(l)}function bn(l){l.g&&(ya(l),l.g.cancel(),l.g=null)}function Gs(l){bn(l),l.u&&(f.clearTimeout(l.u),l.u=null),Xs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&f.clearTimeout(l.s),l.s=null)}function Xn(l){if(!on(l.h)&&!l.s){l.s=!0;var m=l.Ga;Ne||re(),te||(Ne(),te=!0),he.add(m,l),l.B=0}}function _h(l,m){return Ou(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=An(I(l.Ga,l,m),qu(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const U=new xn(this,this.j,l);let q=this.o;if(this.S&&(q?(q=S(q),x(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=ti(this,U,m),_=an(this.I),He(_,"RID",l),He(_,"CVER",22),this.D&&He(_,"X-HTTP-Session-Id",this.D),wr(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(Er(q)))+"&"+m:this.m&&ei(_,this.m,q)),ha(this.h,U),this.Ua&&He(_,"TYPE","init"),this.P?(He(_,"$req",m),He(_,"SID","null"),U.T=!0,$s(U,_,null)):$s(U,_,m),this.G=2}}else this.G==3&&(l?Ys(this,l):this.i.length==0||on(this.h)||Ys(this))};function Ys(l,m){var _;m?_=m.l:_=l.U++;const w=an(l.I);He(w,"SID",l.K),He(w,"RID",_),He(w,"AID",l.T),wr(l,w),l.m&&l.o&&ei(w,l.m,l.o),_=new xn(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),m&&(l.i=m.D.concat(l.i)),m=ti(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ha(l.h,_),$s(_,w,m)}function wr(l,m){l.H&&pe(l.H,function(_,w){He(m,w,_)}),l.l&&Qr({},function(_,w){He(m,w,_)})}function ti(l,m,_){_=Math.min(l.i.length,_);var w=l.l?I(l.l.Na,l.l,l):null;e:{var U=l.i;let q=-1;for(;;){const ne=["count="+_];q==-1?0<_?(q=U[0].g,ne.push("ofs="+q)):q=0:ne.push("ofs="+q);let $e=!0;for(let mt=0;mt<_;mt++){let Le=U[mt].g;const wt=U[mt].map;if(Le-=q,0>Le)q=Math.max(0,U[mt].g-100),$e=!1;else try{zu(wt,ne,"req"+Le+"_")}catch{w&&w(wt)}}if($e){w=ne.join("&");break e}}}return l=l.i.splice(0,_),m.D=l,w}function ts(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;Ne||re(),te||(Ne(),te=!0),he.add(m,l),l.v=0}}function Js(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=An(I(l.Fa,l),qu(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Bu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=An(I(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),bn(this),Bu(this))};function ya(l){l.A!=null&&(f.clearTimeout(l.A),l.A=null)}function Bu(l){l.g=new xn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=an(l.qa);He(m,"RID","rpc"),He(m,"SID",l.K),He(m,"AID",l.T),He(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&He(m,"TO",l.ja),He(m,"TYPE","xmlhttp"),wr(l,m),l.m&&l.o&&ei(m,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=Jr(an(m)),_.m=null,_.P=!0,la(_,l)}n.Za=function(){this.C!=null&&(this.C=null,bn(this),Js(this),ot(19))};function Xs(l){l.C!=null&&(f.clearTimeout(l.C),l.C=null)}function Zs(l,m){var _=null;if(l.g==m){Xs(l),ya(l),l.g=null;var w=2}else if($t(l.h,m))_=m.D,Lu(l.h,m),w=1;else return;if(l.G!=0){if(m.o)if(w==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var U=l.B;w=Hi(),pt(w,new Fs(w,_)),Xn(l)}else ts(l);else if(U=m.s,U==3||U==0&&0<m.X||!(w==1&&_h(l,m)||w==2&&Js(l)))switch(_&&0<_.length&&(m=l.h,m.i=m.i.concat(_)),U){case 1:Tr(l,5);break;case 4:Tr(l,10);break;case 3:Tr(l,6);break;default:Tr(l,2)}}}function qu(l,m){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*m}function Tr(l,m){if(l.j.info("Error code "+m),m==2){var _=I(l.fb,l),w=l.Xa;const U=!w;w=new _r(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Xi(w,"https"),Jr(w),U?mh(w.toString(),_):ju(w.toString(),_)}else ot(2);l.G=0,l.l&&l.l.sa(m),Hu(l),Gs(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Hu(l){if(l.G=0,l.ka=[],l.l){const m=bu(l.h);(m.length!=0||l.i.length!=0)&&(V(l.ka,m),V(l.ka,l.i),l.h.i.length=0,B(l.i),l.i.length=0),l.l.ra()}}function Wu(l,m,_){var w=_ instanceof _r?an(_):new _r(_);if(w.g!="")m&&(w.g=m+"."+w.g),Gr(w,w.s);else{var U=f.location;w=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var q=new _r(null);w&&Xi(q,w),m&&(q.g=m),U&&Gr(q,U),_&&(q.l=_),w=q}return _=l.D,m=l.ya,_&&m&&He(w,_,m),He(w,"VER",l.la),wr(l,w),w}function Ku(l,m,_){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new Xe(new vr({eb:_})):new Xe(l.pa),m.Ha(l.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _a(){}n=_a.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function eo(){}eo.prototype.g=function(l,m){return new Bt(l,m)};function Bt(l,m){dt.call(this),this.g=new ga(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!X(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!X(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new Zn(this)}L(Bt,dt),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){At(this.g)},Bt.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=ta(l),l=_);m.i.push(new Nu(m.Ya++,l)),m.G==3&&Xn(m)},Bt.prototype.N=function(){this.g.l=null,delete this.j,At(this.g),delete this.g,Bt.aa.N.call(this)};function Qu(l){Kn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const _ in m){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}L(Qu,Kn);function Gu(){Ms.call(this),this.status=1}L(Gu,Ms);function Zn(l){this.g=l}L(Zn,_a),Zn.prototype.ua=function(){pt(this.g,"a")},Zn.prototype.ta=function(l){pt(this.g,new Qu(l))},Zn.prototype.sa=function(l){pt(this.g,new Gu)},Zn.prototype.ra=function(){pt(this.g,"b")},eo.prototype.createWebChannel=eo.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,Kv=function(){return new eo},Wv=function(){return Hi()},Hv=Qn,_d={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},js.NO_ERROR=0,js.TIMEOUT=8,js.HTTP_ERROR=6,sc=js,Pu.COMPLETE="complete",qv=Pu,Vs.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Ka=Vs,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,Bv=Xe}).apply(typeof Wl<"u"?Wl:typeof self<"u"?self:typeof window<"u"?window:{});const Oy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new qd("@firebase/firestore");function Io(){return ws.logLevel}function se(n,...e){if(ws.logLevel<=Pe.DEBUG){const t=e.map(np);ws.debug(`Firestore (${qo}): ${n}`,...t)}}function zr(n,...e){if(ws.logLevel<=Pe.ERROR){const t=e.map(np);ws.error(`Firestore (${qo}): ${n}`,...t)}}function Oo(n,...e){if(ws.logLevel<=Pe.WARN){const t=e.map(np);ws.warn(`Firestore (${qo}): ${n}`,...t)}}function np(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n="Unexpected state"){const e=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: `+n;throw zr(e),new Error(e)}function ze(n,e){n||Ee()}function Se(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ut.UNAUTHENTICATED))}shutdown(){}}class sP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class oP{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Mr,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},f=p=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Mr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ze(typeof i.accessToken=="string"),new Qv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string"),new Ut(e)}}class aP{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class uP{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new aP(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ze(this.o===void 0);const i=a=>{a.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const o=a=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ze(typeof t.token=="string"),this.R=t.token,new lP(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=hP(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%e.length))}return i}}function De(n,e){return n<e?-1:n>e?1:0}function Lo(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new _t(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new _t(0,0))}static max(){return new Ie(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ee(),i===void 0?i=e.length-t:i>e.length-t&&Ee(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ir.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ir?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=ir.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=ir.isNumericId(e),o=ir.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?ir.extractNumericId(e).compare(ir.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pi.fromString(e.substring(4,e.length-2))}}class Je extends ir{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Je(t)}static emptyPath(){return new Je([])}}const fP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends ir{construct(e,t,i){return new Nt(e,t,i)}static isValidIdentifier(e){return fP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ae(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ae(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(i+=f,o++):(a(),o++)}if(a(),c)throw new ae(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(t)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Je.fromString(e))}static fromName(e){return new me(Je.fromString(e).popFirst(5))}static empty(){return new me(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Je(e.slice()))}}function dP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(i===1e9?new _t(t+1,0):new _t(t,i));return new Di(o,me.empty(),e)}function pP(n){return new Di(n.readTime,n.key,-1)}class Di{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Di(Ie.min(),me.empty(),-1)}static max(){return new Di(Ie.max(),me.empty(),-1)}}function mP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(n){if(n.code!==Q.FAILED_PRECONDITION||n.message!==gP)throw n;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,i)=>{t(e)})}static reject(e){return new K((t,i)=>{i(e)})}static waitFor(e){return new K((t,i)=>{let o=0,a=0,c=!1;e.forEach(f=>{++o,f.next(()=>{++a,c&&a===o&&t()},p=>i(p))}),c=!0,a===o&&t()})}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next(o=>o?K.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,a)=>{i.push(t.call(this,o,a))}),this.waitFor(i)}static mapArray(e,t){return new K((i,o)=>{const a=e.length,c=new Array(a);let f=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next(v=>{c[y]=v,++f,f===a&&i(c)},v=>o(v))}})}static doWhile(e,t){return new K((i,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):i()};a()})}}function _P(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hc.oe=-1;function Wc(n){return n==null}function Ic(n){return n===0&&1/n==-1/0}function vP(n){return typeof n=="number"&&Number.isInteger(n)&&!Ic(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ly(e)),e=wP(n.get(t),e);return Ly(e)}function wP(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function Ly(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Yv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||xt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kl(this.root,e,this.comparator,!0)}}class Kl{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??xt.RED,this.left=o??xt.EMPTY,this.right=a??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new xt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return xt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,t,i,o,a){return this}insert(e,t,i){return new xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vy(this.data.getIterator())}getIteratorFrom(e){return new Vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vt(this.comparator);return t.data=e,t}}class Vy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Bn([])}unionWith(e){let t=new vt(Nt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Jv("Invalid base64 string: "+a):a}}(e);return new Ot(t)}static fromUint8Array(e){const t=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(e);return new Ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const TP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(n){if(ze(!!n),typeof n=="string"){let e=0;const t=TP.exec(n);if(ze(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(n.seconds),nanos:ut(n.nanos)}}function ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Oi(n){return typeof n=="string"?Ot.fromBase64String(n):Ot.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Kc(n){const e=n.mapValue.fields.__previous_value__;return rp(e)?Kc(e):e}function au(n){const e=Ni(n.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t,i,o,a,c,f,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y}}class uu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Li(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rp(n)?4:CP(n)?9007199254740991:SP(n)?10:11:Ee()}function fr(n,e){if(n===e)return!0;const t=Li(n);if(t!==Li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return au(n).isEqual(au(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=Ni(o.timestampValue),f=Ni(a.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return Oi(o.bytesValue).isEqual(Oi(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return ut(o.geoPointValue.latitude)===ut(a.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return ut(o.integerValue)===ut(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=ut(o.doubleValue),f=ut(a.doubleValue);return c===f?Ic(c)===Ic(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return Lo(n.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return function(o,a){const c=o.mapValue.fields||{},f=a.mapValue.fields||{};if(by(c)!==by(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!fr(c[p],f[p])))return!1;return!0}(n,e);default:return Ee()}}function lu(n,e){return(n.values||[]).find(t=>fr(t,e))!==void 0}function bo(n,e){if(n===e)return 0;const t=Li(n),i=Li(e);if(t!==i)return De(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return function(a,c){const f=ut(a.integerValue||a.doubleValue),p=ut(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(n,e);case 3:return My(n.timestampValue,e.timestampValue);case 4:return My(au(n),au(e));case 5:return De(n.stringValue,e.stringValue);case 6:return function(a,c){const f=Oi(a),p=Oi(c);return f.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const f=a.split("/"),p=c.split("/");for(let y=0;y<f.length&&y<p.length;y++){const v=De(f[y],p[y]);if(v!==0)return v}return De(f.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const f=De(ut(a.latitude),ut(c.latitude));return f!==0?f:De(ut(a.longitude),ut(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Fy(n.arrayValue,e.arrayValue);case 10:return function(a,c){var f,p,y,v;const T=a.fields||{},I=c.fields||{},P=(f=T.value)===null||f===void 0?void 0:f.arrayValue,L=(p=I.value)===null||p===void 0?void 0:p.arrayValue,B=De(((y=P==null?void 0:P.values)===null||y===void 0?void 0:y.length)||0,((v=L==null?void 0:L.values)===null||v===void 0?void 0:v.length)||0);return B!==0?B:Fy(P,L)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===Ql.mapValue&&c===Ql.mapValue)return 0;if(a===Ql.mapValue)return 1;if(c===Ql.mapValue)return-1;const f=a.fields||{},p=Object.keys(f),y=c.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const I=De(p[T],v[T]);if(I!==0)return I;const P=bo(f[p[T]],y[v[T]]);if(P!==0)return P}return De(p.length,v.length)}(n.mapValue,e.mapValue);default:throw Ee()}}function My(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);const t=Ni(n),i=Ni(e),o=De(t.seconds,i.seconds);return o!==0?o:De(t.nanos,i.nanos)}function Fy(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=bo(t[o],i[o]);if(a)return a}return De(t.length,i.length)}function Vo(n){return vd(n)}function vd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Ni(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Oi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return me.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=vd(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of i)a?a=!1:o+=",",o+=`${c}:${vd(t.fields[c])}`;return o+"}"}(n.mapValue):Ee()}function oc(n){switch(Li(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kc(n);return e?16+oc(e):16;case 5:return 2*n.stringValue.length;case 6:return Oi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,a)=>o+oc(a),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return Rs(i.fields,(a,c)=>{o+=a.length+oc(c)}),o}(n.mapValue);default:throw Ee()}}function Uy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ed(n){return!!n&&"integerValue"in n}function ip(n){return!!n&&"arrayValue"in n}function jy(n){return!!n&&"nullValue"in n}function zy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ac(n){return!!n&&"mapValue"in n}function SP(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Za(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Rs(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Za(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Za(n.arrayValue.values[t]);return e}return Object.assign({},n)}function CP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(t)}setAll(e){let t=Nt.emptyPath(),i={},o=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}c?i[f.lastSegment()]=Za(c):o.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ac(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Rs(t,(o,a)=>e[o]=a);for(const o of i)delete e[o]}clone(){return new Sn(Za(this.value))}}function Xv(n){const e=[];return Rs(n.fields,(t,i)=>{const o=new Nt([t]);if(ac(i)){const a=Xv(i.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,t,i,o,a,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new jt(e,0,Ie.min(),Ie.min(),Ie.min(),Sn.empty(),0)}static newFoundDocument(e,t,i,o){return new jt(e,1,t,Ie.min(),i,o,0)}static newNoDocument(e,t){return new jt(e,2,t,Ie.min(),Ie.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new jt(e,3,t,Ie.min(),Ie.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t){this.position=e,this.inclusive=t}}function $y(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?i=me.comparator(me.fromName(c.referenceValue),t.key):i=bo(c,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function By(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t="asc"){this.field=e,this.dir=t}}function RP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{}class ft extends Zv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new PP(e,t,i):t==="array-contains"?new DP(e,i):t==="in"?new NP(e,i):t==="not-in"?new OP(e,i):t==="array-contains-any"?new LP(e,i):new ft(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new kP(e,i):new xP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(bo(t,this.value)):t!==null&&Li(this.value)===Li(t)&&this.matchesComparison(bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hn extends Zv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Hn(e,t)}matches(e){return eE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function eE(n){return n.op==="and"}function tE(n){return AP(n)&&eE(n)}function AP(n){for(const e of n.filters)if(e instanceof Hn)return!1;return!0}function wd(n){if(n instanceof ft)return n.field.canonicalString()+n.op.toString()+Vo(n.value);if(tE(n))return n.filters.map(e=>wd(e)).join(",");{const e=n.filters.map(t=>wd(t)).join(",");return`${n.op}(${e})`}}function nE(n,e){return n instanceof ft?function(i,o){return o instanceof ft&&i.op===o.op&&i.field.isEqual(o.field)&&fr(i.value,o.value)}(n,e):n instanceof Hn?function(i,o){return o instanceof Hn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((a,c,f)=>a&&nE(c,o.filters[f]),!0):!1}(n,e):void Ee()}function rE(n){return n instanceof ft?function(t){return`${t.field.canonicalString()} ${t.op} ${Vo(t.value)}`}(n):n instanceof Hn?function(t){return t.op.toString()+" {"+t.getFilters().map(rE).join(" ,")+"}"}(n):"Filter"}class PP extends ft{constructor(e,t,i){super(e,t,i),this.key=me.fromName(i.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class kP extends ft{constructor(e,t){super(e,"in",t),this.keys=iE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xP extends ft{constructor(e,t){super(e,"not-in",t),this.keys=iE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>me.fromName(i.referenceValue))}class DP extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ip(t)&&lu(t.arrayValue,this.value)}}class NP extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lu(this.value.arrayValue,t)}}class OP extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!lu(this.value.arrayValue,t)}}class LP extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ip(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>lu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t=null,i=[],o=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=c,this.endAt=f,this.ue=null}}function qy(n,e=null,t=[],i=[],o=null,a=null,c=null){return new bP(n,e,t,i,o,a,c)}function sp(n){const e=Se(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>wd(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),Wc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Vo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Vo(i)).join(",")),e.ue=t}return e.ue}function op(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!RP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!By(n.startAt,e.startAt)&&By(n.endAt,e.endAt)}function Td(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t=null,i=[],o=[],a=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function VP(n,e,t,i,o,a,c,f){return new wu(n,e,t,i,o,a,c,f)}function ap(n){return new wu(n)}function Hy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sE(n){return n.collectionGroup!==null}function eu(n){const e=Se(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new vt(Nt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Cc(a,i))}),t.has(Nt.keyField().canonicalString())||e.ce.push(new Cc(Nt.keyField(),i))}return e.ce}function ur(n){const e=Se(n);return e.le||(e.le=MP(e,eu(n))),e.le}function MP(n,e){if(n.limitType==="F")return qy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new Cc(o.field,a)});const t=n.endAt?new Sc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Sc(n.startAt.position,n.startAt.inclusive):null;return qy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Id(n,e){const t=n.filters.concat([e]);return new wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Sd(n,e,t){return new wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qc(n,e){return op(ur(n),ur(e))&&n.limitType===e.limitType}function oE(n){return`${sp(ur(n))}|lt:${n.limitType}`}function So(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>rE(o)).join(", ")}]`),Wc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Vo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Vo(o)).join(",")),`Target(${i})`}(ur(n))}; limitType=${n.limitType})`}function Gc(n,e){return e.isFoundDocument()&&function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):me.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,o){for(const a of eu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,f,p){const y=$y(c,f,p);return c.inclusive?y<=0:y<0}(i.startAt,eu(i),o)||i.endAt&&!function(c,f,p){const y=$y(c,f,p);return c.inclusive?y>=0:y>0}(i.endAt,eu(i),o))}(n,e)}function FP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aE(n){return(e,t)=>{let i=!1;for(const o of eu(n)){const a=UP(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function UP(n,e,t){const i=n.field.isKeyField()?me.comparator(e.key,t.key):function(a,c,f){const p=c.data.field(a),y=f.data.field(a);return p!==null&&y!==null?bo(p,y):Ee()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,(t,i)=>{for(const[o,a]of i)e(o,a)})}isEmpty(){return Yv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=new it(me.comparator);function $r(){return jP}const uE=new it(me.comparator);function Qa(...n){let e=uE;for(const t of n)e=e.insert(t.key,t);return e}function lE(n){let e=uE;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function gs(){return tu()}function cE(){return tu()}function tu(){return new As(n=>n.toString(),(n,e)=>n.isEqual(e))}const zP=new it(me.comparator),$P=new vt(me.comparator);function ke(...n){let e=$P;for(const t of n)e=e.add(t);return e}const BP=new vt(De);function qP(){return BP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(e)?"-0":e}}function hE(n){return{integerValue:""+n}}function HP(n,e){return vP(e)?hE(e):up(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this._=void 0}}function WP(n,e,t){return n instanceof Rc?function(o,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&rp(a)&&(a=Kc(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof cu?dE(n,e):n instanceof hu?pE(n,e):function(o,a){const c=fE(o,a),f=Wy(c)+Wy(o.Pe);return Ed(c)&&Ed(o.Pe)?hE(f):up(o.serializer,f)}(n,e)}function KP(n,e,t){return n instanceof cu?dE(n,e):n instanceof hu?pE(n,e):t}function fE(n,e){return n instanceof Ac?function(i){return Ed(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Rc extends Yc{}class cu extends Yc{constructor(e){super(),this.elements=e}}function dE(n,e){const t=mE(e);for(const i of n.elements)t.some(o=>fr(o,i))||t.push(i);return{arrayValue:{values:t}}}class hu extends Yc{constructor(e){super(),this.elements=e}}function pE(n,e){let t=mE(e);for(const i of n.elements)t=t.filter(o=>!fr(o,i));return{arrayValue:{values:t}}}class Ac extends Yc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Wy(n){return ut(n.integerValue||n.doubleValue)}function mE(n){return ip(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function QP(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof cu&&o instanceof cu||i instanceof hu&&o instanceof hu?Lo(i.elements,o.elements,fr):i instanceof Ac&&o instanceof Ac?fr(i.Pe,o.Pe):i instanceof Rc&&o instanceof Rc}(n.transform,e.transform)}class GP{constructor(e,t){this.version=e,this.transformResults=t}}class lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}let Jc=class{};function gE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new lp(n.key,lr.none()):new Tu(n.key,n.data,lr.none());{const t=n.data,i=Sn.empty();let o=new vt(Nt.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?i.delete(a):i.set(a,c),o=o.add(a)}return new Ps(n.key,i,new Bn(o.toArray()),lr.none())}}function YP(n,e,t){n instanceof Tu?function(o,a,c){const f=o.value.clone(),p=Qy(o.fieldTransforms,a,c.transformResults);f.setAll(p),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Ps?function(o,a,c){if(!uc(o.precondition,a))return void a.convertToUnknownDocument(c.version);const f=Qy(o.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(yE(o)),p.setAll(f),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function nu(n,e,t,i){return n instanceof Tu?function(a,c,f,p){if(!uc(a.precondition,c))return f;const y=a.value.clone(),v=Gy(a.fieldTransforms,p,c);return y.setAll(v),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ps?function(a,c,f,p){if(!uc(a.precondition,c))return f;const y=Gy(a.fieldTransforms,p,c),v=c.data;return v.setAll(yE(a)),v.setAll(y),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(T=>T.field))}(n,e,t,i):function(a,c,f){return uc(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(n,e,t)}function JP(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=fE(i.transform,o||null);a!=null&&(t===null&&(t=Sn.empty()),t.set(i.field,a))}return t||null}function Ky(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Lo(i,o,(a,c)=>QP(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tu extends Jc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ps extends Jc{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function yE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Qy(n,e,t){const i=new Map;ze(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,f=e.data.field(a.field);i.set(a.field,KP(c,f,t[o]))}return i}function Gy(n,e,t){const i=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);i.set(o.field,WP(a,c,e))}return i}class lp extends Jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XP extends Jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&YP(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=nu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=nu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=cE();return this.mutations.forEach(o=>{const a=e.get(o.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(o.key)?null:f;const p=gE(c,f);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ie.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,(t,i)=>Ky(t,i))&&Lo(this.baseMutations,e.baseMutations,(t,i)=>Ky(t,i))}}class cp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){ze(e.mutations.length===i.length);let o=function(){return zP}();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,i[c].version);return new cp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,be;function nk(n){switch(n){default:return Ee();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function _E(n){if(n===void 0)return zr("GRPC error has no .code"),Q.UNKNOWN;switch(n){case ht.OK:return Q.OK;case ht.CANCELLED:return Q.CANCELLED;case ht.UNKNOWN:return Q.UNKNOWN;case ht.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case ht.INTERNAL:return Q.INTERNAL;case ht.UNAVAILABLE:return Q.UNAVAILABLE;case ht.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case ht.NOT_FOUND:return Q.NOT_FOUND;case ht.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case ht.ABORTED:return Q.ABORTED;case ht.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case ht.DATA_LOSS:return Q.DATA_LOSS;default:return Ee()}}(be=ht||(ht={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=new Pi([4294967295,4294967295],0);function Yy(n){const e=rk().encode(n),t=new $v;return t.update(e),new Uint8Array(t.digest())}function Jy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Pi([t,i],0),new Pi([o,a],0)]}class hp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ga(`Invalid padding: ${t}`);if(i<0)throw new Ga(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ga(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ga(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Pi.fromNumber(this.Te)}de(e,t,i){let o=e.add(t.multiply(Pi.fromNumber(i)));return o.compare(ik)===1&&(o=new Pi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Yy(e),[i,o]=Jy(t);for(let a=0;a<this.hashCount;a++){const c=this.de(i,o,a);if(!this.Ee(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new hp(a,o,t);return i.forEach(f=>c.insert(f)),c}insert(e){if(this.Te===0)return;const t=Yy(e),[i,o]=Jy(t);for(let a=0;a<this.hashCount;a++){const c=this.de(i,o,a);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Iu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Xc(Ie.min(),o,new it(De),$r(),ke())}}class Iu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Iu(i,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class vE{constructor(e,t){this.targetId=e,this.me=t}}class EE{constructor(e,t,i=Ot.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Xy{constructor(){this.fe=0,this.ge=Zy(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),t=ke(),i=ke();return this.ge.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ee()}}),new Iu(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=Zy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ze(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class sk{constructor(e){this.Be=e,this.Le=new Map,this.ke=$r(),this.qe=Gl(),this.Qe=Gl(),this.Ke=new it(De)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const a=o.target;if(Td(a))if(i===0){const c=new me(a.path);this.We(t,c,jt.newNoDocument(c,Ie.min()))}else ze(i===1);else{const c=this.Ze(t);if(c!==i){const f=this.Xe(e),p=f?this.et(f,e,c):1;if(p!==0){this.He(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let c,f;try{c=Oi(i).toUint8Array()}catch(p){if(p instanceof Jv)return Oo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new hp(c,o,a)}catch(p){return Oo(p instanceof Ga?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.Te===0?null:f}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Be.getRemoteKeysForTarget(t);let o=0;return i.forEach(a=>{const c=this.Be.nt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.We(t,a,null),o++)}),o}it(e){const t=new Map;this.Le.forEach((a,c)=>{const f=this.Ye(c);if(f){if(a.current&&Td(f.target)){const p=new me(f.target.path);this.st(p).has(c)||this.ot(c,p)||this.We(c,p,jt.newNoDocument(p,e))}a.be&&(t.set(c,a.ve()),a.Ce())}});let i=ke();this.Qe.forEach((a,c)=>{let f=!0;c.forEachWhile(p=>{const y=this.Ye(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(a))}),this.ke.forEach((a,c)=>c.setReadTime(e));const o=new Xc(e,t,this.Ke,this.ke,i);return this.ke=$r(),this.qe=Gl(),this.Qe=Gl(),this.Ke=new it(De),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Xy,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new vt(De),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new vt(De),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Xy),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Gl(){return new it(me.comparator)}function Zy(){return new it(me.comparator)}const ok={asc:"ASCENDING",desc:"DESCENDING"},ak={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uk={and:"AND",or:"OR"};class lk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cd(n,e){return n.useProto3Json||Wc(e)?e:{value:e}}function Pc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ck(n,e){return Pc(n,e.toTimestamp())}function cr(n){return ze(!!n),Ie.fromTimestamp(function(t){const i=Ni(t);return new _t(i.seconds,i.nanos)}(n))}function fp(n,e){return Rd(n,e).canonicalString()}function Rd(n,e){const t=function(o){return new Je(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function TE(n){const e=Je.fromString(n);return ze(AE(e)),e}function Ad(n,e){return fp(n.databaseId,e.path)}function Zf(n,e){const t=TE(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(SE(t))}function IE(n,e){return fp(n.databaseId,e)}function hk(n){const e=TE(n);return e.length===4?Je.emptyPath():SE(e)}function Pd(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SE(n){return ze(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function e_(n,e,t){return{name:Ad(n,e),fields:t.value.mapValue.fields}}function fk(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(y,v){return y.useProto3Json?(ze(v===void 0||typeof v=="string"),Ot.fromBase64String(v||"")):(ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Ot.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const v=y.code===void 0?Q.UNKNOWN:_E(y.code);return new ae(v,y.message||"")}(c);t=new EE(i,o,a,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Zf(n,i.document.name),a=cr(i.document.updateTime),c=i.document.createTime?cr(i.document.createTime):Ie.min(),f=new Sn({mapValue:{fields:i.document.fields}}),p=jt.newFoundDocument(o,a,c,f),y=i.targetIds||[],v=i.removedTargetIds||[];t=new lc(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Zf(n,i.document),a=i.readTime?cr(i.readTime):Ie.min(),c=jt.newNoDocument(o,a),f=i.removedTargetIds||[];t=new lc([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Zf(n,i.document),a=i.removedTargetIds||[];t=new lc([],a,o,null)}else{if(!("filter"in e))return Ee();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,c=new tk(o,a),f=i.targetId;t=new vE(f,c)}}return t}function dk(n,e){let t;if(e instanceof Tu)t={update:e_(n,e.key,e.value)};else if(e instanceof lp)t={delete:Ad(n,e.key)};else if(e instanceof Ps)t={update:e_(n,e.key,e.data),updateMask:Tk(e.fieldMask)};else{if(!(e instanceof XP))return Ee();t={verify:Ad(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const f=c.transform;if(f instanceof Rc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof cu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof hu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ac)return{fieldPath:c.field.canonicalString(),increment:f.Pe};throw Ee()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:ck(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ee()}(n,e.precondition)),t}function pk(n,e){return n&&n.length>0?(ze(e!==void 0),n.map(t=>function(o,a){let c=o.updateTime?cr(o.updateTime):cr(a);return c.isEqual(Ie.min())&&(c=cr(a)),new GP(c,o.transformResults||[])}(t,e))):[]}function mk(n,e){return{documents:[IE(n,e.path)]}}function gk(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=IE(n,o);const a=function(y){if(y.length!==0)return RE(Hn.create(y,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(y){if(y.length!==0)return y.map(v=>function(I){return{field:Co(I.field),direction:vk(I.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Cd(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function yk(n){let e=hk(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){ze(i===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(T){const I=CE(T);return I instanceof Hn&&tE(I)?I.getFilters():[I]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(I=>function(L){return new Cc(Ro(L.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(I))}(t.orderBy));let f=null;t.limit&&(f=function(T){let I;return I=typeof T=="object"?T.value:T,Wc(I)?null:I}(t.limit));let p=null;t.startAt&&(p=function(T){const I=!!T.before,P=T.values||[];return new Sc(P,I)}(t.startAt));let y=null;return t.endAt&&(y=function(T){const I=!T.before,P=T.values||[];return new Sc(P,I)}(t.endAt)),VP(e,o,c,a,f,"F",p,y)}function _k(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ro(t.unaryFilter.field);return ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ro(t.unaryFilter.field);return ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ro(t.unaryFilter.field);return ft.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ro(t.unaryFilter.field);return ft.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(n):n.fieldFilter!==void 0?function(t){return ft.create(Ro(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Hn.create(t.compositeFilter.filters.map(i=>CE(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee()}}(t.compositeFilter.op))}(n):Ee()}function vk(n){return ok[n]}function Ek(n){return ak[n]}function wk(n){return uk[n]}function Co(n){return{fieldPath:n.canonicalString()}}function Ro(n){return Nt.fromServerFormat(n.fieldPath)}function RE(n){return n instanceof ft?function(t){if(t.op==="=="){if(zy(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(jy(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zy(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(jy(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:Ek(t.op),value:t.value}}}(n):n instanceof Hn?function(t){const i=t.getFilters().map(o=>RE(o));return i.length===1?i[0]:{compositeFilter:{op:wk(t.op),filters:i}}}(n):Ee()}function Tk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function AE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t,i,o,a=Ie.min(),c=Ie.min(),f=Ot.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.ht=e}}function Sk(n){const e=yk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Sd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.ln=new Rk}addToCollectionParentIndex(e,t){return this.ln.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Di.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class Rk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new vt(Je.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new vt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(41943040,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Mo(0)}static Qn(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_([n,e],[t,i]){const o=De(n,t);return o===0?De(e,i):o}class Ak{constructor(e){this.Gn=e,this.buffer=new vt(n_),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();n_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Pk{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wo(t)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ho(t)}await this.Yn(3e5)})}}class kk{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Hc.oe);const i=new Ak(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(t_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t_):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,a,c,f,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(i=T,f=Date.now(),this.removeTargets(e,i,t))).next(T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(y=Date.now(),Io()<=Pe.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${a} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T})))}}function xk(n,e){return new kk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.changes=new As(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&nu(i.mutation,o,Bn.empty(),_t.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ke()){const o=gs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(a=>{let c=Qa();return a.forEach((f,p)=>{c=c.insert(f,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=gs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ke()))}populateOverlays(e,t,i){const o=[];return i.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,i,o){let a=$r();const c=tu(),f=function(){return tu()}();return t.forEach((p,y)=>{const v=i.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Ps)?a=a.insert(y.key,y):v!==void 0?(c.set(y.key,v.mutation.getFieldMask()),nu(v.mutation,y,v.mutation.getFieldMask(),_t.now())):c.set(y.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((y,v)=>c.set(y,v)),t.forEach((y,v)=>{var T;return f.set(y,new Nk(v,(T=c.get(y))!==null&&T!==void 0?T:null))}),f))}recalculateAndSaveOverlays(e,t){const i=tu();let o=new it((c,f)=>c-f),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let v=i.get(p)||Bn.empty();v=f.applyToLocalView(y,v),i.set(p,v);const T=(o.get(f.batchId)||ke()).add(p);o=o.insert(f.batchId,T)})}).next(()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,v=p.value,T=cE();v.forEach(I=>{if(!a.has(I)){const P=gE(t.get(I),i.get(I));P!==null&&T.set(I,P),a=a.add(I)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,T))}return K.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):K.resolve(gs());let f=-1,p=a;return c.next(y=>K.forEach(y,(v,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(v)?K.resolve():this.remoteDocumentCache.getEntry(e,v).next(I=>{p=p.insert(v,I)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,p,y,ke())).next(v=>({batchId:f,changes:lE(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next(i=>{let o=Qa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let c=Qa();return this.indexManager.getCollectionParents(e,a).next(f=>K.forEach(f,p=>{const y=function(T,I){return new wu(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(v=>{v.forEach((T,I)=>{c=c.insert(T,I)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o))).next(c=>{a.forEach((p,y)=>{const v=y.getKey();c.get(v)===null&&(c=c.insert(v,jt.newInvalidDocument(v)))});let f=Qa();return c.forEach((p,y)=>{const v=a.get(p);v!==void 0&&nu(v.mutation,y,Bn.empty(),_t.now()),Gc(t,y)&&(f=f.insert(p,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return K.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:cr(o.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:Sk(o.bundledQuery),readTime:cr(o.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.overlays=new it(me.comparator),this.dr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=gs();return K.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&i.set(o,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,a)=>{this.Tt(e,t,a)}),K.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.dr.get(i);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.dr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const o=gs(),a=t.length+1,c=new me(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new it((y,v)=>y-v);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=a.get(y.largestBatchId);v===null&&(v=gs(),a=a.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=gs(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,v)=>f.set(y,v)),!(f.size()>=o)););return K.resolve(f)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.dr.get(o.largestBatchId).delete(i.key);this.dr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new ek(t,i));let a=this.dr.get(t);a===void 0&&(a=ke(),this.dr.set(t,a)),this.dr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this.Er=new vt(Ct.Ar),this.Rr=new vt(Ct.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const i=new Ct(e,t);this.Er=this.Er.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new Ct(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new me(new Je([])),i=new Ct(t,e),o=new Ct(t,e+1),a=[];return this.Rr.forEachInRange([i,o],c=>{this.gr(c),a.push(c.key)}),a}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new me(new Je([])),i=new Ct(t,e),o=new Ct(t,e+1);let a=ke();return this.Rr.forEachInRange([i,o],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Ct(e,0),i=this.Er.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ct{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return me.comparator(e.key,t.key)||De(e.br,t.br)}static Vr(e,t){return De(e.br,t.br)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new vt(Ct.Ar)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new ZP(a,t,i,o);this.mutationQueue.push(c);for(const f of o)this.vr=this.vr.add(new Ct(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(c)}lookupMutationBatch(e,t){return K.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),a=o<0?0:o;return K.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ct(t,0),o=new Ct(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([i,o],c=>{const f=this.Cr(c.br);a.push(f)}),K.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new vt(De);return t.forEach(o=>{const a=new Ct(o,0),c=new Ct(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,c],f=>{i=i.add(f.br)})}),K.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;me.isDocumentKey(a)||(a=a.child(""));const c=new Ct(new me(a),0);let f=new vt(De);return this.vr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.br)),!0)},c),K.resolve(this.Mr(f))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){ze(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return K.forEach(t.mutations,o=>{const a=new Ct(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Bn(e){}containsKey(e,t){const i=new Ct(t,0),o=this.vr.firstAfterOrEqual(i);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.Nr=e,this.docs=function(){return new it(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,c=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let i=$r();return t.forEach(o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():jt.newInvalidDocument(o))}),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=$r();const c=t.path,f=new me(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||mP(pP(v),i)<=0||(o.has(v.key)||Gc(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return K.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ee()}Br(e,t){return K.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Uk(this)}getSize(e){return K.resolve(this.size)}}class Uk extends Dk{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),K.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.persistence=e,this.Lr=new As(t=>sp(t),op),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.kr=0,this.qr=new dp,this.targetCount=0,this.Qr=Mo.qn()}forEachTarget(e,t){return this.Lr.forEach((i,o)=>t(o)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),K.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Un(t),K.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.Lr.forEach((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.Lr.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),K.waitFor(a).next(()=>o)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.Lr.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(c=>{a.push(o.markPotentiallyOrphaned(e,c))}),K.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Hc(0),this.Ur=!1,this.Ur=!0,this.Wr=new Vk,this.referenceDelegate=e(this),this.Gr=new jk(this),this.indexManager=new Ck,this.remoteDocumentCache=function(o){return new Fk(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new Ik(t),this.jr=new Lk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new Mk(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){se("MemoryPersistence","Starting transaction:",e);const o=new zk(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(a=>this.referenceDelegate.Jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Yr(e,t){return K.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class zk extends yP{constructor(e){super(),this.currentSequenceNumber=e}}class pp{constructor(e){this.persistence=e,this.Zr=new dp,this.Xr=null}static ei(e){return new pp(e)}get ti(){if(this.Xr)return this.Xr;throw Ee()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),K.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.ti.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.ti,i=>{const o=me.fromPath(i);return this.ni(e,o).next(a=>{a||t.removeEntry(o,Ie.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return K.or([()=>K.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class kc{constructor(e,t){this.persistence=e,this.ri=new As(i=>EP(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=xk(this,t)}static ei(e,t){return new kc(e,t)}Hr(){}Jr(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return K.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(a=>a?K.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.Br(e,c=>this.ir(e,c,t).next(f=>{f||(i++,a.removeEntry(c,Ie.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=oc(e.data.value)),t}ir(e,t,i){return K.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return K.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=ke(),o=ke();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new mp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return C0()?8:_P(zt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.Xi(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.es(e,t,o,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new $k;return this.ts(e,t,c).next(f=>{if(a.result=f,this.Hi)return this.ns(e,t,c,f.size)})}).next(()=>a.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(Io()<=Pe.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",So(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),K.resolve()):(Io()<=Pe.DEBUG&&se("QueryEngine","Query:",So(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(Io()<=Pe.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",So(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(t))):K.resolve())}Xi(e,t){if(Hy(t))return K.resolve(null);let i=ur(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Sd(t,null,"F"),i=ur(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const c=ke(...a);return this.Zi.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.rs(t,f);return this.ss(t,y,c,p.readTime)?this.Xi(e,Sd(t,null,"F")):this.os(e,y,t,p)}))})))}es(e,t,i,o){return Hy(t)||o.isEqual(Ie.min())?K.resolve(null):this.Zi.getDocuments(e,i).next(a=>{const c=this.rs(t,a);return this.ss(t,c,i,o)?K.resolve(null):(Io()<=Pe.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),So(t)),this.os(e,c,t,dP(o,-1)).next(f=>f))})}rs(e,t){let i=new vt(aE(e));return t.forEach((o,a)=>{Gc(e,a)&&(i=i.add(a))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ts(e,t,i){return Io()<=Pe.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",So(t)),this.Zi.getDocumentsMatchingQuery(e,t,Di.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new it(De),this.cs=new As(a=>sp(a),op),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ok(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function Hk(n,e,t,i){return new qk(n,e,t,i)}async function kE(n,e){const t=Se(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(a=>(o=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],f=[];let p=ke();for(const y of o){c.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of a){f.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Ts:y,removedBatchIds:c,addedBatchIds:f}))})})}function Wk(n,e){const t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(f,p,y,v){const T=y.batch,I=T.keys();let P=K.resolve();return I.forEach(L=>{P=P.next(()=>v.getEntry(p,L)).next(B=>{const V=y.docVersions.get(L);ze(V!==null),B.version.compareTo(V)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),v.addEntry(B)))})}),P.next(()=>f.mutationQueue.removeMutationBatch(p,T))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let p=ke();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function xE(n){const e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function Kk(n,e){const t=Se(n),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const f=[];e.targetChanges.forEach((v,T)=>{const I=o.get(T);if(!I)return;f.push(t.Gr.removeMatchingKeys(a,v.removedDocuments,T).next(()=>t.Gr.addMatchingKeys(a,v.addedDocuments,T)));let P=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?P=P.withResumeToken(Ot.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):v.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(v.resumeToken,i)),o=o.insert(T,P),function(B,V,H){return B.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(I,P,v)&&f.push(t.Gr.updateTargetData(a,P))});let p=$r(),y=ke();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),f.push(Qk(a,c,e.documentUpdates).next(v=>{p=v.Is,y=v.ds})),!i.isEqual(Ie.min())){const v=t.Gr.getLastRemoteSnapshotVersion(a).next(T=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,i));f.push(v)}return K.waitFor(f).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,y)).next(()=>p)}).then(a=>(t.us=o,a))}function Qk(n,e,t){let i=ke(),o=ke();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let c=$r();return t.forEach((f,p)=>{const y=a.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):se("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)}),{Is:c,ds:o}})}function Gk(n,e){const t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Yk(n,e){const t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(a=>a?(o=a,K.resolve(o)):t.Gr.allocateTargetId(i).next(c=>(o=new Ii(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function kd(n,e,t){const i=Se(n),o=i.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Wo(c))throw c;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function r_(n,e,t){const i=Se(n);let o=Ie.min(),a=ke();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,y,v){const T=Se(p),I=T.cs.get(v);return I!==void 0?K.resolve(T.us.get(I)):T.Gr.getTargetData(y,v)}(i,c,ur(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(c,f.targetId).next(p=>{a=p})}).next(()=>i._s.getDocumentsMatchingQuery(c,e,t?o:Ie.min(),t?a:ke())).next(f=>(Jk(i,FP(e),f),{documents:f,Es:a})))}function Jk(n,e,t){let i=n.ls.get(e)||Ie.min();t.forEach((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.ls.set(e,i)}class i_{constructor(){this.activeTargetIds=qP()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xk{constructor(){this._o=new i_,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new i_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl=null;function ed(){return Yl===null?Yl=function(){return 268435456+Math.round(2147483648*Math.random())}():Yl++,"0x"+Yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class n1 extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Oo(t,i,o,a,c){const f=ed(),p=this.No(t,i.toUriEncodedString());se("RestConnection",`Sending RPC '${t}' ${f}:`,p,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(y,a,c),this.Lo(t,p,y,o).then(v=>(se("RestConnection",`Received RPC '${t}' ${f}: `,v),v),v=>{throw Oo("RestConnection",`RPC '${t}' ${f} failed with error: `,v,"url: ",p,"request:",o),v})}ko(t,i,o,a,c,f){return this.Oo(t,i,o,a,c)}Bo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((a,c)=>t[c]=a),o&&o.headers.forEach((a,c)=>t[c]=a)}No(t,i){const o=e1[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,i,o){const a=ed();return new Promise((c,f)=>{const p=new Bv;p.setWithCredentials(!0),p.listenOnce(qv.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case sc.NO_ERROR:const v=p.getResponseJson();se(Ft,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),c(v);break;case sc.TIMEOUT:se(Ft,`RPC '${e}' ${a} timed out`),f(new ae(Q.DEADLINE_EXCEEDED,"Request time out"));break;case sc.HTTP_ERROR:const T=p.getStatus();if(se(Ft,`RPC '${e}' ${a} failed with status:`,T,"response text:",p.getResponseText()),T>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const L=function(V){const H=V.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(H)>=0?H:Q.UNKNOWN}(P.status);f(new ae(L,P.message))}else f(new ae(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new ae(Q.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{se(Ft,`RPC '${e}' ${a} completed.`)}});const y=JSON.stringify(o);se(Ft,`RPC '${e}' ${a} sending request:`,o),p.send(t,"POST",y,i,15)})}qo(e,t,i){const o=ed(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Kv(),f=Wv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Bo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=a.join("");se(Ft,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=c.createWebChannel(v,p);let I=!1,P=!1;const L=new t1({Eo:V=>{P?se(Ft,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(I||(se(Ft,`Opening RPC '${e}' stream ${o} transport.`),T.open(),I=!0),se(Ft,`RPC '${e}' stream ${o} sending:`,V),T.send(V))},Ao:()=>T.close()}),B=(V,H,X)=>{V.listen(H,G=>{try{X(G)}catch(ue){setTimeout(()=>{throw ue},0)}})};return B(T,Ka.EventType.OPEN,()=>{P||(se(Ft,`RPC '${e}' stream ${o} transport opened.`),L.So())}),B(T,Ka.EventType.CLOSE,()=>{P||(P=!0,se(Ft,`RPC '${e}' stream ${o} transport closed`),L.Do())}),B(T,Ka.EventType.ERROR,V=>{P||(P=!0,Oo(Ft,`RPC '${e}' stream ${o} transport errored:`,V),L.Do(new ae(Q.UNAVAILABLE,"The operation could not be completed")))}),B(T,Ka.EventType.MESSAGE,V=>{var H;if(!P){const X=V.data[0];ze(!!X);const G=X,ue=(G==null?void 0:G.error)||((H=G[0])===null||H===void 0?void 0:H.error);if(ue){se(Ft,`RPC '${e}' stream ${o} received error:`,ue);const we=ue.status;let pe=function(R){const x=ht[R];if(x!==void 0)return _E(x)}(we),D=ue.message;pe===void 0&&(pe=Q.INTERNAL,D="Unknown error status: "+we+" with message "+ue.message),P=!0,L.Do(new ae(pe,D)),T.close()}else se(Ft,`RPC '${e}' stream ${o} received:`,X),L.vo(X)}}),B(f,Hv.STAT_EVENT,V=>{V.stat===_d.PROXY?se(Ft,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===_d.NOPROXY&&se(Ft,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{L.bo()},0),L}}function td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(n){return new lk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t,i=1e3,o=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&se("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,t,i,o,a,c,f,p){this.li=e,this.Yo=i,this.Zo=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new DE(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new ae(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.d_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.d_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r1 extends NE{constructor(e,t,i,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=a}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=fk(this.serializer,e),i=function(a){if(!("targetChange"in a))return Ie.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?cr(c.readTime):Ie.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=Pd(this.serializer),t.addTarget=function(a,c){let f;const p=c.target;if(f=Td(p)?{documents:mk(a,p)}:{query:gk(a,p).ct},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=wE(a,c.resumeToken);const y=Cd(a,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Ie.min())>0){f.readTime=Pc(a,c.snapshotVersion.toTimestamp());const y=Cd(a,c.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const i=_k(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=Pd(this.serializer),t.removeTarget=e,this.c_(t)}}class i1 extends NE{constructor(e,t,i,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return ze(!!e.streamToken),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=pk(e.writeResults,e.commitTime),i=cr(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=Pd(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>dk(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1 extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Oo(e,Rd(t,i),o,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ae(Q.UNKNOWN,a.toString())})}ko(e,t,i,o,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.ko(e,Rd(t,i),o,c,f,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(Q.UNKNOWN,c.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class o1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(zr(t),this.C_=!1):se("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(c=>{i.enqueueAndForget(async()=>{ks(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(p){const y=Se(p);y.k_.add(4),await Su(y),y.K_.set("Unknown"),y.k_.delete(4),await eh(y)}(this))})}),this.K_=new o1(i,o)}}async function eh(n){if(ks(n))for(const e of n.q_)await e(!0)}async function Su(n){for(const e of n.q_)await e(!1)}function OE(n,e){const t=Se(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),vp(t)?_p(t):Ko(t).s_()&&yp(t,e))}function gp(n,e){const t=Se(n),i=Ko(t);t.L_.delete(e),i.s_()&&LE(t,e),t.L_.size===0&&(i.s_()?i.a_():ks(t)&&t.K_.set("Unknown"))}function yp(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ko(n).V_(e)}function LE(n,e){n.U_.xe(e),Ko(n).m_(e)}function _p(n){n.U_=new sk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Ko(n).start(),n.K_.F_()}function vp(n){return ks(n)&&!Ko(n).i_()&&n.L_.size>0}function ks(n){return Se(n).k_.size===0}function bE(n){n.U_=void 0}async function u1(n){n.K_.set("Online")}async function l1(n){n.L_.forEach((e,t)=>{yp(n,e)})}async function c1(n,e){bE(n),vp(n)?(n.K_.O_(e),_p(n)):n.K_.set("Unknown")}async function h1(n,e,t){if(n.K_.set("Online"),e instanceof EE&&e.state===2&&e.cause)try{await async function(o,a){const c=a.cause;for(const f of a.targetIds)o.L_.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.L_.delete(f),o.U_.removeTarget(f))}(n,e)}catch(i){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await xc(n,i)}else if(e instanceof lc?n.U_.$e(e):e instanceof vE?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Ie.min()))try{const i=await xE(n.localStore);t.compareTo(i)>=0&&await function(a,c){const f=a.U_.it(c);return f.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.L_.get(y);v&&a.L_.set(y,v.withResumeToken(p.resumeToken,c))}}),f.targetMismatches.forEach((p,y)=>{const v=a.L_.get(p);if(!v)return;a.L_.set(p,v.withResumeToken(Ot.EMPTY_BYTE_STRING,v.snapshotVersion)),LE(a,p);const T=new Ii(v.target,p,y,v.sequenceNumber);yp(a,T)}),a.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(i){se("RemoteStore","Failed to raise snapshot:",i),await xc(n,i)}}async function xc(n,e,t){if(!Wo(e))throw e;n.k_.add(1),await Su(n),n.K_.set("Offline"),t||(t=()=>xE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await eh(n)})}function VE(n,e){return e().catch(t=>xc(n,t,e))}async function th(n){const e=Se(n),t=bi(e);let i=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;f1(e);)try{const o=await Gk(e.localStore,i);if(o===null){e.B_.length===0&&t.a_();break}i=o.batchId,d1(e,o)}catch(o){await xc(e,o)}ME(e)&&FE(e)}function f1(n){return ks(n)&&n.B_.length<10}function d1(n,e){n.B_.push(e);const t=bi(n);t.s_()&&t.f_&&t.g_(e.mutations)}function ME(n){return ks(n)&&!bi(n).i_()&&n.B_.length>0}function FE(n){bi(n).start()}async function p1(n){bi(n).w_()}async function m1(n){const e=bi(n);for(const t of n.B_)e.g_(t.mutations)}async function g1(n,e,t){const i=n.B_.shift(),o=cp.from(i,e,t);await VE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await th(n)}async function y1(n,e){e&&bi(n).f_&&await async function(i,o){if(function(c){return nk(c)&&c!==Q.ABORTED}(o.code)){const a=i.B_.shift();bi(i).__(),await VE(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o)),await th(i)}}(n,e),ME(n)&&FE(n)}async function o_(n,e){const t=Se(n);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const i=ks(t);t.k_.add(3),await Su(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await eh(t)}async function _1(n,e){const t=Se(n);e?(t.k_.delete(2),await eh(t)):e||(t.k_.add(2),await Su(t),t.K_.set("Unknown"))}function Ko(n){return n.W_||(n.W_=function(t,i,o){const a=Se(t);return a.b_(),new r1(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Ro:u1.bind(null,n),mo:l1.bind(null,n),po:c1.bind(null,n),R_:h1.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),vp(n)?_p(n):n.K_.set("Unknown")):(await n.W_.stop(),bE(n))})),n.W_}function bi(n){return n.G_||(n.G_=function(t,i,o){const a=Se(t);return a.b_(),new i1(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:p1.bind(null,n),po:y1.bind(null,n),p_:m1.bind(null,n),y_:g1.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await th(n)):(await n.G_.stop(),n.B_.length>0&&(se("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const c=Date.now()+i,f=new Ep(e,t,c,o,a);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wp(n,e){if(zr("AsyncQueue",`${e}: ${n}`),Wo(n))return new ae(Q.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||me.comparator(t.key,i.key):(t,i)=>me.comparator(t.key,i.key),this.keyedMap=Qa(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Do;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.z_=new it(me.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Ee():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Fo{constructor(e,t,i,o,a,c,f,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,a){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Fo(e,t,Do.emptySet(t),c,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class E1{constructor(){this.queries=u_(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=Se(t),a=o.queries;o.queries=u_(),a.forEach((c,f)=>{for(const p of f.J_)p.onError(i)})})(this,new ae(Q.ABORTED,"Firestore shutting down"))}}function u_(){return new As(n=>oE(n),Qc)}async function UE(n,e){const t=Se(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Y_()&&e.Z_()&&(i=2):(a=new v1,i=e.Z_()?0:1);try{switch(i){case 0:a.H_=await t.onListen(o,!0);break;case 1:a.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=wp(c,`Initialization of query '${So(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&Tp(t)}async function jE(n,e){const t=Se(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const c=a.J_.indexOf(e);c>=0&&(a.J_.splice(c,1),a.J_.length===0?o=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function w1(n,e){const t=Se(n);let i=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const f of c.J_)f.ta(o)&&(i=!0);c.H_=o}}i&&Tp(t)}function T1(n,e,t){const i=Se(n),o=i.queries.get(e);if(o)for(const a of o.J_)a.onError(t);i.queries.delete(e)}function Tp(n){n.X_.forEach(e=>{e.next()})}var xd,l_;(l_=xd||(xd={})).na="default",l_.Cache="cache";class zE{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Fo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==xd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.key=e}}class BE{constructor(e){this.key=e}}class I1{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ke(),this.mutatedKeys=ke(),this.Va=aE(e),this.ma=new Do(this.Va)}get fa(){return this.Ea}ga(e,t){const i=t?t.pa:new a_,o=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,T)=>{const I=o.get(v),P=Gc(this.query,T)?T:null,L=!!I&&this.mutatedKeys.has(I.key),B=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let V=!1;I&&P?I.data.isEqual(P.data)?L!==B&&(i.track({type:3,doc:P}),V=!0):this.ya(I,P)||(i.track({type:2,doc:P}),V=!0,(p&&this.Va(P,p)>0||y&&this.Va(P,y)<0)&&(f=!0)):!I&&P?(i.track({type:0,doc:P}),V=!0):I&&!P&&(i.track({type:1,doc:I}),V=!0,(p||y)&&(f=!0)),V&&(P?(c=c.add(P),a=B?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{ma:c,pa:i,ss:f,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const c=e.pa.j_();c.sort((v,T)=>function(P,L){const B=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return B(P)-B(L)}(v.type,T.type)||this.Va(v.doc,T.doc)),this.wa(i),o=o!=null&&o;const f=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,y=p!==this.Aa;return this.Aa=p,c.length!==0||y?{snapshot:new Fo(this.query,e.ma,a,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:f}:{ba:f}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new a_,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ke(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new BE(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new $E(i))}),t}va(e){this.Ea=e.Es,this.Ra=ke();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Fo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class S1{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class C1{constructor(e){this.key=e,this.Fa=!1}}class R1{constructor(e,t,i,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new As(f=>oE(f),Qc),this.Oa=new Map,this.Na=new Set,this.Ba=new it(me.comparator),this.La=new Map,this.ka=new dp,this.qa={},this.Qa=new Map,this.Ka=Mo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function A1(n,e,t=!0){const i=GE(n);let o;const a=i.xa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Ca()):o=await qE(i,e,t,!0),o}async function P1(n,e){const t=GE(n);await qE(t,e,!0,!1)}async function qE(n,e,t,i){const o=await Yk(n.localStore,ur(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let f;return i&&(f=await k1(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&OE(n.remoteStore,o),f}async function k1(n,e,t,i,o){n.Ua=(T,I,P)=>async function(B,V,H,X){let G=V.view.ga(H);G.ss&&(G=await r_(B.localStore,V.query,!1).then(({documents:D})=>V.view.ga(D,G)));const ue=X&&X.targetChanges.get(V.targetId),we=X&&X.targetMismatches.get(V.targetId)!=null,pe=V.view.applyChanges(G,B.isPrimaryClient,ue,we);return h_(B,V.targetId,pe.ba),pe.snapshot}(n,T,I,P);const a=await r_(n.localStore,e,!0),c=new I1(e,a.Es),f=c.ga(a.documents),p=Iu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(f,n.isPrimaryClient,p);h_(n,t,y.ba);const v=new S1(e,t,c);return n.xa.set(e,v),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),y.snapshot}async function x1(n,e,t){const i=Se(n),o=i.xa.get(e),a=i.Oa.get(o.targetId);if(a.length>1)return i.Oa.set(o.targetId,a.filter(c=>!Qc(c,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await kd(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&gp(i.remoteStore,o.targetId),Dd(i,o.targetId)}).catch(Ho)):(Dd(i,o.targetId),await kd(i.localStore,o.targetId,!0))}async function D1(n,e){const t=Se(n),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),gp(t.remoteStore,i.targetId))}async function N1(n,e,t){const i=U1(n);try{const o=await function(c,f){const p=Se(c),y=_t.now(),v=f.reduce((P,L)=>P.add(L.key),ke());let T,I;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let L=$r(),B=ke();return p.hs.getEntries(P,v).next(V=>{L=V,L.forEach((H,X)=>{X.isValidDocument()||(B=B.add(H))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,L)).next(V=>{T=V;const H=[];for(const X of f){const G=JP(X,T.get(X.key).overlayedDocument);G!=null&&H.push(new Ps(X.key,G,Xv(G.value.mapValue),lr.exists(!0)))}return p.mutationQueue.addMutationBatch(P,y,H,f)}).next(V=>{I=V;const H=V.applyToLocalDocumentSet(T,B);return p.documentOverlayCache.saveOverlays(P,V.batchId,H)})}).then(()=>({batchId:I.batchId,changes:lE(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,f,p){let y=c.qa[c.currentUser.toKey()];y||(y=new it(De)),y=y.insert(f,p),c.qa[c.currentUser.toKey()]=y}(i,o.batchId,t),await Cu(i,o.changes),await th(i.remoteStore)}catch(o){const a=wp(o,"Failed to persist write");t.reject(a)}}async function HE(n,e){const t=Se(n);try{const i=await Kk(t.localStore,e);e.targetChanges.forEach((o,a)=>{const c=t.La.get(a);c&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Fa=!0:o.modifiedDocuments.size>0?ze(c.Fa):o.removedDocuments.size>0&&(ze(c.Fa),c.Fa=!1))}),await Cu(t,i,e)}catch(i){await Ho(i)}}function c_(n,e,t){const i=Se(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((a,c)=>{const f=c.view.ea(e);f.snapshot&&o.push(f.snapshot)}),function(c,f){const p=Se(c);p.onlineState=f;let y=!1;p.queries.forEach((v,T)=>{for(const I of T.J_)I.ea(f)&&(y=!0)}),y&&Tp(p)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function O1(n,e,t){const i=Se(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.La.get(e),a=o&&o.key;if(a){let c=new it(me.comparator);c=c.insert(a,jt.newNoDocument(a,Ie.min()));const f=ke().add(a),p=new Xc(Ie.min(),new Map,new it(De),c,f);await HE(i,p),i.Ba=i.Ba.remove(a),i.La.delete(e),Ip(i)}else await kd(i.localStore,e,!1).then(()=>Dd(i,e,t)).catch(Ho)}async function L1(n,e){const t=Se(n),i=e.batch.batchId;try{const o=await Wk(t.localStore,e);KE(t,i,null),WE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Cu(t,o)}catch(o){await Ho(o)}}async function b1(n,e,t){const i=Se(n);try{const o=await function(c,f){const p=Se(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return p.mutationQueue.lookupMutationBatch(y,f).next(T=>(ze(T!==null),v=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>p.localDocuments.getDocuments(y,v))})}(i.localStore,e);KE(i,e,t),WE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Cu(i,o)}catch(o){await Ho(o)}}function WE(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function KE(n,e,t){const i=Se(n);let o=i.qa[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function Dd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Oa.get(e))n.xa.delete(i),t&&n.Ma.Wa(i,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(i=>{n.ka.containsKey(i)||QE(n,i)})}function QE(n,e){n.Na.delete(e.path.canonicalString());const t=n.Ba.get(e);t!==null&&(gp(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),Ip(n))}function h_(n,e,t){for(const i of t)i instanceof $E?(n.ka.addReference(i.key,e),V1(n,i)):i instanceof BE?(se("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,e),n.ka.containsKey(i.key)||QE(n,i.key)):Ee()}function V1(n,e){const t=e.key,i=t.path.canonicalString();n.Ba.get(t)||n.Na.has(i)||(se("SyncEngine","New document in limbo: "+t),n.Na.add(i),Ip(n))}function Ip(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new me(Je.fromString(e)),i=n.Ka.next();n.La.set(i,new C1(t)),n.Ba=n.Ba.insert(t,i),OE(n.remoteStore,new Ii(ur(ap(t.path)),i,"TargetPurposeLimboResolution",Hc.oe))}}async function Cu(n,e,t){const i=Se(n),o=[],a=[],c=[];i.xa.isEmpty()||(i.xa.forEach((f,p)=>{c.push(i.Ua(p,e,t).then(y=>{var v;if((y||t)&&i.isPrimaryClient){const T=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=mp.zi(p.targetId,y);a.push(T)}}))}),await Promise.all(c),i.Ma.R_(o),await async function(p,y){const v=Se(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>K.forEach(y,I=>K.forEach(I.Wi,P=>v.persistence.referenceDelegate.addReference(T,I.targetId,P)).next(()=>K.forEach(I.Gi,P=>v.persistence.referenceDelegate.removeReference(T,I.targetId,P)))))}catch(T){if(!Wo(T))throw T;se("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const I=T.targetId;if(!T.fromCache){const P=v.us.get(I),L=P.snapshotVersion,B=P.withLastLimboFreeSnapshotVersion(L);v.us=v.us.insert(I,B)}}}(i.localStore,a))}async function M1(n,e){const t=Se(n);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const i=await kE(t.localStore,e);t.currentUser=e,function(a,c){a.Qa.forEach(f=>{f.forEach(p=>{p.reject(new ae(Q.CANCELLED,c))})}),a.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cu(t,i.Ts)}}function F1(n,e){const t=Se(n),i=t.La.get(e);if(i&&i.Fa)return ke().add(i.key);{let o=ke();const a=t.Oa.get(e);if(!a)return o;for(const c of a){const f=t.xa.get(c);o=o.unionWith(f.view.fa)}return o}}function GE(n){const e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O1.bind(null,e),e.Ma.R_=w1.bind(null,e.eventManager),e.Ma.Wa=T1.bind(null,e.eventManager),e}function U1(n){const e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b1.bind(null,e),e}class Dc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return Hk(this.persistence,new Bk,e.initialUser,this.serializer)}ja(e){return new PE(pp.ei,this.serializer)}za(e){return new Xk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dc.provider={build:()=>new Dc};class j1 extends Dc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){ze(this.persistence.referenceDelegate instanceof kc);const i=this.persistence.referenceDelegate.garbageCollector;return new Pk(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new PE(i=>kc.ei(i,t),this.serializer)}}class Nd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>c_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=M1.bind(null,this.syncEngine),await _1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new E1}()}createDatastore(e){const t=Zc(e.databaseInfo.databaseId),i=function(a){return new n1(a)}(e.databaseInfo);return function(a,c,f,p){return new s1(a,c,f,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,a,c,f){return new a1(i,o,a,c,f)}(this.localStore,this.datastore,e.asyncQueue,t=>c_(this.syncEngine,t,0),function(){return s_.p()?new s_:new Zk}())}createSyncEngine(e,t){return function(o,a,c,f,p,y,v){const T=new R1(o,a,c,f,p,y);return v&&(T.$a=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Se(o);se("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await Su(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Nd.provider={build:()=>new Nd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Ut.UNAUTHENTICATED,this.clientId=Gv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{se("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(se("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=wp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function nd(n,e){n.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await kE(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function f_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await $1(n);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>o_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>o_(e.remoteStore,o)),n._onlineComponents=e}async function $1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await nd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Oo("Error using user provided cache. Falling back to memory cache: "+t),await nd(n,new Dc)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await nd(n,new j1(void 0));return n._offlineComponents}async function JE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await f_(n,n._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await f_(n,new Nd))),n._onlineComponents}function B1(n){return JE(n).then(e=>e.syncEngine)}async function XE(n){const e=await JE(n),t=e.eventManager;return t.onListen=A1.bind(null,e.syncEngine),t.onUnlisten=x1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=P1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=D1.bind(null,e.syncEngine),t}function q1(n,e,t={}){const i=new Mr;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,f,p,y){const v=new YE({next:I=>{v.eu(),c.enqueueAndForget(()=>jE(a,T));const P=I.docs.has(f);!P&&I.fromCache?y.reject(new ae(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&I.fromCache&&p&&p.source==="server"?y.reject(new ae(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),T=new zE(ap(f.path),v,{includeMetadataChanges:!0,ua:!0});return UE(a,T)}(await XE(n),n.asyncQueue,e,t,i)),i.promise}function H1(n,e,t={}){const i=new Mr;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,f,p,y){const v=new YE({next:I=>{v.eu(),c.enqueueAndForget(()=>jE(a,T)),I.fromCache&&p.source==="server"?y.reject(new ae(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),T=new zE(f,v,{includeMetadataChanges:!0,ua:!0});return UE(a,T)}(await XE(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(n,e,t){if(!t)throw new ae(Q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function W1(n,e,t,i){if(e===!0&&i===!0)throw new ae(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function p_(n){if(!me.isDocumentKey(n))throw new ae(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function m_(n){if(me.isDocumentKey(n))throw new ae(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee()}function Vi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nh(n);throw new ae(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new iP;switch(i.type){case"firstParty":return new uP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=d_.get(t);i&&(se("ComponentProvider","Removing Datastore"),d_.delete(t),i.terminate())}(this),Promise.resolve()}}function K1(n,e,t,i={}){var o;const a=(n=Vi(n,rh))._getSettings(),c=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),i.mockUserToken){let f,p;if(typeof i.mockUserToken=="string")f=i.mockUserToken,p=Ut.MOCK_USER;else{f=_0(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ae(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ut(y)}n._authCredentials=new sP(new Qv(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih=class tw{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new tw(this.firestore,e,this._query)}};class sn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class ki extends ih{constructor(e,t,i){super(e,t,ap(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new me(e))}withConverter(e){return new ki(this.firestore,e,this._path)}}function sh(n,e,...t){if(n=Qt(n),ew("collection","path",e),n instanceof rh){const i=Je.fromString(e,...t);return m_(i),new ki(n,null,i)}{if(!(n instanceof sn||n instanceof ki))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return m_(i),new ki(n.firestore,null,i)}}function Ts(n,e,...t){if(n=Qt(n),arguments.length===1&&(e=Gv.newId()),ew("doc","path",e),n instanceof rh){const i=Je.fromString(e,...t);return p_(i),new sn(n,null,new me(i))}{if(!(n instanceof sn||n instanceof ki))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return p_(i),new sn(n.firestore,n instanceof ki?n.converter:null,new me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new DE(this,"async_queue_retry"),this.fu=()=>{const i=td();i&&se("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=td();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=td();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new Mr;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Wo(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),f}(i);throw zr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=Ep.createAndSchedule(this,e,t,i,a=>this.Su(a));return this.Eu.push(o),o}pu(){this.Au&&Ee()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}class Ru extends rh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new y_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y_(e),this._firestoreClient=void 0,await e}}}function Q1(n,e){const t=typeof n=="object"?n:iv(),i=typeof n=="string"?n:"(default)",o=Wd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=g0("firestore");a&&K1(o,...a)}return o}function Sp(n){if(n._terminated)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||G1(n),n._firestoreClient}function G1(n){var e,t,i;const o=n._freezeSettings(),a=function(f,p,y,v){return new IP(f,p,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,ZE(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new z1(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uo(Ot.fromBase64String(e))}catch(t){throw new ae(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Uo(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=/^__.*__$/;class J1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tu(e,this.data,t,this.fieldTransforms)}}function rw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class Pp{constructor(e,t,i,o,a,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Pp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Bu(e),o}Lu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Nc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(rw(this.Mu)&&Y1.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class X1{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Zc(e)}$u(e,t,i,o=!1){return new Pp({Mu:e,methodName:t,Ku:i,path:Nt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iw(n){const e=n._freezeSettings(),t=Zc(n._databaseId);return new X1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Z1(n,e,t,i,o,a={}){const c=n.$u(a.merge||a.mergeFields?2:0,e,t,o);aw("Data must be an object, but it was:",c,i);const f=sw(i,c);let p,y;if(a.merge)p=new Bn(c.fieldMask),y=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const I=tx(e,T,t);if(!c.contains(I))throw new ae(Q.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);rx(v,I)||v.push(I)}p=new Bn(v),y=c.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=c.fieldTransforms;return new J1(new Sn(f),p,y)}function ex(n,e,t,i=!1){return kp(t,n.$u(i?4:3,e))}function kp(n,e){if(ow(n=Qt(n)))return aw("Unsupported field value:",e,n),sw(n,e);if(n instanceof nw)return function(i,o){if(!rw(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const a=[];let c=0;for(const f of i){let p=kp(f,o.ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(n,e)}return function(i,o){if((i=Qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return HP(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=_t.fromDate(i);return{timestampValue:Pc(o.serializer,a)}}if(i instanceof _t){const a=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Pc(o.serializer,a)}}if(i instanceof Rp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Uo)return{bytesValue:wE(o.serializer,i._byteString)};if(i instanceof sn){const a=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw o.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:fp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ap)return function(c,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw f.qu("VectorValues must only contain numeric values.");return up(f.serializer,p)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${nh(i)}`)}(n,e)}function sw(n,e){const t={};return Yv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(n,(i,o)=>{const a=kp(o,e.Ou(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function ow(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof Rp||n instanceof Uo||n instanceof sn||n instanceof nw||n instanceof Ap)}function aw(n,e,t){if(!ow(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=nh(t);throw i==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+i)}}function tx(n,e,t){if((e=Qt(e))instanceof Cp)return e._internalPath;if(typeof e=="string")return uw(n,e);throw Nc("Field path arguments must be of type string or ",n,!1,void 0,t)}const nx=new RegExp("[~\\*/\\[\\]]");function uw(n,e,t){if(e.search(nx)>=0)throw Nc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cp(...e.split("."))._internalPath}catch{throw Nc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nc(n,e,t,i,o){const a=i&&!i.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new ae(Q.INVALID_ARGUMENT,f+n+p)}function rx(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ix(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ix extends lw{data(){return super.data()}}function xp(n,e){return typeof e=="string"?uw(n,e):e instanceof Cp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class ox extends Dp{}function ax(n,e,...t){let i=[];e instanceof Dp&&i.push(e),i=i.concat(t),function(a){const c=a.filter(p=>p instanceof Np).length,f=a.filter(p=>p instanceof oh).length;if(c>1||c>0&&f>0)throw new ae(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class oh extends ox{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new oh(e,t,i)}_apply(e){const t=this._parse(e);return cw(e._query,t),new ih(e.firestore,e.converter,Id(e._query,t))}_parse(e){const t=iw(e.firestore);return function(a,c,f,p,y,v,T){let I;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){v_(T,v);const P=[];for(const L of T)P.push(__(p,a,L));I={arrayValue:{values:P}}}else I=__(p,a,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||v_(T,v),I=ex(f,c,T,v==="in"||v==="not-in");return ft.create(y,v,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ux(n,e,t){const i=e,o=xp("where",n);return oh._create(o,i,t)}class Np extends Dp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Np(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Hn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let c=o;const f=a.getFlattenedFilters();for(const p of f)cw(c,p),c=Id(c,p)}(e._query,t),new ih(e.firestore,e.converter,Id(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function __(n,e,t){if(typeof(t=Qt(t))=="string"){if(t==="")throw new ae(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sE(e)&&t.indexOf("/")!==-1)throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Je.fromString(t));if(!me.isDocumentKey(i))throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Uy(n,new me(i))}if(t instanceof sn)return Uy(n,t._key);throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nh(t)}.`)}function v_(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cw(n,e){const t=function(o,a){for(const c of o)for(const f of c.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lx{convertValue(e,t="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Rs(e,(o,a)=>{i[o]=this.convertValue(a,t)}),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>ut(c.doubleValue));return new Ap(a)}convertGeoPoint(e){return new Rp(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Kc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const t=Ni(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);ze(AE(i));const o=new uu(i.get(1),i.get(3)),a=new me(i.popFirst(5));return o.isEqual(t)||zr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hw extends lw{constructor(e,t,i,o,a,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(xp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class cc extends hw{data(e={}){return super.data(e)}}class hx{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ya(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new cc(this._firestore,this._userDataWriter,i.key,i,new Ya(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(f=>{const p=new cc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ya(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>a||f.type!==3).map(f=>{const p=new cc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ya(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:fx(f.type),doc:p,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(n){n=Vi(n,sn);const e=Vi(n.firestore,Ru);return q1(Sp(e),n._key).then(t=>dx(e,n,t))}class fw extends lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}function uh(n){n=Vi(n,ih);const e=Vi(n.firestore,Ru),t=Sp(e),i=new fw(e);return sx(n._query),H1(t,n._query).then(o=>new hx(e,i,n,o))}function Od(n,e,t){n=Vi(n,sn);const i=Vi(n.firestore,Ru),o=cx(n.converter,e);return dw(i,[Z1(iw(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,lr.none())])}function Oc(n){return dw(Vi(n.firestore,Ru),[new lp(n._key,lr.none())])}function dw(n,e){return function(i,o){const a=new Mr;return i.asyncQueue.enqueueAndForget(async()=>N1(await B1(i),o,a)),a.promise}(Sp(n),e)}function dx(n,e,t){const i=t.docs.get(e._key),o=new fw(n);return new hw(n,o,e._key,i,new Ya(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){qo=o})($o),No(new _s("firestore",(i,{instanceIdentifier:o,options:a})=>{const c=i.getProvider("app").getImmediate(),f=new Ru(new oP(i.getProvider("auth-internal")),new cP(i.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ae(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(y.options.projectId,v)}(c,o),c);return a=Object.assign({useFetchStreams:t},a),f._setSettings(a),f},"PUBLIC").setMultipleInstances(!0)),Ai(Oy,"4.7.6",e),Ai(Oy,"4.7.6","esm2017")})();const px={apiKey:"AIzaSyAMOZ2lT6WunF54ztIYhSzzYB_unxDEJhY",authDomain:"users-justflix.firebaseapp.com",projectId:"users-justflix",storageBucket:"users-justflix.firebasestorage.app",messagingSenderId:"62394278641",appId:"1:62394278641:web:63a1f34494c08b2c3d3f50",measurementId:"G-DZY0NFTXD2"},pw=rv(px),Lc=nP(pw),hr=Q1(pw),sD=async(n,e)=>{try{return await jR(Lc,n,e)}catch{return null}},oD=async n=>{try{const e=sh(hr,`users/${n}/profiles`);return(await uh(e)).docs.map(i=>({id:i.id,...i.data()}))}catch{return[]}},aD=async(n,e)=>{try{const i=(await zR(Lc,n,e)).user,o=Ts(hr,"users",i.uid),a=await ah(o);return a.exists()?{id:i.uid,...a.data()}:null}catch{return null}},uD=async(n,e)=>{try{const t=sh(hr,`users/${n}/profiles`),i=ax(t,ux("name","==",e));if(!(await uh(i)).empty)return $n.error("Ya existe un perfil con ese nombre"),!1;const a=Ts(t);return await Od(a,{profile_id:a.id,name:e}),!0}catch{return!1}},lD=async(n,e)=>{try{const t=sh(hr,`users/${n}/profiles/${e}/favorites`),o=(await uh(t)).docs.map(a=>Oc(Ts(hr,a.ref.path)));return await Promise.all(o),await Oc(Ts(hr,`users/${n}/profiles/${e}`)),!0}catch{return!1}},cD=async(n,e,t)=>{try{if(!n||!e||!t)return;const i=Ts(hr,`users/${n}/profiles/${e}/favorites/${t.id}`),o=await ah(i);if("title"in t){if(o.exists()){$n.error(`La pelcula "${t.title}" ya est en favoritos`);return}await Od(i,t),$n.success(`Pelcula "${t.title}" aadida a favoritos`)}else if("name"in t){if(o.exists()){$n.error(`La serie "${t.name}" ya est en favoritos`);return}await Od(i,t),$n.success(`Serie "${t.name}" aadida a favoritos`)}}catch{$n.error("Error al aadir a favoritos")}},hD=async(n,e,t)=>{try{if(!n||!e||!t)return;const i=Ts(hr,`users/${n}/profiles/${e}/favorites/${t.id}`),o=await ah(i);if("title"in t){if(!o.exists()){$n.error(`La pelcula "${t.title}" ya est eliminada de favoritos`);return}$n.success(`Pelcula ${t.title} eliminada de favoritos`),await Oc(i)}else if("name"in t){if(!o.exists()){$n.error(`La serie "${t.name}" ya se elimin`);return}$n.success(`Serie ${t.name} eliminada de favoritos`),await Oc(i)}return!0}catch{return $n.error("Error al eliminar de favoritos"),!1}},fD=async(n,e)=>{try{const t=sh(hr,`users/${n}/profiles/${e}/favorites`);return(await uh(t)).docs.map(o=>({...o.data()}))}catch{return[]}},mw=M.createContext(void 0),mx=({children:n})=>{const[e,t]=M.useState(null),[i,o]=M.useState(()=>{const T=localStorage.getItem("currentPerfil");return T?JSON.parse(T):null}),[a,c]=M.useState(!1),[f,p]=M.useState(!0);M.useEffect(()=>{const T=qR(Lc,async I=>{if(I){const P=Ts(hr,"users",I.uid),L=await ah(P);if(L.exists()){const B=L.data();t({...B,id:I.uid}),c(!0)}else v()}else t(null),o(null),c(!1);p(!1)});return()=>T()},[]),M.useEffect(()=>{i?localStorage.setItem("currentPerfil",JSON.stringify(i)):localStorage.removeItem("currentPerfil")},[i]);const y=T=>{t(T),c(!0)},v=()=>{HR(Lc),t(null),o(null),c(!1),localStorage.removeItem("currentPerfil")};return Te.jsx(mw.Provider,{value:{currentUser:e,isLoggedIn:a,loading:f,loginAuth:y,logout:v,currentPerfil:i,setCurrentPerfil:o},children:n})},gw=()=>{const n=M.useContext(mw);if(!n)throw new Error("useAuth debe usarse dentro de un AuthProvider");return n};function gx({children:n,redirectTo:e="/login"}){const{isLoggedIn:t}=gw();return t?n||Te.jsx(LI,{}):Te.jsx(U_,{to:e})}function Ld(n,e){return Ld=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},Ld(n,e)}function lh(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Ld(n,e)}var ch=function(){function n(){this.listeners=[]}var e=n.prototype;return e.subscribe=function(i){var o=this,a=i||function(){};return this.listeners.push(a),this.onSubscribe(),function(){o.listeners=o.listeners.filter(function(c){return c!==a}),o.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},n}();function Be(){return Be=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Be.apply(null,arguments)}var yw=typeof window>"u";function Wt(){}function yx(n,e){return typeof n=="function"?n(e):n}function _x(n){return typeof n=="number"&&n>=0&&n!==1/0}function bc(n){return Array.isArray(n)?n:[n]}function vx(n,e){return Math.max(n+(e||0)-Date.now(),0)}function rd(n,e,t){return hh(n)?typeof e=="function"?Be({},t,{queryKey:n,queryFn:e}):Be({},e,{queryKey:n}):n}function yi(n,e,t){return hh(n)?[Be({},e,{queryKey:n}),t]:[n||{},e]}function Ex(n,e){if(n===!0&&e===!0||n==null&&e==null)return"all";if(n===!1&&e===!1)return"none";var t=n??!e;return t?"active":"inactive"}function E_(n,e){var t=n.active,i=n.exact,o=n.fetching,a=n.inactive,c=n.predicate,f=n.queryKey,p=n.stale;if(hh(f)){if(i){if(e.queryHash!==Op(f,e.options))return!1}else if(!Vc(e.queryKey,f))return!1}var y=Ex(t,a);if(y==="none")return!1;if(y!=="all"){var v=e.isActive();if(y==="active"&&!v||y==="inactive"&&v)return!1}return!(typeof p=="boolean"&&e.isStale()!==p||typeof o=="boolean"&&e.isFetching()!==o||c&&!c(e))}function w_(n,e){var t=n.exact,i=n.fetching,o=n.predicate,a=n.mutationKey;if(hh(a)){if(!e.options.mutationKey)return!1;if(t){if(ys(e.options.mutationKey)!==ys(a))return!1}else if(!Vc(e.options.mutationKey,a))return!1}return!(typeof i=="boolean"&&e.state.status==="loading"!==i||o&&!o(e))}function Op(n,e){var t=(e==null?void 0:e.queryKeyHashFn)||ys;return t(n)}function ys(n){var e=bc(n);return wx(e)}function wx(n){return JSON.stringify(n,function(e,t){return bd(t)?Object.keys(t).sort().reduce(function(i,o){return i[o]=t[o],i},{}):t})}function Vc(n,e){return _w(bc(n),bc(e))}function _w(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(function(t){return!_w(n[t],e[t])}):!1}function vw(n,e){if(n===e)return n;var t=Array.isArray(n)&&Array.isArray(e);if(t||bd(n)&&bd(e)){for(var i=t?n.length:Object.keys(n).length,o=t?e:Object.keys(e),a=o.length,c=t?[]:{},f=0,p=0;p<a;p++){var y=t?p:o[p];c[y]=vw(n[y],e[y]),c[y]===n[y]&&f++}return i===a&&f===i?n:c}return e}function dD(n,e){if(n&&!e||e&&!n)return!1;for(var t in n)if(n[t]!==e[t])return!1;return!0}function bd(n){if(!T_(n))return!1;var e=n.constructor;if(typeof e>"u")return!0;var t=e.prototype;return!(!T_(t)||!t.hasOwnProperty("isPrototypeOf"))}function T_(n){return Object.prototype.toString.call(n)==="[object Object]"}function hh(n){return typeof n=="string"||Array.isArray(n)}function Tx(n){return new Promise(function(e){setTimeout(e,n)})}function I_(n){Promise.resolve().then(n).catch(function(e){return setTimeout(function(){throw e})})}function Ew(){if(typeof AbortController=="function")return new AbortController}var Ix=function(n){lh(e,n);function e(){var i;return i=n.call(this)||this,i.setup=function(o){var a;if(!yw&&((a=window)!=null&&a.addEventListener)){var c=function(){return o()};return window.addEventListener("visibilitychange",c,!1),window.addEventListener("focus",c,!1),function(){window.removeEventListener("visibilitychange",c),window.removeEventListener("focus",c)}}},i}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var o;(o=this.cleanup)==null||o.call(this),this.cleanup=void 0}},t.setEventListener=function(o){var a,c=this;this.setup=o,(a=this.cleanup)==null||a.call(this),this.cleanup=o(function(f){typeof f=="boolean"?c.setFocused(f):c.onFocus()})},t.setFocused=function(o){this.focused=o,o&&this.onFocus()},t.onFocus=function(){this.listeners.forEach(function(o){o()})},t.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},e}(ch),hc=new Ix,Sx=function(n){lh(e,n);function e(){var i;return i=n.call(this)||this,i.setup=function(o){var a;if(!yw&&((a=window)!=null&&a.addEventListener)){var c=function(){return o()};return window.addEventListener("online",c,!1),window.addEventListener("offline",c,!1),function(){window.removeEventListener("online",c),window.removeEventListener("offline",c)}}},i}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var o;(o=this.cleanup)==null||o.call(this),this.cleanup=void 0}},t.setEventListener=function(o){var a,c=this;this.setup=o,(a=this.cleanup)==null||a.call(this),this.cleanup=o(function(f){typeof f=="boolean"?c.setOnline(f):c.onOnline()})},t.setOnline=function(o){this.online=o,o&&this.onOnline()},t.onOnline=function(){this.listeners.forEach(function(o){o()})},t.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},e}(ch),fc=new Sx;function Cx(n){return Math.min(1e3*Math.pow(2,n),3e4)}function Mc(n){return typeof(n==null?void 0:n.cancel)=="function"}var ww=function(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent};function id(n){return n instanceof ww}var Tw=function(e){var t=this,i=!1,o,a,c,f;this.abort=e.abort,this.cancel=function(I){return o==null?void 0:o(I)},this.cancelRetry=function(){i=!0},this.continueRetry=function(){i=!1},this.continue=function(){return a==null?void 0:a()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(I,P){c=I,f=P});var p=function(P){t.isResolved||(t.isResolved=!0,e.onSuccess==null||e.onSuccess(P),a==null||a(),c(P))},y=function(P){t.isResolved||(t.isResolved=!0,e.onError==null||e.onError(P),a==null||a(),f(P))},v=function(){return new Promise(function(P){a=P,t.isPaused=!0,e.onPause==null||e.onPause()}).then(function(){a=void 0,t.isPaused=!1,e.onContinue==null||e.onContinue()})},T=function I(){if(!t.isResolved){var P;try{P=e.fn()}catch(L){P=Promise.reject(L)}o=function(B){if(!t.isResolved&&(y(new ww(B)),t.abort==null||t.abort(),Mc(P)))try{P.cancel()}catch{}},t.isTransportCancelable=Mc(P),Promise.resolve(P).then(p).catch(function(L){var B,V;if(!t.isResolved){var H=(B=e.retry)!=null?B:3,X=(V=e.retryDelay)!=null?V:Cx,G=typeof X=="function"?X(t.failureCount,L):X,ue=H===!0||typeof H=="number"&&t.failureCount<H||typeof H=="function"&&H(t.failureCount,L);if(i||!ue){y(L);return}t.failureCount++,e.onFail==null||e.onFail(t.failureCount,L),Tx(G).then(function(){if(!hc.isFocused()||!fc.isOnline())return v()}).then(function(){i?y(L):I()})}})}};T()},Rx=function(){function n(){this.queue=[],this.transactions=0,this.notifyFn=function(t){t()},this.batchNotifyFn=function(t){t()}}var e=n.prototype;return e.batch=function(i){var o;this.transactions++;try{o=i()}finally{this.transactions--,this.transactions||this.flush()}return o},e.schedule=function(i){var o=this;this.transactions?this.queue.push(i):I_(function(){o.notifyFn(i)})},e.batchCalls=function(i){var o=this;return function(){for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];o.schedule(function(){i.apply(void 0,c)})}},e.flush=function(){var i=this,o=this.queue;this.queue=[],o.length&&I_(function(){i.batchNotifyFn(function(){o.forEach(function(a){i.notifyFn(a)})})})},e.setNotifyFunction=function(i){this.notifyFn=i},e.setBatchNotifyFunction=function(i){this.batchNotifyFn=i},n}(),Dt=new Rx,Iw=console;function Sw(){return Iw}function Ax(n){Iw=n}var Px=function(){function n(t){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=t.meta,this.scheduleGc()}var e=n.prototype;return e.setOptions=function(i){var o;this.options=Be({},this.defaultOptions,i),this.meta=i==null?void 0:i.meta,this.cacheTime=Math.max(this.cacheTime||0,(o=this.options.cacheTime)!=null?o:5*60*1e3)},e.setDefaultOptions=function(i){this.defaultOptions=i},e.scheduleGc=function(){var i=this;this.clearGcTimeout(),_x(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){i.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(i,o){var a,c,f=this.state.data,p=yx(i,f);return(a=(c=this.options).isDataEqual)!=null&&a.call(c,f,p)?p=f:this.options.structuralSharing!==!1&&(p=vw(f,p)),this.dispatch({data:p,type:"success",dataUpdatedAt:o==null?void 0:o.updatedAt}),p},e.setState=function(i,o){this.dispatch({type:"setState",state:i,setStateOptions:o})},e.cancel=function(i){var o,a=this.promise;return(o=this.retryer)==null||o.cancel(i),a?a.then(Wt).catch(Wt):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(i){return i.options.enabled!==!1})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(i){return i.getCurrentResult().isStale})},e.isStaleByTime=function(i){return i===void 0&&(i=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!vx(this.state.dataUpdatedAt,i)},e.onFocus=function(){var i,o=this.observers.find(function(a){return a.shouldFetchOnWindowFocus()});o&&o.refetch(),(i=this.retryer)==null||i.continue()},e.onOnline=function(){var i,o=this.observers.find(function(a){return a.shouldFetchOnReconnect()});o&&o.refetch(),(i=this.retryer)==null||i.continue()},e.addObserver=function(i){this.observers.indexOf(i)===-1&&(this.observers.push(i),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:i}))},e.removeObserver=function(i){this.observers.indexOf(i)!==-1&&(this.observers=this.observers.filter(function(o){return o!==i}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:i}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(i,o){var a=this,c,f,p;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(o!=null&&o.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var y;return(y=this.retryer)==null||y.continueRetry(),this.promise}}if(i&&this.setOptions(i),!this.options.queryFn){var v=this.observers.find(function(X){return X.options.queryFn});v&&this.setOptions(v.options)}var T=bc(this.queryKey),I=Ew(),P={queryKey:T,pageParam:void 0,meta:this.meta};Object.defineProperty(P,"signal",{enumerable:!0,get:function(){if(I)return a.abortSignalConsumed=!0,I.signal}});var L=function(){return a.options.queryFn?(a.abortSignalConsumed=!1,a.options.queryFn(P)):Promise.reject("Missing queryFn")},B={fetchOptions:o,options:this.options,queryKey:T,state:this.state,fetchFn:L,meta:this.meta};if((c=this.options.behavior)!=null&&c.onFetch){var V;(V=this.options.behavior)==null||V.onFetch(B)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((f=B.fetchOptions)==null?void 0:f.meta)){var H;this.dispatch({type:"fetch",meta:(H=B.fetchOptions)==null?void 0:H.meta})}return this.retryer=new Tw({fn:B.fetchFn,abort:I==null||(p=I.abort)==null?void 0:p.bind(I),onSuccess:function(G){a.setData(G),a.cache.config.onSuccess==null||a.cache.config.onSuccess(G,a),a.cacheTime===0&&a.optionalRemove()},onError:function(G){id(G)&&G.silent||a.dispatch({type:"error",error:G}),id(G)||(a.cache.config.onError==null||a.cache.config.onError(G,a),Sw().error(G)),a.cacheTime===0&&a.optionalRemove()},onFail:function(){a.dispatch({type:"failed"})},onPause:function(){a.dispatch({type:"pause"})},onContinue:function(){a.dispatch({type:"continue"})},retry:B.options.retry,retryDelay:B.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(i){var o=this;this.state=this.reducer(this.state,i),Dt.batch(function(){o.observers.forEach(function(a){a.onQueryUpdate(i)}),o.cache.notify({query:o,type:"queryUpdated",action:i})})},e.getDefaultState=function(i){var o=typeof i.initialData=="function"?i.initialData():i.initialData,a=typeof i.initialData<"u",c=a?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0,f=typeof o<"u";return{data:o,dataUpdateCount:0,dataUpdatedAt:f?c??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:f?"success":"idle"}},e.reducer=function(i,o){var a,c;switch(o.type){case"failed":return Be({},i,{fetchFailureCount:i.fetchFailureCount+1});case"pause":return Be({},i,{isPaused:!0});case"continue":return Be({},i,{isPaused:!1});case"fetch":return Be({},i,{fetchFailureCount:0,fetchMeta:(a=o.meta)!=null?a:null,isFetching:!0,isPaused:!1},!i.dataUpdatedAt&&{error:null,status:"loading"});case"success":return Be({},i,{data:o.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:(c=o.dataUpdatedAt)!=null?c:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var f=o.error;return id(f)&&f.revert&&this.revertState?Be({},this.revertState):Be({},i,{error:f,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return Be({},i,{isInvalidated:!0});case"setState":return Be({},i,o.state);default:return i}},n}(),kx=function(n){lh(e,n);function e(i){var o;return o=n.call(this)||this,o.config=i||{},o.queries=[],o.queriesMap={},o}var t=e.prototype;return t.build=function(o,a,c){var f,p=a.queryKey,y=(f=a.queryHash)!=null?f:Op(p,a),v=this.get(y);return v||(v=new Px({cache:this,queryKey:p,queryHash:y,options:o.defaultQueryOptions(a),state:c,defaultOptions:o.getQueryDefaults(p),meta:a.meta}),this.add(v)),v},t.add=function(o){this.queriesMap[o.queryHash]||(this.queriesMap[o.queryHash]=o,this.queries.push(o),this.notify({type:"queryAdded",query:o}))},t.remove=function(o){var a=this.queriesMap[o.queryHash];a&&(o.destroy(),this.queries=this.queries.filter(function(c){return c!==o}),a===o&&delete this.queriesMap[o.queryHash],this.notify({type:"queryRemoved",query:o}))},t.clear=function(){var o=this;Dt.batch(function(){o.queries.forEach(function(a){o.remove(a)})})},t.get=function(o){return this.queriesMap[o]},t.getAll=function(){return this.queries},t.find=function(o,a){var c=yi(o,a),f=c[0];return typeof f.exact>"u"&&(f.exact=!0),this.queries.find(function(p){return E_(f,p)})},t.findAll=function(o,a){var c=yi(o,a),f=c[0];return Object.keys(f).length>0?this.queries.filter(function(p){return E_(f,p)}):this.queries},t.notify=function(o){var a=this;Dt.batch(function(){a.listeners.forEach(function(c){c(o)})})},t.onFocus=function(){var o=this;Dt.batch(function(){o.queries.forEach(function(a){a.onFocus()})})},t.onOnline=function(){var o=this;Dt.batch(function(){o.queries.forEach(function(a){a.onOnline()})})},e}(ch),xx=function(){function n(t){this.options=Be({},t.defaultOptions,t.options),this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.observers=[],this.state=t.state||Dx(),this.meta=t.meta}var e=n.prototype;return e.setState=function(i){this.dispatch({type:"setState",state:i})},e.addObserver=function(i){this.observers.indexOf(i)===-1&&this.observers.push(i)},e.removeObserver=function(i){this.observers=this.observers.filter(function(o){return o!==i})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Wt).catch(Wt)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var i=this,o,a=this.state.status==="loading",c=Promise.resolve();return a||(this.dispatch({type:"loading",variables:this.options.variables}),c=c.then(function(){i.mutationCache.config.onMutate==null||i.mutationCache.config.onMutate(i.state.variables,i)}).then(function(){return i.options.onMutate==null?void 0:i.options.onMutate(i.state.variables)}).then(function(f){f!==i.state.context&&i.dispatch({type:"loading",context:f,variables:i.state.variables})})),c.then(function(){return i.executeMutation()}).then(function(f){o=f,i.mutationCache.config.onSuccess==null||i.mutationCache.config.onSuccess(o,i.state.variables,i.state.context,i)}).then(function(){return i.options.onSuccess==null?void 0:i.options.onSuccess(o,i.state.variables,i.state.context)}).then(function(){return i.options.onSettled==null?void 0:i.options.onSettled(o,null,i.state.variables,i.state.context)}).then(function(){return i.dispatch({type:"success",data:o}),o}).catch(function(f){return i.mutationCache.config.onError==null||i.mutationCache.config.onError(f,i.state.variables,i.state.context,i),Sw().error(f),Promise.resolve().then(function(){return i.options.onError==null?void 0:i.options.onError(f,i.state.variables,i.state.context)}).then(function(){return i.options.onSettled==null?void 0:i.options.onSettled(void 0,f,i.state.variables,i.state.context)}).then(function(){throw i.dispatch({type:"error",error:f}),f})})},e.executeMutation=function(){var i=this,o;return this.retryer=new Tw({fn:function(){return i.options.mutationFn?i.options.mutationFn(i.state.variables):Promise.reject("No mutationFn found")},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:(o=this.options.retry)!=null?o:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(i){var o=this;this.state=Nx(this.state,i),Dt.batch(function(){o.observers.forEach(function(a){a.onMutationUpdate(i)}),o.mutationCache.notify(o)})},n}();function Dx(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Nx(n,e){switch(e.type){case"failed":return Be({},n,{failureCount:n.failureCount+1});case"pause":return Be({},n,{isPaused:!0});case"continue":return Be({},n,{isPaused:!1});case"loading":return Be({},n,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return Be({},n,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return Be({},n,{data:void 0,error:e.error,failureCount:n.failureCount+1,isPaused:!1,status:"error"});case"setState":return Be({},n,e.state);default:return n}}var Ox=function(n){lh(e,n);function e(i){var o;return o=n.call(this)||this,o.config=i||{},o.mutations=[],o.mutationId=0,o}var t=e.prototype;return t.build=function(o,a,c){var f=new xx({mutationCache:this,mutationId:++this.mutationId,options:o.defaultMutationOptions(a),state:c,defaultOptions:a.mutationKey?o.getMutationDefaults(a.mutationKey):void 0,meta:a.meta});return this.add(f),f},t.add=function(o){this.mutations.push(o),this.notify(o)},t.remove=function(o){this.mutations=this.mutations.filter(function(a){return a!==o}),o.cancel(),this.notify(o)},t.clear=function(){var o=this;Dt.batch(function(){o.mutations.forEach(function(a){o.remove(a)})})},t.getAll=function(){return this.mutations},t.find=function(o){return typeof o.exact>"u"&&(o.exact=!0),this.mutations.find(function(a){return w_(o,a)})},t.findAll=function(o){return this.mutations.filter(function(a){return w_(o,a)})},t.notify=function(o){var a=this;Dt.batch(function(){a.listeners.forEach(function(c){c(o)})})},t.onFocus=function(){this.resumePausedMutations()},t.onOnline=function(){this.resumePausedMutations()},t.resumePausedMutations=function(){var o=this.mutations.filter(function(a){return a.state.isPaused});return Dt.batch(function(){return o.reduce(function(a,c){return a.then(function(){return c.continue().catch(Wt)})},Promise.resolve())})},e}(ch);function Lx(){return{onFetch:function(e){e.fetchFn=function(){var t,i,o,a,c,f,p=(t=e.fetchOptions)==null||(i=t.meta)==null?void 0:i.refetchPage,y=(o=e.fetchOptions)==null||(a=o.meta)==null?void 0:a.fetchMore,v=y==null?void 0:y.pageParam,T=(y==null?void 0:y.direction)==="forward",I=(y==null?void 0:y.direction)==="backward",P=((c=e.state.data)==null?void 0:c.pages)||[],L=((f=e.state.data)==null?void 0:f.pageParams)||[],B=Ew(),V=B==null?void 0:B.signal,H=L,X=!1,G=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},ue=function(je,tt,qe,Ne){return H=Ne?[tt].concat(H):[].concat(H,[tt]),Ne?[qe].concat(je):[].concat(je,[qe])},we=function(je,tt,qe,Ne){if(X)return Promise.reject("Cancelled");if(typeof qe>"u"&&!tt&&je.length)return Promise.resolve(je);var te={queryKey:e.queryKey,signal:V,pageParam:qe,meta:e.meta},he=G(te),re=Promise.resolve(he).then(function(W){return ue(je,qe,W,Ne)});if(Mc(he)){var b=re;b.cancel=he.cancel}return re},pe;if(!P.length)pe=we([]);else if(T){var D=typeof v<"u",S=D?v:S_(e.options,P);pe=we(P,D,S)}else if(I){var R=typeof v<"u",x=R?v:bx(e.options,P);pe=we(P,R,x,!0)}else(function(){H=[];var A=typeof e.options.getNextPageParam>"u",je=p&&P[0]?p(P[0],0,P):!0;pe=je?we([],A,L[0]):Promise.resolve(ue([],L[0],P[0]));for(var tt=function(te){pe=pe.then(function(he){var re=p&&P[te]?p(P[te],te,P):!0;if(re){var b=A?L[te]:S_(e.options,he);return we(he,A,b)}return Promise.resolve(ue(he,L[te],P[te]))})},qe=1;qe<P.length;qe++)tt(qe)})();var O=pe.then(function(A){return{pages:A,pageParams:H}}),F=O;return F.cancel=function(){X=!0,B==null||B.abort(),Mc(pe)&&pe.cancel()},O}}}}function S_(n,e){return n.getNextPageParam==null?void 0:n.getNextPageParam(e[e.length-1],e)}function bx(n,e){return n.getPreviousPageParam==null?void 0:n.getPreviousPageParam(e[0],e)}var Vx=function(){function n(t){t===void 0&&(t={}),this.queryCache=t.queryCache||new kx,this.mutationCache=t.mutationCache||new Ox,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=n.prototype;return e.mount=function(){var i=this;this.unsubscribeFocus=hc.subscribe(function(){hc.isFocused()&&fc.isOnline()&&(i.mutationCache.onFocus(),i.queryCache.onFocus())}),this.unsubscribeOnline=fc.subscribe(function(){hc.isFocused()&&fc.isOnline()&&(i.mutationCache.onOnline(),i.queryCache.onOnline())})},e.unmount=function(){var i,o;(i=this.unsubscribeFocus)==null||i.call(this),(o=this.unsubscribeOnline)==null||o.call(this)},e.isFetching=function(i,o){var a=yi(i,o),c=a[0];return c.fetching=!0,this.queryCache.findAll(c).length},e.isMutating=function(i){return this.mutationCache.findAll(Be({},i,{fetching:!0})).length},e.getQueryData=function(i,o){var a;return(a=this.queryCache.find(i,o))==null?void 0:a.state.data},e.getQueriesData=function(i){return this.getQueryCache().findAll(i).map(function(o){var a=o.queryKey,c=o.state,f=c.data;return[a,f]})},e.setQueryData=function(i,o,a){var c=rd(i),f=this.defaultQueryOptions(c);return this.queryCache.build(this,f).setData(o,a)},e.setQueriesData=function(i,o,a){var c=this;return Dt.batch(function(){return c.getQueryCache().findAll(i).map(function(f){var p=f.queryKey;return[p,c.setQueryData(p,o,a)]})})},e.getQueryState=function(i,o){var a;return(a=this.queryCache.find(i,o))==null?void 0:a.state},e.removeQueries=function(i,o){var a=yi(i,o),c=a[0],f=this.queryCache;Dt.batch(function(){f.findAll(c).forEach(function(p){f.remove(p)})})},e.resetQueries=function(i,o,a){var c=this,f=yi(i,o,a),p=f[0],y=f[1],v=this.queryCache,T=Be({},p,{active:!0});return Dt.batch(function(){return v.findAll(p).forEach(function(I){I.reset()}),c.refetchQueries(T,y)})},e.cancelQueries=function(i,o,a){var c=this,f=yi(i,o,a),p=f[0],y=f[1],v=y===void 0?{}:y;typeof v.revert>"u"&&(v.revert=!0);var T=Dt.batch(function(){return c.queryCache.findAll(p).map(function(I){return I.cancel(v)})});return Promise.all(T).then(Wt).catch(Wt)},e.invalidateQueries=function(i,o,a){var c,f,p,y=this,v=yi(i,o,a),T=v[0],I=v[1],P=Be({},T,{active:(c=(f=T.refetchActive)!=null?f:T.active)!=null?c:!0,inactive:(p=T.refetchInactive)!=null?p:!1});return Dt.batch(function(){return y.queryCache.findAll(T).forEach(function(L){L.invalidate()}),y.refetchQueries(P,I)})},e.refetchQueries=function(i,o,a){var c=this,f=yi(i,o,a),p=f[0],y=f[1],v=Dt.batch(function(){return c.queryCache.findAll(p).map(function(I){return I.fetch(void 0,Be({},y,{meta:{refetchPage:p==null?void 0:p.refetchPage}}))})}),T=Promise.all(v).then(Wt);return y!=null&&y.throwOnError||(T=T.catch(Wt)),T},e.fetchQuery=function(i,o,a){var c=rd(i,o,a),f=this.defaultQueryOptions(c);typeof f.retry>"u"&&(f.retry=!1);var p=this.queryCache.build(this,f);return p.isStaleByTime(f.staleTime)?p.fetch(f):Promise.resolve(p.state.data)},e.prefetchQuery=function(i,o,a){return this.fetchQuery(i,o,a).then(Wt).catch(Wt)},e.fetchInfiniteQuery=function(i,o,a){var c=rd(i,o,a);return c.behavior=Lx(),this.fetchQuery(c)},e.prefetchInfiniteQuery=function(i,o,a){return this.fetchInfiniteQuery(i,o,a).then(Wt).catch(Wt)},e.cancelMutations=function(){var i=this,o=Dt.batch(function(){return i.mutationCache.getAll().map(function(a){return a.cancel()})});return Promise.all(o).then(Wt).catch(Wt)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(i){return this.mutationCache.build(this,i).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(i){this.defaultOptions=i},e.setQueryDefaults=function(i,o){var a=this.queryDefaults.find(function(c){return ys(i)===ys(c.queryKey)});a?a.defaultOptions=o:this.queryDefaults.push({queryKey:i,defaultOptions:o})},e.getQueryDefaults=function(i){var o;return i?(o=this.queryDefaults.find(function(a){return Vc(i,a.queryKey)}))==null?void 0:o.defaultOptions:void 0},e.setMutationDefaults=function(i,o){var a=this.mutationDefaults.find(function(c){return ys(i)===ys(c.mutationKey)});a?a.defaultOptions=o:this.mutationDefaults.push({mutationKey:i,defaultOptions:o})},e.getMutationDefaults=function(i){var o;return i?(o=this.mutationDefaults.find(function(a){return Vc(i,a.mutationKey)}))==null?void 0:o.defaultOptions:void 0},e.defaultQueryOptions=function(i){if(i!=null&&i._defaulted)return i;var o=Be({},this.defaultOptions.queries,this.getQueryDefaults(i==null?void 0:i.queryKey),i,{_defaulted:!0});return!o.queryHash&&o.queryKey&&(o.queryHash=Op(o.queryKey,o)),o},e.defaultQueryObserverOptions=function(i){return this.defaultQueryOptions(i)},e.defaultMutationOptions=function(i){return i!=null&&i._defaulted?i:Be({},this.defaultOptions.mutations,this.getMutationDefaults(i==null?void 0:i.mutationKey),i,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},n}(),Mx=yS.unstable_batchedUpdates;Dt.setBatchNotifyFunction(Mx);var Fx=console;Ax(Fx);var C_=Si.createContext(void 0),Cw=Si.createContext(!1);function Rw(n){return n&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=C_),window.ReactQueryClientContext):C_}var pD=function(){var e=Si.useContext(Rw(Si.useContext(Cw)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ux=function(e){var t=e.client,i=e.contextSharing,o=i===void 0?!1:i,a=e.children;Si.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var c=Rw(o);return Si.createElement(Cw.Provider,{value:o},Si.createElement(c.Provider,{value:t},a))};const jx=M.lazy(()=>Br(()=>import("./PageLogin-B5UWl5KF.js"),[])),zx=M.lazy(()=>Br(()=>import("./PageRegister-BKGlYO2P.js"),[])),$x=M.lazy(()=>Br(()=>import("./MiLista-BWwhmkQW.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Bx=M.lazy(()=>Br(()=>import("./Buscar-C3F0CrpS.js"),__vite__mapDeps([8,4,1,2,9,3,5,10]))),qx=M.lazy(()=>Br(()=>import("./Home-Bep9En1h.js"),__vite__mapDeps([11,12,4,3,5,9,1,2,6,13,14,15]))),Hx=M.lazy(()=>Br(()=>import("./ManagePerfil-kpjYiZkQ.js"),__vite__mapDeps([16,4,17]))),R_=M.lazy(()=>Br(()=>import("./InfoWindow-DAbj0eCn.js"),__vite__mapDeps([18,12,4,3,5,9,1,2,6,13,19]))),Wx=M.lazy(()=>Br(()=>import("./MoviesWindow-DciQgTuA.js"),__vite__mapDeps([20,14,4,9,1,2,15,12,3,5,6,13]))),Kx=M.lazy(()=>Br(()=>import("./SeriesWindow-B7vxvM9m.js"),__vite__mapDeps([21,14,4,9,1,2,15,12,3,5,6,13])));function Qx(){const n=new Vx,{isLoggedIn:e,loading:t,currentPerfil:i}=gw();return t?null:Te.jsx(Ux,{client:n,children:Te.jsxs(oS,{children:[Te.jsx(a0,{position:"bottom-right",reverseOrder:!1}),Te.jsx(M.Suspense,{fallback:Te.jsx(u0,{}),children:Te.jsxs(VI,{children:[Te.jsx(dn,{path:"/",element:Te.jsx(U_,{to:e?i?"/home":"/manageProfiles":"/login",replace:!0})}),Te.jsx(dn,{path:"login",element:Te.jsx(jx,{})}),Te.jsx(dn,{path:"register",element:Te.jsx(zx,{})}),Te.jsxs(dn,{element:Te.jsx(gx,{}),children:[Te.jsx(dn,{path:"home",element:Te.jsx(qx,{})}),Te.jsx(dn,{path:"miLista",element:Te.jsx($x,{})}),Te.jsx(dn,{path:"buscar",element:Te.jsx(Bx,{})}),Te.jsx(dn,{path:"manageProfiles",element:Te.jsx(Hx,{})}),Te.jsx(dn,{path:"/movies",element:Te.jsx(Wx,{})}),Te.jsx(dn,{path:"/series",element:Te.jsx(Kx,{})}),Te.jsx(dn,{path:"/movie/:movieId",element:Te.jsx(R_,{type:"movie"})}),Te.jsx(dn,{path:"/serie/:seriesId",element:Te.jsx(R_,{type:"serie"})})]})]})})]})})}const Aw=M.createContext(void 0);function Gx({children:n}){const[e,t]=M.useState(!1);return Te.jsx(Aw.Provider,{value:{openMenu:e,setOpenMenu:t},children:n})}function mD(){const n=M.useContext(Aw);if(!n)throw new Error("useMenu debe usarse dentro de un MenuProvider");return n}const Pw=M.createContext(void 0),Yx=({children:n})=>{const[e,t]=M.useState("en");return Te.jsx(Pw.Provider,{value:{language:e,setLanguage:t},children:n})},gD=()=>{const n=M.useContext(Pw);if(!n)throw new Error("useLanguage debe ser usado dentro de LanguageProvider");return n},kw=M.createContext(void 0),Jx=({children:n})=>{const[e,t]=M.useState(!1);return Te.jsx(kw.Provider,{value:{emailExists:e,setEmailExists:t},children:n})},yD=()=>{const n=M.useContext(kw);if(!n)throw new Error("useEmail debe ser usado dentro de EmailProvider");return n},xw=M.createContext(void 0);function Xx({children:n}){const[e,t]=M.useState("");return Te.jsx(xw.Provider,{value:{searchTerm:e,setSearchTerm:t},children:n})}function _D(){const n=M.useContext(xw);if(!n)throw new Error("useSearch debe usarse dentro de un SearchProvider");return n}zT.createRoot(document.getElementById("root")).render(Te.jsx(Gx,{children:Te.jsx(Yx,{children:Te.jsx(mx,{children:Te.jsx(Jx,{children:Te.jsx(Xx,{children:Te.jsx(Qx,{})})})})})}));export{yw as A,_x as B,vx as C,hc as D,vw as E,Sw as F,dD as G,id as H,Dt as I,ch as J,rd as K,B_ as L,aD as M,Lc as N,Ts as O,hr as P,ah as Q,Si as R,u0 as S,sD as T,Od as U,Br as _,_D as a,mD as b,V_ as c,pD as d,gD as e,cD as f,fD as g,oD as h,uD as i,Te as j,$n as k,lD as l,eD as m,Zx as n,Be as o,lh as p,yS as q,M as r,gS as s,A_ as t,gw as u,Vd as v,hD as w,yD as x,Mi as y,Wt as z};
